{"version":3,"file":"nunjucks-template-parser.js","sources":["../node_modules/asap/raw.js","../node_modules/nunjucks/src/lib.js","../node_modules/asap/asap.js","../node_modules/a-sync-waterfall/index.js","../node_modules/nunjucks/src/lexer.js","../node_modules/nunjucks/src/object.js","../node_modules/nunjucks/src/nodes.js","../node_modules/nunjucks/src/parser.js","../node_modules/nunjucks/src/transformer.js","../node_modules/nunjucks/src/runtime.js","../node_modules/nunjucks/src/compiler.js","../node_modules/nunjucks/src/filters.js","../node_modules/nunjucks/src/loader.js","../node_modules/nunjucks/src/precompiled-loader.js","../node_modules/nunjucks/src/node-loaders.js","../node_modules/nunjucks/src/loaders.js","../node_modules/nunjucks/src/globals.js","../node_modules/nunjucks/src/tests.js","../node_modules/nunjucks/src/express-app.js","../node_modules/nunjucks/src/environment.js","../node_modules/nunjucks/src/precompile.js","../node_modules/nunjucks/src/jinja-compat.js","../node_modules/nunjucks/index.js","../src/nunjucks-template-parser.ts"],"sourcesContent":["\"use strict\";\n\nvar domain; // The domain module is executed on demand\nvar hasSetImmediate = typeof setImmediate === \"function\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including network IO events in Node.js.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Avoids a function call\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory excaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\nrawAsap.requestFlush = requestFlush;\nfunction requestFlush() {\n    // Ensure flushing is not bound to any domain.\n    // It is not sufficient to exit the domain, because domains exist on a stack.\n    // To execute code outside of any domain, the following dance is necessary.\n    var parentDomain = process.domain;\n    if (parentDomain) {\n        if (!domain) {\n            // Lazy execute the domain module.\n            // Only employed if the user elects to use domains.\n            domain = require(\"domain\");\n        }\n        domain.active = process.domain = null;\n    }\n\n    // `setImmediate` is slower that `process.nextTick`, but `process.nextTick`\n    // cannot handle recursion.\n    // `requestFlush` will only be called recursively from `asap.js`, to resume\n    // flushing after an error is thrown into a domain.\n    // Conveniently, `setImmediate` was introduced in the same version\n    // `process.nextTick` started throwing recursion errors.\n    if (flushing && hasSetImmediate) {\n        setImmediate(flush);\n    } else {\n        process.nextTick(flush);\n    }\n\n    if (parentDomain) {\n        domain.active = process.domain = parentDomain;\n    }\n}\n","'use strict';\n\nvar ArrayProto = Array.prototype;\nvar ObjProto = Object.prototype;\nvar escapeMap = {\n  '&': '&amp;',\n  '\"': '&quot;',\n  '\\'': '&#39;',\n  '<': '&lt;',\n  '>': '&gt;'\n};\nvar escapeRegex = /[&\"'<>]/g;\n\nvar _exports = module.exports = {};\n\nfunction hasOwnProp(obj, k) {\n  return ObjProto.hasOwnProperty.call(obj, k);\n}\n\n_exports.hasOwnProp = hasOwnProp;\n\nfunction lookupEscape(ch) {\n  return escapeMap[ch];\n}\n\nfunction _prettifyError(path, withInternals, err) {\n  if (!err.Update) {\n    // not one of ours, cast it\n    err = new _exports.TemplateError(err);\n  }\n\n  err.Update(path); // Unless they marked the dev flag, show them a trace from here\n\n  if (!withInternals) {\n    var old = err;\n    err = new Error(old.message);\n    err.name = old.name;\n  }\n\n  return err;\n}\n\n_exports._prettifyError = _prettifyError;\n\nfunction TemplateError(message, lineno, colno) {\n  var err;\n  var cause;\n\n  if (message instanceof Error) {\n    cause = message;\n    message = cause.name + \": \" + cause.message;\n  }\n\n  if (Object.setPrototypeOf) {\n    err = new Error(message);\n    Object.setPrototypeOf(err, TemplateError.prototype);\n  } else {\n    err = this;\n    Object.defineProperty(err, 'message', {\n      enumerable: false,\n      writable: true,\n      value: message\n    });\n  }\n\n  Object.defineProperty(err, 'name', {\n    value: 'Template render error'\n  });\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(err, this.constructor);\n  }\n\n  var getStack;\n\n  if (cause) {\n    var stackDescriptor = Object.getOwnPropertyDescriptor(cause, 'stack');\n\n    getStack = stackDescriptor && (stackDescriptor.get || function () {\n      return stackDescriptor.value;\n    });\n\n    if (!getStack) {\n      getStack = function getStack() {\n        return cause.stack;\n      };\n    }\n  } else {\n    var stack = new Error(message).stack;\n\n    getStack = function getStack() {\n      return stack;\n    };\n  }\n\n  Object.defineProperty(err, 'stack', {\n    get: function get() {\n      return getStack.call(err);\n    }\n  });\n  Object.defineProperty(err, 'cause', {\n    value: cause\n  });\n  err.lineno = lineno;\n  err.colno = colno;\n  err.firstUpdate = true;\n\n  err.Update = function Update(path) {\n    var msg = '(' + (path || 'unknown path') + ')'; // only show lineno + colno next to path of template\n    // where error occurred\n\n    if (this.firstUpdate) {\n      if (this.lineno && this.colno) {\n        msg += \" [Line \" + this.lineno + \", Column \" + this.colno + \"]\";\n      } else if (this.lineno) {\n        msg += \" [Line \" + this.lineno + \"]\";\n      }\n    }\n\n    msg += '\\n ';\n\n    if (this.firstUpdate) {\n      msg += ' ';\n    }\n\n    this.message = msg + (this.message || '');\n    this.firstUpdate = false;\n    return this;\n  };\n\n  return err;\n}\n\nif (Object.setPrototypeOf) {\n  Object.setPrototypeOf(TemplateError.prototype, Error.prototype);\n} else {\n  TemplateError.prototype = Object.create(Error.prototype, {\n    constructor: {\n      value: TemplateError\n    }\n  });\n}\n\n_exports.TemplateError = TemplateError;\n\nfunction escape(val) {\n  return val.replace(escapeRegex, lookupEscape);\n}\n\n_exports.escape = escape;\n\nfunction isFunction(obj) {\n  return ObjProto.toString.call(obj) === '[object Function]';\n}\n\n_exports.isFunction = isFunction;\n\nfunction isArray(obj) {\n  return ObjProto.toString.call(obj) === '[object Array]';\n}\n\n_exports.isArray = isArray;\n\nfunction isString(obj) {\n  return ObjProto.toString.call(obj) === '[object String]';\n}\n\n_exports.isString = isString;\n\nfunction isObject(obj) {\n  return ObjProto.toString.call(obj) === '[object Object]';\n}\n\n_exports.isObject = isObject;\n/**\n * @param {string|number} attr\n * @returns {(string|number)[]}\n * @private\n */\n\nfunction _prepareAttributeParts(attr) {\n  if (!attr) {\n    return [];\n  }\n\n  if (typeof attr === 'string') {\n    return attr.split('.');\n  }\n\n  return [attr];\n}\n/**\n * @param {string}   attribute      Attribute value. Dots allowed.\n * @returns {function(Object): *}\n */\n\n\nfunction getAttrGetter(attribute) {\n  var parts = _prepareAttributeParts(attribute);\n\n  return function attrGetter(item) {\n    var _item = item;\n\n    for (var i = 0; i < parts.length; i++) {\n      var part = parts[i]; // If item is not an object, and we still got parts to handle, it means\n      // that something goes wrong. Just roll out to undefined in that case.\n\n      if (hasOwnProp(_item, part)) {\n        _item = _item[part];\n      } else {\n        return undefined;\n      }\n    }\n\n    return _item;\n  };\n}\n\n_exports.getAttrGetter = getAttrGetter;\n\nfunction groupBy(obj, val, throwOnUndefined) {\n  var result = {};\n  var iterator = isFunction(val) ? val : getAttrGetter(val);\n\n  for (var i = 0; i < obj.length; i++) {\n    var value = obj[i];\n    var key = iterator(value, i);\n\n    if (key === undefined && throwOnUndefined === true) {\n      throw new TypeError(\"groupby: attribute \\\"\" + val + \"\\\" resolved to undefined\");\n    }\n\n    (result[key] || (result[key] = [])).push(value);\n  }\n\n  return result;\n}\n\n_exports.groupBy = groupBy;\n\nfunction toArray(obj) {\n  return Array.prototype.slice.call(obj);\n}\n\n_exports.toArray = toArray;\n\nfunction without(array) {\n  var result = [];\n\n  if (!array) {\n    return result;\n  }\n\n  var length = array.length;\n  var contains = toArray(arguments).slice(1);\n  var index = -1;\n\n  while (++index < length) {\n    if (indexOf(contains, array[index]) === -1) {\n      result.push(array[index]);\n    }\n  }\n\n  return result;\n}\n\n_exports.without = without;\n\nfunction repeat(char_, n) {\n  var str = '';\n\n  for (var i = 0; i < n; i++) {\n    str += char_;\n  }\n\n  return str;\n}\n\n_exports.repeat = repeat;\n\nfunction each(obj, func, context) {\n  if (obj == null) {\n    return;\n  }\n\n  if (ArrayProto.forEach && obj.forEach === ArrayProto.forEach) {\n    obj.forEach(func, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      func.call(context, obj[i], i, obj);\n    }\n  }\n}\n\n_exports.each = each;\n\nfunction map(obj, func) {\n  var results = [];\n\n  if (obj == null) {\n    return results;\n  }\n\n  if (ArrayProto.map && obj.map === ArrayProto.map) {\n    return obj.map(func);\n  }\n\n  for (var i = 0; i < obj.length; i++) {\n    results[results.length] = func(obj[i], i);\n  }\n\n  if (obj.length === +obj.length) {\n    results.length = obj.length;\n  }\n\n  return results;\n}\n\n_exports.map = map;\n\nfunction asyncIter(arr, iter, cb) {\n  var i = -1;\n\n  function next() {\n    i++;\n\n    if (i < arr.length) {\n      iter(arr[i], i, next, cb);\n    } else {\n      cb();\n    }\n  }\n\n  next();\n}\n\n_exports.asyncIter = asyncIter;\n\nfunction asyncFor(obj, iter, cb) {\n  var keys = keys_(obj || {});\n  var len = keys.length;\n  var i = -1;\n\n  function next() {\n    i++;\n    var k = keys[i];\n\n    if (i < len) {\n      iter(k, obj[k], i, len, next);\n    } else {\n      cb();\n    }\n  }\n\n  next();\n}\n\n_exports.asyncFor = asyncFor;\n\nfunction indexOf(arr, searchElement, fromIndex) {\n  return Array.prototype.indexOf.call(arr || [], searchElement, fromIndex);\n}\n\n_exports.indexOf = indexOf;\n\nfunction keys_(obj) {\n  /* eslint-disable no-restricted-syntax */\n  var arr = [];\n\n  for (var k in obj) {\n    if (hasOwnProp(obj, k)) {\n      arr.push(k);\n    }\n  }\n\n  return arr;\n}\n\n_exports.keys = keys_;\n\nfunction _entries(obj) {\n  return keys_(obj).map(function (k) {\n    return [k, obj[k]];\n  });\n}\n\n_exports._entries = _entries;\n\nfunction _values(obj) {\n  return keys_(obj).map(function (k) {\n    return obj[k];\n  });\n}\n\n_exports._values = _values;\n\nfunction extend(obj1, obj2) {\n  obj1 = obj1 || {};\n  keys_(obj2).forEach(function (k) {\n    obj1[k] = obj2[k];\n  });\n  return obj1;\n}\n\n_exports._assign = _exports.extend = extend;\n\nfunction inOperator(key, val) {\n  if (isArray(val) || isString(val)) {\n    return val.indexOf(key) !== -1;\n  } else if (isObject(val)) {\n    return key in val;\n  }\n\n  throw new Error('Cannot use \"in\" operator to search for \"' + key + '\" in unexpected types.');\n}\n\n_exports.inOperator = inOperator;","\"use strict\";\n\nvar rawAsap = require(\"./raw\");\nvar freeTasks = [];\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with\n * priority over IO events. An exception thrown in a task can be handled by\n * `process.on(\"uncaughtException\") or `domain.on(\"error\")`, but will otherwise\n * crash the process. If the error is handled, all subsequent tasks will\n * resume.\n *\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawTask.domain = process.domain;\n    rawAsap(rawTask);\n}\n\nfunction RawTask() {\n    this.task = null;\n    this.domain = null;\n}\n\nRawTask.prototype.call = function () {\n    if (this.domain) {\n        this.domain.enter();\n    }\n    var threw = true;\n    try {\n        this.task.call();\n        threw = false;\n        // If the task throws an exception (presumably) Node.js restores the\n        // domain stack for the next event.\n        if (this.domain) {\n            this.domain.exit();\n        }\n    } finally {\n        // We use try/finally and a threw flag to avoid messing up stack traces\n        // when we catch and release errors.\n        if (threw) {\n            // In Node.js, uncaught exceptions are considered fatal errors.\n            // Re-throw them to interrupt flushing!\n            // Ensure that flushing continues if an uncaught exception is\n            // suppressed listening process.on(\"uncaughtException\") or\n            // domain.on(\"error\").\n            rawAsap.requestFlush();\n        }\n        // If the task threw an error, we do not want to exit the domain here.\n        // Exiting the domain would prevent the domain from catching the error.\n        this.task = null;\n        this.domain = null;\n        freeTasks.push(this);\n    }\n};\n\n","// MIT license (by Elan Shanker).\n(function(globals) {\n  'use strict';\n\n  var executeSync = function(){\n    var args = Array.prototype.slice.call(arguments);\n    if (typeof args[0] === 'function'){\n      args[0].apply(null, args.splice(1));\n    }\n  };\n\n  var executeAsync = function(fn){\n    if (typeof setImmediate === 'function') {\n      setImmediate(fn);\n    } else if (typeof process !== 'undefined' && process.nextTick) {\n      process.nextTick(fn);\n    } else {\n      setTimeout(fn, 0);\n    }\n  };\n\n  var makeIterator = function (tasks) {\n    var makeCallback = function (index) {\n      var fn = function () {\n        if (tasks.length) {\n          tasks[index].apply(null, arguments);\n        }\n        return fn.next();\n      };\n      fn.next = function () {\n        return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n      };\n      return fn;\n    };\n    return makeCallback(0);\n  };\n  \n  var _isArray = Array.isArray || function(maybeArray){\n    return Object.prototype.toString.call(maybeArray) === '[object Array]';\n  };\n\n  var waterfall = function (tasks, callback, forceAsync) {\n    var nextTick = forceAsync ? executeAsync : executeSync;\n    callback = callback || function () {};\n    if (!_isArray(tasks)) {\n      var err = new Error('First argument to waterfall must be an array of functions');\n      return callback(err);\n    }\n    if (!tasks.length) {\n      return callback();\n    }\n    var wrapIterator = function (iterator) {\n      return function (err) {\n        if (err) {\n          callback.apply(null, arguments);\n          callback = function () {};\n        } else {\n          var args = Array.prototype.slice.call(arguments, 1);\n          var next = iterator.next();\n          if (next) {\n            args.push(wrapIterator(next));\n          } else {\n            args.push(callback);\n          }\n          nextTick(function () {\n            iterator.apply(null, args);\n          });\n        }\n      };\n    };\n    wrapIterator(makeIterator(tasks))();\n  };\n\n  if (typeof define !== 'undefined' && define.amd) {\n    define([], function () {\n      return waterfall;\n    }); // RequireJS\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = waterfall; // CommonJS\n  } else {\n    globals.waterfall = waterfall; // <script>\n  }\n})(this);\n","'use strict';\n\nvar lib = require('./lib');\n\nvar whitespaceChars = \" \\n\\t\\r\\xA0\";\nvar delimChars = '()[]{}%*-+~/#,:|.<>=!';\nvar intChars = '0123456789';\nvar BLOCK_START = '{%';\nvar BLOCK_END = '%}';\nvar VARIABLE_START = '{{';\nvar VARIABLE_END = '}}';\nvar COMMENT_START = '{#';\nvar COMMENT_END = '#}';\nvar TOKEN_STRING = 'string';\nvar TOKEN_WHITESPACE = 'whitespace';\nvar TOKEN_DATA = 'data';\nvar TOKEN_BLOCK_START = 'block-start';\nvar TOKEN_BLOCK_END = 'block-end';\nvar TOKEN_VARIABLE_START = 'variable-start';\nvar TOKEN_VARIABLE_END = 'variable-end';\nvar TOKEN_COMMENT = 'comment';\nvar TOKEN_LEFT_PAREN = 'left-paren';\nvar TOKEN_RIGHT_PAREN = 'right-paren';\nvar TOKEN_LEFT_BRACKET = 'left-bracket';\nvar TOKEN_RIGHT_BRACKET = 'right-bracket';\nvar TOKEN_LEFT_CURLY = 'left-curly';\nvar TOKEN_RIGHT_CURLY = 'right-curly';\nvar TOKEN_OPERATOR = 'operator';\nvar TOKEN_COMMA = 'comma';\nvar TOKEN_COLON = 'colon';\nvar TOKEN_TILDE = 'tilde';\nvar TOKEN_PIPE = 'pipe';\nvar TOKEN_INT = 'int';\nvar TOKEN_FLOAT = 'float';\nvar TOKEN_BOOLEAN = 'boolean';\nvar TOKEN_NONE = 'none';\nvar TOKEN_SYMBOL = 'symbol';\nvar TOKEN_SPECIAL = 'special';\nvar TOKEN_REGEX = 'regex';\n\nfunction token(type, value, lineno, colno) {\n  return {\n    type: type,\n    value: value,\n    lineno: lineno,\n    colno: colno\n  };\n}\n\nvar Tokenizer = /*#__PURE__*/function () {\n  function Tokenizer(str, opts) {\n    this.str = str;\n    this.index = 0;\n    this.len = str.length;\n    this.lineno = 0;\n    this.colno = 0;\n    this.in_code = false;\n    opts = opts || {};\n    var tags = opts.tags || {};\n    this.tags = {\n      BLOCK_START: tags.blockStart || BLOCK_START,\n      BLOCK_END: tags.blockEnd || BLOCK_END,\n      VARIABLE_START: tags.variableStart || VARIABLE_START,\n      VARIABLE_END: tags.variableEnd || VARIABLE_END,\n      COMMENT_START: tags.commentStart || COMMENT_START,\n      COMMENT_END: tags.commentEnd || COMMENT_END\n    };\n    this.trimBlocks = !!opts.trimBlocks;\n    this.lstripBlocks = !!opts.lstripBlocks;\n  }\n\n  var _proto = Tokenizer.prototype;\n\n  _proto.nextToken = function nextToken() {\n    var lineno = this.lineno;\n    var colno = this.colno;\n    var tok;\n\n    if (this.in_code) {\n      // Otherwise, if we are in a block parse it as code\n      var cur = this.current();\n\n      if (this.isFinished()) {\n        // We have nothing else to parse\n        return null;\n      } else if (cur === '\"' || cur === '\\'') {\n        // We've hit a string\n        return token(TOKEN_STRING, this._parseString(cur), lineno, colno);\n      } else if (tok = this._extract(whitespaceChars)) {\n        // We hit some whitespace\n        return token(TOKEN_WHITESPACE, tok, lineno, colno);\n      } else if ((tok = this._extractString(this.tags.BLOCK_END)) || (tok = this._extractString('-' + this.tags.BLOCK_END))) {\n        // Special check for the block end tag\n        //\n        // It is a requirement that start and end tags are composed of\n        // delimiter characters (%{}[] etc), and our code always\n        // breaks on delimiters so we can assume the token parsing\n        // doesn't consume these elsewhere\n        this.in_code = false;\n\n        if (this.trimBlocks) {\n          cur = this.current();\n\n          if (cur === '\\n') {\n            // Skip newline\n            this.forward();\n          } else if (cur === '\\r') {\n            // Skip CRLF newline\n            this.forward();\n            cur = this.current();\n\n            if (cur === '\\n') {\n              this.forward();\n            } else {\n              // Was not a CRLF, so go back\n              this.back();\n            }\n          }\n        }\n\n        return token(TOKEN_BLOCK_END, tok, lineno, colno);\n      } else if ((tok = this._extractString(this.tags.VARIABLE_END)) || (tok = this._extractString('-' + this.tags.VARIABLE_END))) {\n        // Special check for variable end tag (see above)\n        this.in_code = false;\n        return token(TOKEN_VARIABLE_END, tok, lineno, colno);\n      } else if (cur === 'r' && this.str.charAt(this.index + 1) === '/') {\n        // Skip past 'r/'.\n        this.forwardN(2); // Extract until the end of the regex -- / ends it, \\/ does not.\n\n        var regexBody = '';\n\n        while (!this.isFinished()) {\n          if (this.current() === '/' && this.previous() !== '\\\\') {\n            this.forward();\n            break;\n          } else {\n            regexBody += this.current();\n            this.forward();\n          }\n        } // Check for flags.\n        // The possible flags are according to https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/RegExp)\n\n\n        var POSSIBLE_FLAGS = ['g', 'i', 'm', 'y'];\n        var regexFlags = '';\n\n        while (!this.isFinished()) {\n          var isCurrentAFlag = POSSIBLE_FLAGS.indexOf(this.current()) !== -1;\n\n          if (isCurrentAFlag) {\n            regexFlags += this.current();\n            this.forward();\n          } else {\n            break;\n          }\n        }\n\n        return token(TOKEN_REGEX, {\n          body: regexBody,\n          flags: regexFlags\n        }, lineno, colno);\n      } else if (delimChars.indexOf(cur) !== -1) {\n        // We've hit a delimiter (a special char like a bracket)\n        this.forward();\n        var complexOps = ['==', '===', '!=', '!==', '<=', '>=', '//', '**'];\n        var curComplex = cur + this.current();\n        var type;\n\n        if (lib.indexOf(complexOps, curComplex) !== -1) {\n          this.forward();\n          cur = curComplex; // See if this is a strict equality/inequality comparator\n\n          if (lib.indexOf(complexOps, curComplex + this.current()) !== -1) {\n            cur = curComplex + this.current();\n            this.forward();\n          }\n        }\n\n        switch (cur) {\n          case '(':\n            type = TOKEN_LEFT_PAREN;\n            break;\n\n          case ')':\n            type = TOKEN_RIGHT_PAREN;\n            break;\n\n          case '[':\n            type = TOKEN_LEFT_BRACKET;\n            break;\n\n          case ']':\n            type = TOKEN_RIGHT_BRACKET;\n            break;\n\n          case '{':\n            type = TOKEN_LEFT_CURLY;\n            break;\n\n          case '}':\n            type = TOKEN_RIGHT_CURLY;\n            break;\n\n          case ',':\n            type = TOKEN_COMMA;\n            break;\n\n          case ':':\n            type = TOKEN_COLON;\n            break;\n\n          case '~':\n            type = TOKEN_TILDE;\n            break;\n\n          case '|':\n            type = TOKEN_PIPE;\n            break;\n\n          default:\n            type = TOKEN_OPERATOR;\n        }\n\n        return token(type, cur, lineno, colno);\n      } else {\n        // We are not at whitespace or a delimiter, so extract the\n        // text and parse it\n        tok = this._extractUntil(whitespaceChars + delimChars);\n\n        if (tok.match(/^[-+]?[0-9]+$/)) {\n          if (this.current() === '.') {\n            this.forward();\n\n            var dec = this._extract(intChars);\n\n            return token(TOKEN_FLOAT, tok + '.' + dec, lineno, colno);\n          } else {\n            return token(TOKEN_INT, tok, lineno, colno);\n          }\n        } else if (tok.match(/^(true|false)$/)) {\n          return token(TOKEN_BOOLEAN, tok, lineno, colno);\n        } else if (tok === 'none') {\n          return token(TOKEN_NONE, tok, lineno, colno);\n          /*\n           * Added to make the test `null is null` evaluate truthily.\n           * Otherwise, Nunjucks will look up null in the context and\n           * return `undefined`, which is not what we want. This *may* have\n           * consequences is someone is using null in their templates as a\n           * variable.\n           */\n        } else if (tok === 'null') {\n          return token(TOKEN_NONE, tok, lineno, colno);\n        } else if (tok) {\n          return token(TOKEN_SYMBOL, tok, lineno, colno);\n        } else {\n          throw new Error('Unexpected value while parsing: ' + tok);\n        }\n      }\n    } else {\n      // Parse out the template text, breaking on tag\n      // delimiters because we need to look for block/variable start\n      // tags (don't use the full delimChars for optimization)\n      var beginChars = this.tags.BLOCK_START.charAt(0) + this.tags.VARIABLE_START.charAt(0) + this.tags.COMMENT_START.charAt(0) + this.tags.COMMENT_END.charAt(0);\n\n      if (this.isFinished()) {\n        return null;\n      } else if ((tok = this._extractString(this.tags.BLOCK_START + '-')) || (tok = this._extractString(this.tags.BLOCK_START))) {\n        this.in_code = true;\n        return token(TOKEN_BLOCK_START, tok, lineno, colno);\n      } else if ((tok = this._extractString(this.tags.VARIABLE_START + '-')) || (tok = this._extractString(this.tags.VARIABLE_START))) {\n        this.in_code = true;\n        return token(TOKEN_VARIABLE_START, tok, lineno, colno);\n      } else {\n        tok = '';\n        var data;\n        var inComment = false;\n\n        if (this._matches(this.tags.COMMENT_START)) {\n          inComment = true;\n          tok = this._extractString(this.tags.COMMENT_START);\n        } // Continually consume text, breaking on the tag delimiter\n        // characters and checking to see if it's a start tag.\n        //\n        // We could hit the end of the template in the middle of\n        // our looping, so check for the null return value from\n        // _extractUntil\n\n\n        while ((data = this._extractUntil(beginChars)) !== null) {\n          tok += data;\n\n          if ((this._matches(this.tags.BLOCK_START) || this._matches(this.tags.VARIABLE_START) || this._matches(this.tags.COMMENT_START)) && !inComment) {\n            if (this.lstripBlocks && this._matches(this.tags.BLOCK_START) && this.colno > 0 && this.colno <= tok.length) {\n              var lastLine = tok.slice(-this.colno);\n\n              if (/^\\s+$/.test(lastLine)) {\n                // Remove block leading whitespace from beginning of the string\n                tok = tok.slice(0, -this.colno);\n\n                if (!tok.length) {\n                  // All data removed, collapse to avoid unnecessary nodes\n                  // by returning next token (block start)\n                  return this.nextToken();\n                }\n              }\n            } // If it is a start tag, stop looping\n\n\n            break;\n          } else if (this._matches(this.tags.COMMENT_END)) {\n            if (!inComment) {\n              throw new Error('unexpected end of comment');\n            }\n\n            tok += this._extractString(this.tags.COMMENT_END);\n            break;\n          } else {\n            // It does not match any tag, so add the character and\n            // carry on\n            tok += this.current();\n            this.forward();\n          }\n        }\n\n        if (data === null && inComment) {\n          throw new Error('expected end of comment, got end of file');\n        }\n\n        return token(inComment ? TOKEN_COMMENT : TOKEN_DATA, tok, lineno, colno);\n      }\n    }\n  };\n\n  _proto._parseString = function _parseString(delimiter) {\n    this.forward();\n    var str = '';\n\n    while (!this.isFinished() && this.current() !== delimiter) {\n      var cur = this.current();\n\n      if (cur === '\\\\') {\n        this.forward();\n\n        switch (this.current()) {\n          case 'n':\n            str += '\\n';\n            break;\n\n          case 't':\n            str += '\\t';\n            break;\n\n          case 'r':\n            str += '\\r';\n            break;\n\n          default:\n            str += this.current();\n        }\n\n        this.forward();\n      } else {\n        str += cur;\n        this.forward();\n      }\n    }\n\n    this.forward();\n    return str;\n  };\n\n  _proto._matches = function _matches(str) {\n    if (this.index + str.length > this.len) {\n      return null;\n    }\n\n    var m = this.str.slice(this.index, this.index + str.length);\n    return m === str;\n  };\n\n  _proto._extractString = function _extractString(str) {\n    if (this._matches(str)) {\n      this.forwardN(str.length);\n      return str;\n    }\n\n    return null;\n  };\n\n  _proto._extractUntil = function _extractUntil(charString) {\n    // Extract all non-matching chars, with the default matching set\n    // to everything\n    return this._extractMatching(true, charString || '');\n  };\n\n  _proto._extract = function _extract(charString) {\n    // Extract all matching chars (no default, so charString must be\n    // explicit)\n    return this._extractMatching(false, charString);\n  };\n\n  _proto._extractMatching = function _extractMatching(breakOnMatch, charString) {\n    // Pull out characters until a breaking char is hit.\n    // If breakOnMatch is false, a non-matching char stops it.\n    // If breakOnMatch is true, a matching char stops it.\n    if (this.isFinished()) {\n      return null;\n    }\n\n    var first = charString.indexOf(this.current()); // Only proceed if the first character doesn't meet our condition\n\n    if (breakOnMatch && first === -1 || !breakOnMatch && first !== -1) {\n      var t = this.current();\n      this.forward(); // And pull out all the chars one at a time until we hit a\n      // breaking char\n\n      var idx = charString.indexOf(this.current());\n\n      while ((breakOnMatch && idx === -1 || !breakOnMatch && idx !== -1) && !this.isFinished()) {\n        t += this.current();\n        this.forward();\n        idx = charString.indexOf(this.current());\n      }\n\n      return t;\n    }\n\n    return '';\n  };\n\n  _proto._extractRegex = function _extractRegex(regex) {\n    var matches = this.currentStr().match(regex);\n\n    if (!matches) {\n      return null;\n    } // Move forward whatever was matched\n\n\n    this.forwardN(matches[0].length);\n    return matches;\n  };\n\n  _proto.isFinished = function isFinished() {\n    return this.index >= this.len;\n  };\n\n  _proto.forwardN = function forwardN(n) {\n    for (var i = 0; i < n; i++) {\n      this.forward();\n    }\n  };\n\n  _proto.forward = function forward() {\n    this.index++;\n\n    if (this.previous() === '\\n') {\n      this.lineno++;\n      this.colno = 0;\n    } else {\n      this.colno++;\n    }\n  };\n\n  _proto.backN = function backN(n) {\n    for (var i = 0; i < n; i++) {\n      this.back();\n    }\n  };\n\n  _proto.back = function back() {\n    this.index--;\n\n    if (this.current() === '\\n') {\n      this.lineno--;\n      var idx = this.src.lastIndexOf('\\n', this.index - 1);\n\n      if (idx === -1) {\n        this.colno = this.index;\n      } else {\n        this.colno = this.index - idx;\n      }\n    } else {\n      this.colno--;\n    }\n  } // current returns current character\n  ;\n\n  _proto.current = function current() {\n    if (!this.isFinished()) {\n      return this.str.charAt(this.index);\n    }\n\n    return '';\n  } // currentStr returns what's left of the unparsed string\n  ;\n\n  _proto.currentStr = function currentStr() {\n    if (!this.isFinished()) {\n      return this.str.substr(this.index);\n    }\n\n    return '';\n  };\n\n  _proto.previous = function previous() {\n    return this.str.charAt(this.index - 1);\n  };\n\n  return Tokenizer;\n}();\n\nmodule.exports = {\n  lex: function lex(src, opts) {\n    return new Tokenizer(src, opts);\n  },\n  TOKEN_STRING: TOKEN_STRING,\n  TOKEN_WHITESPACE: TOKEN_WHITESPACE,\n  TOKEN_DATA: TOKEN_DATA,\n  TOKEN_BLOCK_START: TOKEN_BLOCK_START,\n  TOKEN_BLOCK_END: TOKEN_BLOCK_END,\n  TOKEN_VARIABLE_START: TOKEN_VARIABLE_START,\n  TOKEN_VARIABLE_END: TOKEN_VARIABLE_END,\n  TOKEN_COMMENT: TOKEN_COMMENT,\n  TOKEN_LEFT_PAREN: TOKEN_LEFT_PAREN,\n  TOKEN_RIGHT_PAREN: TOKEN_RIGHT_PAREN,\n  TOKEN_LEFT_BRACKET: TOKEN_LEFT_BRACKET,\n  TOKEN_RIGHT_BRACKET: TOKEN_RIGHT_BRACKET,\n  TOKEN_LEFT_CURLY: TOKEN_LEFT_CURLY,\n  TOKEN_RIGHT_CURLY: TOKEN_RIGHT_CURLY,\n  TOKEN_OPERATOR: TOKEN_OPERATOR,\n  TOKEN_COMMA: TOKEN_COMMA,\n  TOKEN_COLON: TOKEN_COLON,\n  TOKEN_TILDE: TOKEN_TILDE,\n  TOKEN_PIPE: TOKEN_PIPE,\n  TOKEN_INT: TOKEN_INT,\n  TOKEN_FLOAT: TOKEN_FLOAT,\n  TOKEN_BOOLEAN: TOKEN_BOOLEAN,\n  TOKEN_NONE: TOKEN_NONE,\n  TOKEN_SYMBOL: TOKEN_SYMBOL,\n  TOKEN_SPECIAL: TOKEN_SPECIAL,\n  TOKEN_REGEX: TOKEN_REGEX\n};","'use strict'; // A simple class system, more documentation to come\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar EventEmitter = require('events');\n\nvar lib = require('./lib');\n\nfunction parentWrap(parent, prop) {\n  if (typeof parent !== 'function' || typeof prop !== 'function') {\n    return prop;\n  }\n\n  return function wrap() {\n    // Save the current parent method\n    var tmp = this.parent; // Set parent to the previous method, call, and restore\n\n    this.parent = parent;\n    var res = prop.apply(this, arguments);\n    this.parent = tmp;\n    return res;\n  };\n}\n\nfunction extendClass(cls, name, props) {\n  props = props || {};\n  lib.keys(props).forEach(function (k) {\n    props[k] = parentWrap(cls.prototype[k], props[k]);\n  });\n\n  var subclass = /*#__PURE__*/function (_cls) {\n    _inheritsLoose(subclass, _cls);\n\n    function subclass() {\n      return _cls.apply(this, arguments) || this;\n    }\n\n    _createClass(subclass, [{\n      key: \"typename\",\n      get: function get() {\n        return name;\n      }\n    }]);\n\n    return subclass;\n  }(cls);\n\n  lib._assign(subclass.prototype, props);\n\n  return subclass;\n}\n\nvar Obj = /*#__PURE__*/function () {\n  function Obj() {\n    // Unfortunately necessary for backwards compatibility\n    this.init.apply(this, arguments);\n  }\n\n  var _proto = Obj.prototype;\n\n  _proto.init = function init() {};\n\n  Obj.extend = function extend(name, props) {\n    if (typeof name === 'object') {\n      props = name;\n      name = 'anonymous';\n    }\n\n    return extendClass(this, name, props);\n  };\n\n  _createClass(Obj, [{\n    key: \"typename\",\n    get: function get() {\n      return this.constructor.name;\n    }\n  }]);\n\n  return Obj;\n}();\n\nvar EmitterObj = /*#__PURE__*/function (_EventEmitter) {\n  _inheritsLoose(EmitterObj, _EventEmitter);\n\n  function EmitterObj() {\n    var _this2;\n\n    var _this;\n\n    _this = _EventEmitter.call(this) || this; // Unfortunately necessary for backwards compatibility\n\n    (_this2 = _this).init.apply(_this2, arguments);\n\n    return _this;\n  }\n\n  var _proto2 = EmitterObj.prototype;\n\n  _proto2.init = function init() {};\n\n  EmitterObj.extend = function extend(name, props) {\n    if (typeof name === 'object') {\n      props = name;\n      name = 'anonymous';\n    }\n\n    return extendClass(this, name, props);\n  };\n\n  _createClass(EmitterObj, [{\n    key: \"typename\",\n    get: function get() {\n      return this.constructor.name;\n    }\n  }]);\n\n  return EmitterObj;\n}(EventEmitter);\n\nmodule.exports = {\n  Obj: Obj,\n  EmitterObj: EmitterObj\n};","'use strict';\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar _require = require('./object'),\n    Obj = _require.Obj;\n\nfunction traverseAndCheck(obj, type, results) {\n  if (obj instanceof type) {\n    results.push(obj);\n  }\n\n  if (obj instanceof Node) {\n    obj.findAll(type, results);\n  }\n}\n\nvar Node = /*#__PURE__*/function (_Obj) {\n  _inheritsLoose(Node, _Obj);\n\n  function Node() {\n    return _Obj.apply(this, arguments) || this;\n  }\n\n  var _proto = Node.prototype;\n\n  _proto.init = function init(lineno, colno) {\n    var _arguments = arguments,\n        _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    this.lineno = lineno;\n    this.colno = colno;\n    this.fields.forEach(function (field, i) {\n      // The first two args are line/col numbers, so offset by 2\n      var val = _arguments[i + 2]; // Fields should never be undefined, but null. It makes\n      // testing easier to normalize values.\n\n      if (val === undefined) {\n        val = null;\n      }\n\n      _this[field] = val;\n    });\n  };\n\n  _proto.findAll = function findAll(type, results) {\n    var _this2 = this;\n\n    results = results || [];\n\n    if (this instanceof NodeList) {\n      this.children.forEach(function (child) {\n        return traverseAndCheck(child, type, results);\n      });\n    } else {\n      this.fields.forEach(function (field) {\n        return traverseAndCheck(_this2[field], type, results);\n      });\n    }\n\n    return results;\n  };\n\n  _proto.iterFields = function iterFields(func) {\n    var _this3 = this;\n\n    this.fields.forEach(function (field) {\n      func(_this3[field], field);\n    });\n  };\n\n  return Node;\n}(Obj); // Abstract nodes\n\n\nvar Value = /*#__PURE__*/function (_Node) {\n  _inheritsLoose(Value, _Node);\n\n  function Value() {\n    return _Node.apply(this, arguments) || this;\n  }\n\n  _createClass(Value, [{\n    key: \"typename\",\n    get: function get() {\n      return 'Value';\n    }\n  }, {\n    key: \"fields\",\n    get: function get() {\n      return ['value'];\n    }\n  }]);\n\n  return Value;\n}(Node); // Concrete nodes\n\n\nvar NodeList = /*#__PURE__*/function (_Node2) {\n  _inheritsLoose(NodeList, _Node2);\n\n  function NodeList() {\n    return _Node2.apply(this, arguments) || this;\n  }\n\n  var _proto2 = NodeList.prototype;\n\n  _proto2.init = function init(lineno, colno, nodes) {\n    _Node2.prototype.init.call(this, lineno, colno, nodes || []);\n  };\n\n  _proto2.addChild = function addChild(node) {\n    this.children.push(node);\n  };\n\n  _createClass(NodeList, [{\n    key: \"typename\",\n    get: function get() {\n      return 'NodeList';\n    }\n  }, {\n    key: \"fields\",\n    get: function get() {\n      return ['children'];\n    }\n  }]);\n\n  return NodeList;\n}(Node);\n\nvar Root = NodeList.extend('Root');\nvar Literal = Value.extend('Literal');\nvar Symbol = Value.extend('Symbol');\nvar Group = NodeList.extend('Group');\nvar ArrayNode = NodeList.extend('Array');\nvar Pair = Node.extend('Pair', {\n  fields: ['key', 'value']\n});\nvar Dict = NodeList.extend('Dict');\nvar LookupVal = Node.extend('LookupVal', {\n  fields: ['target', 'val']\n});\nvar If = Node.extend('If', {\n  fields: ['cond', 'body', 'else_']\n});\nvar IfAsync = If.extend('IfAsync');\nvar InlineIf = Node.extend('InlineIf', {\n  fields: ['cond', 'body', 'else_']\n});\nvar For = Node.extend('For', {\n  fields: ['arr', 'name', 'body', 'else_']\n});\nvar AsyncEach = For.extend('AsyncEach');\nvar AsyncAll = For.extend('AsyncAll');\nvar Macro = Node.extend('Macro', {\n  fields: ['name', 'args', 'body']\n});\nvar Caller = Macro.extend('Caller');\nvar Import = Node.extend('Import', {\n  fields: ['template', 'target', 'withContext']\n});\n\nvar FromImport = /*#__PURE__*/function (_Node3) {\n  _inheritsLoose(FromImport, _Node3);\n\n  function FromImport() {\n    return _Node3.apply(this, arguments) || this;\n  }\n\n  var _proto3 = FromImport.prototype;\n\n  _proto3.init = function init(lineno, colno, template, names, withContext) {\n    _Node3.prototype.init.call(this, lineno, colno, template, names || new NodeList(), withContext);\n  };\n\n  _createClass(FromImport, [{\n    key: \"typename\",\n    get: function get() {\n      return 'FromImport';\n    }\n  }, {\n    key: \"fields\",\n    get: function get() {\n      return ['template', 'names', 'withContext'];\n    }\n  }]);\n\n  return FromImport;\n}(Node);\n\nvar FunCall = Node.extend('FunCall', {\n  fields: ['name', 'args']\n});\nvar Filter = FunCall.extend('Filter');\nvar FilterAsync = Filter.extend('FilterAsync', {\n  fields: ['name', 'args', 'symbol']\n});\nvar KeywordArgs = Dict.extend('KeywordArgs');\nvar Block = Node.extend('Block', {\n  fields: ['name', 'body']\n});\nvar Super = Node.extend('Super', {\n  fields: ['blockName', 'symbol']\n});\nvar TemplateRef = Node.extend('TemplateRef', {\n  fields: ['template']\n});\nvar Extends = TemplateRef.extend('Extends');\nvar Include = Node.extend('Include', {\n  fields: ['template', 'ignoreMissing']\n});\nvar Set = Node.extend('Set', {\n  fields: ['targets', 'value']\n});\nvar Switch = Node.extend('Switch', {\n  fields: ['expr', 'cases', 'default']\n});\nvar Case = Node.extend('Case', {\n  fields: ['cond', 'body']\n});\nvar Output = NodeList.extend('Output');\nvar Capture = Node.extend('Capture', {\n  fields: ['body']\n});\nvar TemplateData = Literal.extend('TemplateData');\nvar UnaryOp = Node.extend('UnaryOp', {\n  fields: ['target']\n});\nvar BinOp = Node.extend('BinOp', {\n  fields: ['left', 'right']\n});\nvar In = BinOp.extend('In');\nvar Is = BinOp.extend('Is');\nvar Or = BinOp.extend('Or');\nvar And = BinOp.extend('And');\nvar Not = UnaryOp.extend('Not');\nvar Add = BinOp.extend('Add');\nvar Concat = BinOp.extend('Concat');\nvar Sub = BinOp.extend('Sub');\nvar Mul = BinOp.extend('Mul');\nvar Div = BinOp.extend('Div');\nvar FloorDiv = BinOp.extend('FloorDiv');\nvar Mod = BinOp.extend('Mod');\nvar Pow = BinOp.extend('Pow');\nvar Neg = UnaryOp.extend('Neg');\nvar Pos = UnaryOp.extend('Pos');\nvar Compare = Node.extend('Compare', {\n  fields: ['expr', 'ops']\n});\nvar CompareOperand = Node.extend('CompareOperand', {\n  fields: ['expr', 'type']\n});\nvar CallExtension = Node.extend('CallExtension', {\n  init: function init(ext, prop, args, contentArgs) {\n    this.parent();\n    this.extName = ext.__name || ext;\n    this.prop = prop;\n    this.args = args || new NodeList();\n    this.contentArgs = contentArgs || [];\n    this.autoescape = ext.autoescape;\n  },\n  fields: ['extName', 'prop', 'args', 'contentArgs']\n});\nvar CallExtensionAsync = CallExtension.extend('CallExtensionAsync'); // This is hacky, but this is just a debugging function anyway\n\nfunction print(str, indent, inline) {\n  var lines = str.split('\\n');\n  lines.forEach(function (line, i) {\n    if (line && (inline && i > 0 || !inline)) {\n      process.stdout.write(' '.repeat(indent));\n    }\n\n    var nl = i === lines.length - 1 ? '' : '\\n';\n    process.stdout.write(\"\" + line + nl);\n  });\n} // Print the AST in a nicely formatted tree format for debuggin\n\n\nfunction printNodes(node, indent) {\n  indent = indent || 0;\n  print(node.typename + ': ', indent);\n\n  if (node instanceof NodeList) {\n    print('\\n');\n    node.children.forEach(function (n) {\n      printNodes(n, indent + 2);\n    });\n  } else if (node instanceof CallExtension) {\n    print(node.extName + \".\" + node.prop + \"\\n\");\n\n    if (node.args) {\n      printNodes(node.args, indent + 2);\n    }\n\n    if (node.contentArgs) {\n      node.contentArgs.forEach(function (n) {\n        printNodes(n, indent + 2);\n      });\n    }\n  } else {\n    var nodes = [];\n    var props = null;\n    node.iterFields(function (val, fieldName) {\n      if (val instanceof Node) {\n        nodes.push([fieldName, val]);\n      } else {\n        props = props || {};\n        props[fieldName] = val;\n      }\n    });\n\n    if (props) {\n      print(JSON.stringify(props, null, 2) + '\\n', null, true);\n    } else {\n      print('\\n');\n    }\n\n    nodes.forEach(function (_ref) {\n      var fieldName = _ref[0],\n          n = _ref[1];\n      print(\"[\" + fieldName + \"] =>\", indent + 2);\n      printNodes(n, indent + 4);\n    });\n  }\n}\n\nmodule.exports = {\n  Node: Node,\n  Root: Root,\n  NodeList: NodeList,\n  Value: Value,\n  Literal: Literal,\n  Symbol: Symbol,\n  Group: Group,\n  Array: ArrayNode,\n  Pair: Pair,\n  Dict: Dict,\n  Output: Output,\n  Capture: Capture,\n  TemplateData: TemplateData,\n  If: If,\n  IfAsync: IfAsync,\n  InlineIf: InlineIf,\n  For: For,\n  AsyncEach: AsyncEach,\n  AsyncAll: AsyncAll,\n  Macro: Macro,\n  Caller: Caller,\n  Import: Import,\n  FromImport: FromImport,\n  FunCall: FunCall,\n  Filter: Filter,\n  FilterAsync: FilterAsync,\n  KeywordArgs: KeywordArgs,\n  Block: Block,\n  Super: Super,\n  Extends: Extends,\n  Include: Include,\n  Set: Set,\n  Switch: Switch,\n  Case: Case,\n  LookupVal: LookupVal,\n  BinOp: BinOp,\n  In: In,\n  Is: Is,\n  Or: Or,\n  And: And,\n  Not: Not,\n  Add: Add,\n  Concat: Concat,\n  Sub: Sub,\n  Mul: Mul,\n  Div: Div,\n  FloorDiv: FloorDiv,\n  Mod: Mod,\n  Pow: Pow,\n  Neg: Neg,\n  Pos: Pos,\n  Compare: Compare,\n  CompareOperand: CompareOperand,\n  CallExtension: CallExtension,\n  CallExtensionAsync: CallExtensionAsync,\n  printNodes: printNodes\n};","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar lexer = require('./lexer');\n\nvar nodes = require('./nodes');\n\nvar Obj = require('./object').Obj;\n\nvar lib = require('./lib');\n\nvar Parser = /*#__PURE__*/function (_Obj) {\n  _inheritsLoose(Parser, _Obj);\n\n  function Parser() {\n    return _Obj.apply(this, arguments) || this;\n  }\n\n  var _proto = Parser.prototype;\n\n  _proto.init = function init(tokens) {\n    this.tokens = tokens;\n    this.peeked = null;\n    this.breakOnBlocks = null;\n    this.dropLeadingWhitespace = false;\n    this.extensions = [];\n  };\n\n  _proto.nextToken = function nextToken(withWhitespace) {\n    var tok;\n\n    if (this.peeked) {\n      if (!withWhitespace && this.peeked.type === lexer.TOKEN_WHITESPACE) {\n        this.peeked = null;\n      } else {\n        tok = this.peeked;\n        this.peeked = null;\n        return tok;\n      }\n    }\n\n    tok = this.tokens.nextToken();\n\n    if (!withWhitespace) {\n      while (tok && tok.type === lexer.TOKEN_WHITESPACE) {\n        tok = this.tokens.nextToken();\n      }\n    }\n\n    return tok;\n  };\n\n  _proto.peekToken = function peekToken() {\n    this.peeked = this.peeked || this.nextToken();\n    return this.peeked;\n  };\n\n  _proto.pushToken = function pushToken(tok) {\n    if (this.peeked) {\n      throw new Error('pushToken: can only push one token on between reads');\n    }\n\n    this.peeked = tok;\n  };\n\n  _proto.error = function error(msg, lineno, colno) {\n    if (lineno === undefined || colno === undefined) {\n      var tok = this.peekToken() || {};\n      lineno = tok.lineno;\n      colno = tok.colno;\n    }\n\n    if (lineno !== undefined) {\n      lineno += 1;\n    }\n\n    if (colno !== undefined) {\n      colno += 1;\n    }\n\n    return new lib.TemplateError(msg, lineno, colno);\n  };\n\n  _proto.fail = function fail(msg, lineno, colno) {\n    throw this.error(msg, lineno, colno);\n  };\n\n  _proto.skip = function skip(type) {\n    var tok = this.nextToken();\n\n    if (!tok || tok.type !== type) {\n      this.pushToken(tok);\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.expect = function expect(type) {\n    var tok = this.nextToken();\n\n    if (tok.type !== type) {\n      this.fail('expected ' + type + ', got ' + tok.type, tok.lineno, tok.colno);\n    }\n\n    return tok;\n  };\n\n  _proto.skipValue = function skipValue(type, val) {\n    var tok = this.nextToken();\n\n    if (!tok || tok.type !== type || tok.value !== val) {\n      this.pushToken(tok);\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.skipSymbol = function skipSymbol(val) {\n    return this.skipValue(lexer.TOKEN_SYMBOL, val);\n  };\n\n  _proto.advanceAfterBlockEnd = function advanceAfterBlockEnd(name) {\n    var tok;\n\n    if (!name) {\n      tok = this.peekToken();\n\n      if (!tok) {\n        this.fail('unexpected end of file');\n      }\n\n      if (tok.type !== lexer.TOKEN_SYMBOL) {\n        this.fail('advanceAfterBlockEnd: expected symbol token or ' + 'explicit name to be passed');\n      }\n\n      name = this.nextToken().value;\n    }\n\n    tok = this.nextToken();\n\n    if (tok && tok.type === lexer.TOKEN_BLOCK_END) {\n      if (tok.value.charAt(0) === '-') {\n        this.dropLeadingWhitespace = true;\n      }\n    } else {\n      this.fail('expected block end in ' + name + ' statement');\n    }\n\n    return tok;\n  };\n\n  _proto.advanceAfterVariableEnd = function advanceAfterVariableEnd() {\n    var tok = this.nextToken();\n\n    if (tok && tok.type === lexer.TOKEN_VARIABLE_END) {\n      this.dropLeadingWhitespace = tok.value.charAt(tok.value.length - this.tokens.tags.VARIABLE_END.length - 1) === '-';\n    } else {\n      this.pushToken(tok);\n      this.fail('expected variable end');\n    }\n  };\n\n  _proto.parseFor = function parseFor() {\n    var forTok = this.peekToken();\n    var node;\n    var endBlock;\n\n    if (this.skipSymbol('for')) {\n      node = new nodes.For(forTok.lineno, forTok.colno);\n      endBlock = 'endfor';\n    } else if (this.skipSymbol('asyncEach')) {\n      node = new nodes.AsyncEach(forTok.lineno, forTok.colno);\n      endBlock = 'endeach';\n    } else if (this.skipSymbol('asyncAll')) {\n      node = new nodes.AsyncAll(forTok.lineno, forTok.colno);\n      endBlock = 'endall';\n    } else {\n      this.fail('parseFor: expected for{Async}', forTok.lineno, forTok.colno);\n    }\n\n    node.name = this.parsePrimary();\n\n    if (!(node.name instanceof nodes.Symbol)) {\n      this.fail('parseFor: variable name expected for loop');\n    }\n\n    var type = this.peekToken().type;\n\n    if (type === lexer.TOKEN_COMMA) {\n      // key/value iteration\n      var key = node.name;\n      node.name = new nodes.Array(key.lineno, key.colno);\n      node.name.addChild(key);\n\n      while (this.skip(lexer.TOKEN_COMMA)) {\n        var prim = this.parsePrimary();\n        node.name.addChild(prim);\n      }\n    }\n\n    if (!this.skipSymbol('in')) {\n      this.fail('parseFor: expected \"in\" keyword for loop', forTok.lineno, forTok.colno);\n    }\n\n    node.arr = this.parseExpression();\n    this.advanceAfterBlockEnd(forTok.value);\n    node.body = this.parseUntilBlocks(endBlock, 'else');\n\n    if (this.skipSymbol('else')) {\n      this.advanceAfterBlockEnd('else');\n      node.else_ = this.parseUntilBlocks(endBlock);\n    }\n\n    this.advanceAfterBlockEnd();\n    return node;\n  };\n\n  _proto.parseMacro = function parseMacro() {\n    var macroTok = this.peekToken();\n\n    if (!this.skipSymbol('macro')) {\n      this.fail('expected macro');\n    }\n\n    var name = this.parsePrimary(true);\n    var args = this.parseSignature();\n    var node = new nodes.Macro(macroTok.lineno, macroTok.colno, name, args);\n    this.advanceAfterBlockEnd(macroTok.value);\n    node.body = this.parseUntilBlocks('endmacro');\n    this.advanceAfterBlockEnd();\n    return node;\n  };\n\n  _proto.parseCall = function parseCall() {\n    // a call block is parsed as a normal FunCall, but with an added\n    // 'caller' kwarg which is a Caller node.\n    var callTok = this.peekToken();\n\n    if (!this.skipSymbol('call')) {\n      this.fail('expected call');\n    }\n\n    var callerArgs = this.parseSignature(true) || new nodes.NodeList();\n    var macroCall = this.parsePrimary();\n    this.advanceAfterBlockEnd(callTok.value);\n    var body = this.parseUntilBlocks('endcall');\n    this.advanceAfterBlockEnd();\n    var callerName = new nodes.Symbol(callTok.lineno, callTok.colno, 'caller');\n    var callerNode = new nodes.Caller(callTok.lineno, callTok.colno, callerName, callerArgs, body); // add the additional caller kwarg, adding kwargs if necessary\n\n    var args = macroCall.args.children;\n\n    if (!(args[args.length - 1] instanceof nodes.KeywordArgs)) {\n      args.push(new nodes.KeywordArgs());\n    }\n\n    var kwargs = args[args.length - 1];\n    kwargs.addChild(new nodes.Pair(callTok.lineno, callTok.colno, callerName, callerNode));\n    return new nodes.Output(callTok.lineno, callTok.colno, [macroCall]);\n  };\n\n  _proto.parseWithContext = function parseWithContext() {\n    var tok = this.peekToken();\n    var withContext = null;\n\n    if (this.skipSymbol('with')) {\n      withContext = true;\n    } else if (this.skipSymbol('without')) {\n      withContext = false;\n    }\n\n    if (withContext !== null) {\n      if (!this.skipSymbol('context')) {\n        this.fail('parseFrom: expected context after with/without', tok.lineno, tok.colno);\n      }\n    }\n\n    return withContext;\n  };\n\n  _proto.parseImport = function parseImport() {\n    var importTok = this.peekToken();\n\n    if (!this.skipSymbol('import')) {\n      this.fail('parseImport: expected import', importTok.lineno, importTok.colno);\n    }\n\n    var template = this.parseExpression();\n\n    if (!this.skipSymbol('as')) {\n      this.fail('parseImport: expected \"as\" keyword', importTok.lineno, importTok.colno);\n    }\n\n    var target = this.parseExpression();\n    var withContext = this.parseWithContext();\n    var node = new nodes.Import(importTok.lineno, importTok.colno, template, target, withContext);\n    this.advanceAfterBlockEnd(importTok.value);\n    return node;\n  };\n\n  _proto.parseFrom = function parseFrom() {\n    var fromTok = this.peekToken();\n\n    if (!this.skipSymbol('from')) {\n      this.fail('parseFrom: expected from');\n    }\n\n    var template = this.parseExpression();\n\n    if (!this.skipSymbol('import')) {\n      this.fail('parseFrom: expected import', fromTok.lineno, fromTok.colno);\n    }\n\n    var names = new nodes.NodeList();\n    var withContext;\n\n    while (1) {\n      // eslint-disable-line no-constant-condition\n      var nextTok = this.peekToken();\n\n      if (nextTok.type === lexer.TOKEN_BLOCK_END) {\n        if (!names.children.length) {\n          this.fail('parseFrom: Expected at least one import name', fromTok.lineno, fromTok.colno);\n        } // Since we are manually advancing past the block end,\n        // need to keep track of whitespace control (normally\n        // this is done in `advanceAfterBlockEnd`\n\n\n        if (nextTok.value.charAt(0) === '-') {\n          this.dropLeadingWhitespace = true;\n        }\n\n        this.nextToken();\n        break;\n      }\n\n      if (names.children.length > 0 && !this.skip(lexer.TOKEN_COMMA)) {\n        this.fail('parseFrom: expected comma', fromTok.lineno, fromTok.colno);\n      }\n\n      var name = this.parsePrimary();\n\n      if (name.value.charAt(0) === '_') {\n        this.fail('parseFrom: names starting with an underscore cannot be imported', name.lineno, name.colno);\n      }\n\n      if (this.skipSymbol('as')) {\n        var alias = this.parsePrimary();\n        names.addChild(new nodes.Pair(name.lineno, name.colno, name, alias));\n      } else {\n        names.addChild(name);\n      }\n\n      withContext = this.parseWithContext();\n    }\n\n    return new nodes.FromImport(fromTok.lineno, fromTok.colno, template, names, withContext);\n  };\n\n  _proto.parseBlock = function parseBlock() {\n    var tag = this.peekToken();\n\n    if (!this.skipSymbol('block')) {\n      this.fail('parseBlock: expected block', tag.lineno, tag.colno);\n    }\n\n    var node = new nodes.Block(tag.lineno, tag.colno);\n    node.name = this.parsePrimary();\n\n    if (!(node.name instanceof nodes.Symbol)) {\n      this.fail('parseBlock: variable name expected', tag.lineno, tag.colno);\n    }\n\n    this.advanceAfterBlockEnd(tag.value);\n    node.body = this.parseUntilBlocks('endblock');\n    this.skipSymbol('endblock');\n    this.skipSymbol(node.name.value);\n    var tok = this.peekToken();\n\n    if (!tok) {\n      this.fail('parseBlock: expected endblock, got end of file');\n    }\n\n    this.advanceAfterBlockEnd(tok.value);\n    return node;\n  };\n\n  _proto.parseExtends = function parseExtends() {\n    var tagName = 'extends';\n    var tag = this.peekToken();\n\n    if (!this.skipSymbol(tagName)) {\n      this.fail('parseTemplateRef: expected ' + tagName);\n    }\n\n    var node = new nodes.Extends(tag.lineno, tag.colno);\n    node.template = this.parseExpression();\n    this.advanceAfterBlockEnd(tag.value);\n    return node;\n  };\n\n  _proto.parseInclude = function parseInclude() {\n    var tagName = 'include';\n    var tag = this.peekToken();\n\n    if (!this.skipSymbol(tagName)) {\n      this.fail('parseInclude: expected ' + tagName);\n    }\n\n    var node = new nodes.Include(tag.lineno, tag.colno);\n    node.template = this.parseExpression();\n\n    if (this.skipSymbol('ignore') && this.skipSymbol('missing')) {\n      node.ignoreMissing = true;\n    }\n\n    this.advanceAfterBlockEnd(tag.value);\n    return node;\n  };\n\n  _proto.parseIf = function parseIf() {\n    var tag = this.peekToken();\n    var node;\n\n    if (this.skipSymbol('if') || this.skipSymbol('elif') || this.skipSymbol('elseif')) {\n      node = new nodes.If(tag.lineno, tag.colno);\n    } else if (this.skipSymbol('ifAsync')) {\n      node = new nodes.IfAsync(tag.lineno, tag.colno);\n    } else {\n      this.fail('parseIf: expected if, elif, or elseif', tag.lineno, tag.colno);\n    }\n\n    node.cond = this.parseExpression();\n    this.advanceAfterBlockEnd(tag.value);\n    node.body = this.parseUntilBlocks('elif', 'elseif', 'else', 'endif');\n    var tok = this.peekToken();\n\n    switch (tok && tok.value) {\n      case 'elseif':\n      case 'elif':\n        node.else_ = this.parseIf();\n        break;\n\n      case 'else':\n        this.advanceAfterBlockEnd();\n        node.else_ = this.parseUntilBlocks('endif');\n        this.advanceAfterBlockEnd();\n        break;\n\n      case 'endif':\n        node.else_ = null;\n        this.advanceAfterBlockEnd();\n        break;\n\n      default:\n        this.fail('parseIf: expected elif, else, or endif, got end of file');\n    }\n\n    return node;\n  };\n\n  _proto.parseSet = function parseSet() {\n    var tag = this.peekToken();\n\n    if (!this.skipSymbol('set')) {\n      this.fail('parseSet: expected set', tag.lineno, tag.colno);\n    }\n\n    var node = new nodes.Set(tag.lineno, tag.colno, []);\n    var target;\n\n    while (target = this.parsePrimary()) {\n      node.targets.push(target);\n\n      if (!this.skip(lexer.TOKEN_COMMA)) {\n        break;\n      }\n    }\n\n    if (!this.skipValue(lexer.TOKEN_OPERATOR, '=')) {\n      if (!this.skip(lexer.TOKEN_BLOCK_END)) {\n        this.fail('parseSet: expected = or block end in set tag', tag.lineno, tag.colno);\n      } else {\n        node.body = new nodes.Capture(tag.lineno, tag.colno, this.parseUntilBlocks('endset'));\n        node.value = null;\n        this.advanceAfterBlockEnd();\n      }\n    } else {\n      node.value = this.parseExpression();\n      this.advanceAfterBlockEnd(tag.value);\n    }\n\n    return node;\n  };\n\n  _proto.parseSwitch = function parseSwitch() {\n    /*\n     * Store the tag names in variables in case someone ever wants to\n     * customize this.\n     */\n    var switchStart = 'switch';\n    var switchEnd = 'endswitch';\n    var caseStart = 'case';\n    var caseDefault = 'default'; // Get the switch tag.\n\n    var tag = this.peekToken(); // fail early if we get some unexpected tag.\n\n    if (!this.skipSymbol(switchStart) && !this.skipSymbol(caseStart) && !this.skipSymbol(caseDefault)) {\n      this.fail('parseSwitch: expected \"switch,\" \"case\" or \"default\"', tag.lineno, tag.colno);\n    } // parse the switch expression\n\n\n    var expr = this.parseExpression(); // advance until a start of a case, a default case or an endswitch.\n\n    this.advanceAfterBlockEnd(switchStart);\n    this.parseUntilBlocks(caseStart, caseDefault, switchEnd); // this is the first case. it could also be an endswitch, we'll check.\n\n    var tok = this.peekToken(); // create new variables for our cases and default case.\n\n    var cases = [];\n    var defaultCase; // while we're dealing with new cases nodes...\n\n    do {\n      // skip the start symbol and get the case expression\n      this.skipSymbol(caseStart);\n      var cond = this.parseExpression();\n      this.advanceAfterBlockEnd(switchStart); // get the body of the case node and add it to the array of cases.\n\n      var body = this.parseUntilBlocks(caseStart, caseDefault, switchEnd);\n      cases.push(new nodes.Case(tok.line, tok.col, cond, body)); // get our next case\n\n      tok = this.peekToken();\n    } while (tok && tok.value === caseStart); // we either have a default case or a switch end.\n\n\n    switch (tok.value) {\n      case caseDefault:\n        this.advanceAfterBlockEnd();\n        defaultCase = this.parseUntilBlocks(switchEnd);\n        this.advanceAfterBlockEnd();\n        break;\n\n      case switchEnd:\n        this.advanceAfterBlockEnd();\n        break;\n\n      default:\n        // otherwise bail because EOF\n        this.fail('parseSwitch: expected \"case,\" \"default\" or \"endswitch,\" got EOF.');\n    } // and return the switch node.\n\n\n    return new nodes.Switch(tag.lineno, tag.colno, expr, cases, defaultCase);\n  };\n\n  _proto.parseStatement = function parseStatement() {\n    var tok = this.peekToken();\n    var node;\n\n    if (tok.type !== lexer.TOKEN_SYMBOL) {\n      this.fail('tag name expected', tok.lineno, tok.colno);\n    }\n\n    if (this.breakOnBlocks && lib.indexOf(this.breakOnBlocks, tok.value) !== -1) {\n      return null;\n    }\n\n    switch (tok.value) {\n      case 'raw':\n        return this.parseRaw();\n\n      case 'verbatim':\n        return this.parseRaw('verbatim');\n\n      case 'if':\n      case 'ifAsync':\n        return this.parseIf();\n\n      case 'for':\n      case 'asyncEach':\n      case 'asyncAll':\n        return this.parseFor();\n\n      case 'block':\n        return this.parseBlock();\n\n      case 'extends':\n        return this.parseExtends();\n\n      case 'include':\n        return this.parseInclude();\n\n      case 'set':\n        return this.parseSet();\n\n      case 'macro':\n        return this.parseMacro();\n\n      case 'call':\n        return this.parseCall();\n\n      case 'import':\n        return this.parseImport();\n\n      case 'from':\n        return this.parseFrom();\n\n      case 'filter':\n        return this.parseFilterStatement();\n\n      case 'switch':\n        return this.parseSwitch();\n\n      default:\n        if (this.extensions.length) {\n          for (var i = 0; i < this.extensions.length; i++) {\n            var ext = this.extensions[i];\n\n            if (lib.indexOf(ext.tags || [], tok.value) !== -1) {\n              return ext.parse(this, nodes, lexer);\n            }\n          }\n        }\n\n        this.fail('unknown block tag: ' + tok.value, tok.lineno, tok.colno);\n    }\n\n    return node;\n  };\n\n  _proto.parseRaw = function parseRaw(tagName) {\n    tagName = tagName || 'raw';\n    var endTagName = 'end' + tagName; // Look for upcoming raw blocks (ignore all other kinds of blocks)\n\n    var rawBlockRegex = new RegExp('([\\\\s\\\\S]*?){%\\\\s*(' + tagName + '|' + endTagName + ')\\\\s*(?=%})%}');\n    var rawLevel = 1;\n    var str = '';\n    var matches = null; // Skip opening raw token\n    // Keep this token to track line and column numbers\n\n    var begun = this.advanceAfterBlockEnd(); // Exit when there's nothing to match\n    // or when we've found the matching \"endraw\" block\n\n    while ((matches = this.tokens._extractRegex(rawBlockRegex)) && rawLevel > 0) {\n      var all = matches[0];\n      var pre = matches[1];\n      var blockName = matches[2]; // Adjust rawlevel\n\n      if (blockName === tagName) {\n        rawLevel += 1;\n      } else if (blockName === endTagName) {\n        rawLevel -= 1;\n      } // Add to str\n\n\n      if (rawLevel === 0) {\n        // We want to exclude the last \"endraw\"\n        str += pre; // Move tokenizer to beginning of endraw block\n\n        this.tokens.backN(all.length - pre.length);\n      } else {\n        str += all;\n      }\n    }\n\n    return new nodes.Output(begun.lineno, begun.colno, [new nodes.TemplateData(begun.lineno, begun.colno, str)]);\n  };\n\n  _proto.parsePostfix = function parsePostfix(node) {\n    var lookup;\n    var tok = this.peekToken();\n\n    while (tok) {\n      if (tok.type === lexer.TOKEN_LEFT_PAREN) {\n        // Function call\n        node = new nodes.FunCall(tok.lineno, tok.colno, node, this.parseSignature());\n      } else if (tok.type === lexer.TOKEN_LEFT_BRACKET) {\n        // Reference\n        lookup = this.parseAggregate();\n\n        if (lookup.children.length > 1) {\n          this.fail('invalid index');\n        }\n\n        node = new nodes.LookupVal(tok.lineno, tok.colno, node, lookup.children[0]);\n      } else if (tok.type === lexer.TOKEN_OPERATOR && tok.value === '.') {\n        // Reference\n        this.nextToken();\n        var val = this.nextToken();\n\n        if (val.type !== lexer.TOKEN_SYMBOL) {\n          this.fail('expected name as lookup value, got ' + val.value, val.lineno, val.colno);\n        } // Make a literal string because it's not a variable\n        // reference\n\n\n        lookup = new nodes.Literal(val.lineno, val.colno, val.value);\n        node = new nodes.LookupVal(tok.lineno, tok.colno, node, lookup);\n      } else {\n        break;\n      }\n\n      tok = this.peekToken();\n    }\n\n    return node;\n  };\n\n  _proto.parseExpression = function parseExpression() {\n    var node = this.parseInlineIf();\n    return node;\n  };\n\n  _proto.parseInlineIf = function parseInlineIf() {\n    var node = this.parseOr();\n\n    if (this.skipSymbol('if')) {\n      var condNode = this.parseOr();\n      var bodyNode = node;\n      node = new nodes.InlineIf(node.lineno, node.colno);\n      node.body = bodyNode;\n      node.cond = condNode;\n\n      if (this.skipSymbol('else')) {\n        node.else_ = this.parseOr();\n      } else {\n        node.else_ = null;\n      }\n    }\n\n    return node;\n  };\n\n  _proto.parseOr = function parseOr() {\n    var node = this.parseAnd();\n\n    while (this.skipSymbol('or')) {\n      var node2 = this.parseAnd();\n      node = new nodes.Or(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseAnd = function parseAnd() {\n    var node = this.parseNot();\n\n    while (this.skipSymbol('and')) {\n      var node2 = this.parseNot();\n      node = new nodes.And(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseNot = function parseNot() {\n    var tok = this.peekToken();\n\n    if (this.skipSymbol('not')) {\n      return new nodes.Not(tok.lineno, tok.colno, this.parseNot());\n    }\n\n    return this.parseIn();\n  };\n\n  _proto.parseIn = function parseIn() {\n    var node = this.parseIs();\n\n    while (1) {\n      // eslint-disable-line no-constant-condition\n      // check if the next token is 'not'\n      var tok = this.nextToken();\n\n      if (!tok) {\n        break;\n      }\n\n      var invert = tok.type === lexer.TOKEN_SYMBOL && tok.value === 'not'; // if it wasn't 'not', put it back\n\n      if (!invert) {\n        this.pushToken(tok);\n      }\n\n      if (this.skipSymbol('in')) {\n        var node2 = this.parseIs();\n        node = new nodes.In(node.lineno, node.colno, node, node2);\n\n        if (invert) {\n          node = new nodes.Not(node.lineno, node.colno, node);\n        }\n      } else {\n        // if we'd found a 'not' but this wasn't an 'in', put back the 'not'\n        if (invert) {\n          this.pushToken(tok);\n        }\n\n        break;\n      }\n    }\n\n    return node;\n  } // I put this right after \"in\" in the operator precedence stack. That can\n  // obviously be changed to be closer to Jinja.\n  ;\n\n  _proto.parseIs = function parseIs() {\n    var node = this.parseCompare(); // look for an is\n\n    if (this.skipSymbol('is')) {\n      // look for a not\n      var not = this.skipSymbol('not'); // get the next node\n\n      var node2 = this.parseCompare(); // create an Is node using the next node and the info from our Is node.\n\n      node = new nodes.Is(node.lineno, node.colno, node, node2); // if we have a Not, create a Not node from our Is node.\n\n      if (not) {\n        node = new nodes.Not(node.lineno, node.colno, node);\n      }\n    } // return the node.\n\n\n    return node;\n  };\n\n  _proto.parseCompare = function parseCompare() {\n    var compareOps = ['==', '===', '!=', '!==', '<', '>', '<=', '>='];\n    var expr = this.parseConcat();\n    var ops = [];\n\n    while (1) {\n      // eslint-disable-line no-constant-condition\n      var tok = this.nextToken();\n\n      if (!tok) {\n        break;\n      } else if (compareOps.indexOf(tok.value) !== -1) {\n        ops.push(new nodes.CompareOperand(tok.lineno, tok.colno, this.parseConcat(), tok.value));\n      } else {\n        this.pushToken(tok);\n        break;\n      }\n    }\n\n    if (ops.length) {\n      return new nodes.Compare(ops[0].lineno, ops[0].colno, expr, ops);\n    } else {\n      return expr;\n    }\n  } // finds the '~' for string concatenation\n  ;\n\n  _proto.parseConcat = function parseConcat() {\n    var node = this.parseAdd();\n\n    while (this.skipValue(lexer.TOKEN_TILDE, '~')) {\n      var node2 = this.parseAdd();\n      node = new nodes.Concat(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseAdd = function parseAdd() {\n    var node = this.parseSub();\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '+')) {\n      var node2 = this.parseSub();\n      node = new nodes.Add(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseSub = function parseSub() {\n    var node = this.parseMul();\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '-')) {\n      var node2 = this.parseMul();\n      node = new nodes.Sub(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseMul = function parseMul() {\n    var node = this.parseDiv();\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '*')) {\n      var node2 = this.parseDiv();\n      node = new nodes.Mul(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseDiv = function parseDiv() {\n    var node = this.parseFloorDiv();\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '/')) {\n      var node2 = this.parseFloorDiv();\n      node = new nodes.Div(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseFloorDiv = function parseFloorDiv() {\n    var node = this.parseMod();\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '//')) {\n      var node2 = this.parseMod();\n      node = new nodes.FloorDiv(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseMod = function parseMod() {\n    var node = this.parsePow();\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '%')) {\n      var node2 = this.parsePow();\n      node = new nodes.Mod(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parsePow = function parsePow() {\n    var node = this.parseUnary();\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '**')) {\n      var node2 = this.parseUnary();\n      node = new nodes.Pow(node.lineno, node.colno, node, node2);\n    }\n\n    return node;\n  };\n\n  _proto.parseUnary = function parseUnary(noFilters) {\n    var tok = this.peekToken();\n    var node;\n\n    if (this.skipValue(lexer.TOKEN_OPERATOR, '-')) {\n      node = new nodes.Neg(tok.lineno, tok.colno, this.parseUnary(true));\n    } else if (this.skipValue(lexer.TOKEN_OPERATOR, '+')) {\n      node = new nodes.Pos(tok.lineno, tok.colno, this.parseUnary(true));\n    } else {\n      node = this.parsePrimary();\n    }\n\n    if (!noFilters) {\n      node = this.parseFilter(node);\n    }\n\n    return node;\n  };\n\n  _proto.parsePrimary = function parsePrimary(noPostfix) {\n    var tok = this.nextToken();\n    var val;\n    var node = null;\n\n    if (!tok) {\n      this.fail('expected expression, got end of file');\n    } else if (tok.type === lexer.TOKEN_STRING) {\n      val = tok.value;\n    } else if (tok.type === lexer.TOKEN_INT) {\n      val = parseInt(tok.value, 10);\n    } else if (tok.type === lexer.TOKEN_FLOAT) {\n      val = parseFloat(tok.value);\n    } else if (tok.type === lexer.TOKEN_BOOLEAN) {\n      if (tok.value === 'true') {\n        val = true;\n      } else if (tok.value === 'false') {\n        val = false;\n      } else {\n        this.fail('invalid boolean: ' + tok.value, tok.lineno, tok.colno);\n      }\n    } else if (tok.type === lexer.TOKEN_NONE) {\n      val = null;\n    } else if (tok.type === lexer.TOKEN_REGEX) {\n      val = new RegExp(tok.value.body, tok.value.flags);\n    }\n\n    if (val !== undefined) {\n      node = new nodes.Literal(tok.lineno, tok.colno, val);\n    } else if (tok.type === lexer.TOKEN_SYMBOL) {\n      node = new nodes.Symbol(tok.lineno, tok.colno, tok.value);\n    } else {\n      // See if it's an aggregate type, we need to push the\n      // current delimiter token back on\n      this.pushToken(tok);\n      node = this.parseAggregate();\n    }\n\n    if (!noPostfix) {\n      node = this.parsePostfix(node);\n    }\n\n    if (node) {\n      return node;\n    } else {\n      throw this.error(\"unexpected token: \" + tok.value, tok.lineno, tok.colno);\n    }\n  };\n\n  _proto.parseFilterName = function parseFilterName() {\n    var tok = this.expect(lexer.TOKEN_SYMBOL);\n    var name = tok.value;\n\n    while (this.skipValue(lexer.TOKEN_OPERATOR, '.')) {\n      name += '.' + this.expect(lexer.TOKEN_SYMBOL).value;\n    }\n\n    return new nodes.Symbol(tok.lineno, tok.colno, name);\n  };\n\n  _proto.parseFilterArgs = function parseFilterArgs(node) {\n    if (this.peekToken().type === lexer.TOKEN_LEFT_PAREN) {\n      // Get a FunCall node and add the parameters to the\n      // filter\n      var call = this.parsePostfix(node);\n      return call.args.children;\n    }\n\n    return [];\n  };\n\n  _proto.parseFilter = function parseFilter(node) {\n    while (this.skip(lexer.TOKEN_PIPE)) {\n      var name = this.parseFilterName();\n      node = new nodes.Filter(name.lineno, name.colno, name, new nodes.NodeList(name.lineno, name.colno, [node].concat(this.parseFilterArgs(node))));\n    }\n\n    return node;\n  };\n\n  _proto.parseFilterStatement = function parseFilterStatement() {\n    var filterTok = this.peekToken();\n\n    if (!this.skipSymbol('filter')) {\n      this.fail('parseFilterStatement: expected filter');\n    }\n\n    var name = this.parseFilterName();\n    var args = this.parseFilterArgs(name);\n    this.advanceAfterBlockEnd(filterTok.value);\n    var body = new nodes.Capture(name.lineno, name.colno, this.parseUntilBlocks('endfilter'));\n    this.advanceAfterBlockEnd();\n    var node = new nodes.Filter(name.lineno, name.colno, name, new nodes.NodeList(name.lineno, name.colno, [body].concat(args)));\n    return new nodes.Output(name.lineno, name.colno, [node]);\n  };\n\n  _proto.parseAggregate = function parseAggregate() {\n    var tok = this.nextToken();\n    var node;\n\n    switch (tok.type) {\n      case lexer.TOKEN_LEFT_PAREN:\n        node = new nodes.Group(tok.lineno, tok.colno);\n        break;\n\n      case lexer.TOKEN_LEFT_BRACKET:\n        node = new nodes.Array(tok.lineno, tok.colno);\n        break;\n\n      case lexer.TOKEN_LEFT_CURLY:\n        node = new nodes.Dict(tok.lineno, tok.colno);\n        break;\n\n      default:\n        return null;\n    }\n\n    while (1) {\n      // eslint-disable-line no-constant-condition\n      var type = this.peekToken().type;\n\n      if (type === lexer.TOKEN_RIGHT_PAREN || type === lexer.TOKEN_RIGHT_BRACKET || type === lexer.TOKEN_RIGHT_CURLY) {\n        this.nextToken();\n        break;\n      }\n\n      if (node.children.length > 0) {\n        if (!this.skip(lexer.TOKEN_COMMA)) {\n          this.fail('parseAggregate: expected comma after expression', tok.lineno, tok.colno);\n        }\n      }\n\n      if (node instanceof nodes.Dict) {\n        // TODO: check for errors\n        var key = this.parsePrimary(); // We expect a key/value pair for dicts, separated by a\n        // colon\n\n        if (!this.skip(lexer.TOKEN_COLON)) {\n          this.fail('parseAggregate: expected colon after dict key', tok.lineno, tok.colno);\n        } // TODO: check for errors\n\n\n        var value = this.parseExpression();\n        node.addChild(new nodes.Pair(key.lineno, key.colno, key, value));\n      } else {\n        // TODO: check for errors\n        var expr = this.parseExpression();\n        node.addChild(expr);\n      }\n    }\n\n    return node;\n  };\n\n  _proto.parseSignature = function parseSignature(tolerant, noParens) {\n    var tok = this.peekToken();\n\n    if (!noParens && tok.type !== lexer.TOKEN_LEFT_PAREN) {\n      if (tolerant) {\n        return null;\n      } else {\n        this.fail('expected arguments', tok.lineno, tok.colno);\n      }\n    }\n\n    if (tok.type === lexer.TOKEN_LEFT_PAREN) {\n      tok = this.nextToken();\n    }\n\n    var args = new nodes.NodeList(tok.lineno, tok.colno);\n    var kwargs = new nodes.KeywordArgs(tok.lineno, tok.colno);\n    var checkComma = false;\n\n    while (1) {\n      // eslint-disable-line no-constant-condition\n      tok = this.peekToken();\n\n      if (!noParens && tok.type === lexer.TOKEN_RIGHT_PAREN) {\n        this.nextToken();\n        break;\n      } else if (noParens && tok.type === lexer.TOKEN_BLOCK_END) {\n        break;\n      }\n\n      if (checkComma && !this.skip(lexer.TOKEN_COMMA)) {\n        this.fail('parseSignature: expected comma after expression', tok.lineno, tok.colno);\n      } else {\n        var arg = this.parseExpression();\n\n        if (this.skipValue(lexer.TOKEN_OPERATOR, '=')) {\n          kwargs.addChild(new nodes.Pair(arg.lineno, arg.colno, arg, this.parseExpression()));\n        } else {\n          args.addChild(arg);\n        }\n      }\n\n      checkComma = true;\n    }\n\n    if (kwargs.children.length) {\n      args.addChild(kwargs);\n    }\n\n    return args;\n  };\n\n  _proto.parseUntilBlocks = function parseUntilBlocks() {\n    var prev = this.breakOnBlocks;\n\n    for (var _len = arguments.length, blockNames = new Array(_len), _key = 0; _key < _len; _key++) {\n      blockNames[_key] = arguments[_key];\n    }\n\n    this.breakOnBlocks = blockNames;\n    var ret = this.parse();\n    this.breakOnBlocks = prev;\n    return ret;\n  };\n\n  _proto.parseNodes = function parseNodes() {\n    var tok;\n    var buf = [];\n\n    while (tok = this.nextToken()) {\n      if (tok.type === lexer.TOKEN_DATA) {\n        var data = tok.value;\n        var nextToken = this.peekToken();\n        var nextVal = nextToken && nextToken.value; // If the last token has \"-\" we need to trim the\n        // leading whitespace of the data. This is marked with\n        // the `dropLeadingWhitespace` variable.\n\n        if (this.dropLeadingWhitespace) {\n          // TODO: this could be optimized (don't use regex)\n          data = data.replace(/^\\s*/, '');\n          this.dropLeadingWhitespace = false;\n        } // Same for the succeeding block start token\n\n\n        if (nextToken && (nextToken.type === lexer.TOKEN_BLOCK_START && nextVal.charAt(nextVal.length - 1) === '-' || nextToken.type === lexer.TOKEN_VARIABLE_START && nextVal.charAt(this.tokens.tags.VARIABLE_START.length) === '-' || nextToken.type === lexer.TOKEN_COMMENT && nextVal.charAt(this.tokens.tags.COMMENT_START.length) === '-')) {\n          // TODO: this could be optimized (don't use regex)\n          data = data.replace(/\\s*$/, '');\n        }\n\n        buf.push(new nodes.Output(tok.lineno, tok.colno, [new nodes.TemplateData(tok.lineno, tok.colno, data)]));\n      } else if (tok.type === lexer.TOKEN_BLOCK_START) {\n        this.dropLeadingWhitespace = false;\n        var n = this.parseStatement();\n\n        if (!n) {\n          break;\n        }\n\n        buf.push(n);\n      } else if (tok.type === lexer.TOKEN_VARIABLE_START) {\n        var e = this.parseExpression();\n        this.dropLeadingWhitespace = false;\n        this.advanceAfterVariableEnd();\n        buf.push(new nodes.Output(tok.lineno, tok.colno, [e]));\n      } else if (tok.type === lexer.TOKEN_COMMENT) {\n        this.dropLeadingWhitespace = tok.value.charAt(tok.value.length - this.tokens.tags.COMMENT_END.length - 1) === '-';\n      } else {\n        // Ignore comments, otherwise this should be an error\n        this.fail('Unexpected token at top-level: ' + tok.type, tok.lineno, tok.colno);\n      }\n    }\n\n    return buf;\n  };\n\n  _proto.parse = function parse() {\n    return new nodes.NodeList(0, 0, this.parseNodes());\n  };\n\n  _proto.parseAsRoot = function parseAsRoot() {\n    return new nodes.Root(0, 0, this.parseNodes());\n  };\n\n  return Parser;\n}(Obj); // var util = require('util');\n// var l = lexer.lex('{%- if x -%}\\n hello {% endif %}');\n// var t;\n// while((t = l.nextToken())) {\n//     console.log(util.inspect(t));\n// }\n// var p = new Parser(lexer.lex('hello {% filter title %}' +\n//                              'Hello madam how are you' +\n//                              '{% endfilter %}'));\n// var n = p.parseAsRoot();\n// nodes.printNodes(n);\n\n\nmodule.exports = {\n  parse: function parse(src, extensions, opts) {\n    var p = new Parser(lexer.lex(src, opts));\n\n    if (extensions !== undefined) {\n      p.extensions = extensions;\n    }\n\n    return p.parseAsRoot();\n  },\n  Parser: Parser\n};","'use strict';\n\nvar nodes = require('./nodes');\n\nvar lib = require('./lib');\n\nvar sym = 0;\n\nfunction gensym() {\n  return 'hole_' + sym++;\n} // copy-on-write version of map\n\n\nfunction mapCOW(arr, func) {\n  var res = null;\n\n  for (var i = 0; i < arr.length; i++) {\n    var item = func(arr[i]);\n\n    if (item !== arr[i]) {\n      if (!res) {\n        res = arr.slice();\n      }\n\n      res[i] = item;\n    }\n  }\n\n  return res || arr;\n}\n\nfunction walk(ast, func, depthFirst) {\n  if (!(ast instanceof nodes.Node)) {\n    return ast;\n  }\n\n  if (!depthFirst) {\n    var astT = func(ast);\n\n    if (astT && astT !== ast) {\n      return astT;\n    }\n  }\n\n  if (ast instanceof nodes.NodeList) {\n    var children = mapCOW(ast.children, function (node) {\n      return walk(node, func, depthFirst);\n    });\n\n    if (children !== ast.children) {\n      ast = new nodes[ast.typename](ast.lineno, ast.colno, children);\n    }\n  } else if (ast instanceof nodes.CallExtension) {\n    var args = walk(ast.args, func, depthFirst);\n    var contentArgs = mapCOW(ast.contentArgs, function (node) {\n      return walk(node, func, depthFirst);\n    });\n\n    if (args !== ast.args || contentArgs !== ast.contentArgs) {\n      ast = new nodes[ast.typename](ast.extName, ast.prop, args, contentArgs);\n    }\n  } else {\n    var props = ast.fields.map(function (field) {\n      return ast[field];\n    });\n    var propsT = mapCOW(props, function (prop) {\n      return walk(prop, func, depthFirst);\n    });\n\n    if (propsT !== props) {\n      ast = new nodes[ast.typename](ast.lineno, ast.colno);\n      propsT.forEach(function (prop, i) {\n        ast[ast.fields[i]] = prop;\n      });\n    }\n  }\n\n  return depthFirst ? func(ast) || ast : ast;\n}\n\nfunction depthWalk(ast, func) {\n  return walk(ast, func, true);\n}\n\nfunction _liftFilters(node, asyncFilters, prop) {\n  var children = [];\n  var walked = depthWalk(prop ? node[prop] : node, function (descNode) {\n    var symbol;\n\n    if (descNode instanceof nodes.Block) {\n      return descNode;\n    } else if (descNode instanceof nodes.Filter && lib.indexOf(asyncFilters, descNode.name.value) !== -1 || descNode instanceof nodes.CallExtensionAsync) {\n      symbol = new nodes.Symbol(descNode.lineno, descNode.colno, gensym());\n      children.push(new nodes.FilterAsync(descNode.lineno, descNode.colno, descNode.name, descNode.args, symbol));\n    }\n\n    return symbol;\n  });\n\n  if (prop) {\n    node[prop] = walked;\n  } else {\n    node = walked;\n  }\n\n  if (children.length) {\n    children.push(node);\n    return new nodes.NodeList(node.lineno, node.colno, children);\n  } else {\n    return node;\n  }\n}\n\nfunction liftFilters(ast, asyncFilters) {\n  return depthWalk(ast, function (node) {\n    if (node instanceof nodes.Output) {\n      return _liftFilters(node, asyncFilters);\n    } else if (node instanceof nodes.Set) {\n      return _liftFilters(node, asyncFilters, 'value');\n    } else if (node instanceof nodes.For) {\n      return _liftFilters(node, asyncFilters, 'arr');\n    } else if (node instanceof nodes.If) {\n      return _liftFilters(node, asyncFilters, 'cond');\n    } else if (node instanceof nodes.CallExtension) {\n      return _liftFilters(node, asyncFilters, 'args');\n    } else {\n      return undefined;\n    }\n  });\n}\n\nfunction liftSuper(ast) {\n  return walk(ast, function (blockNode) {\n    if (!(blockNode instanceof nodes.Block)) {\n      return;\n    }\n\n    var hasSuper = false;\n    var symbol = gensym();\n    blockNode.body = walk(blockNode.body, function (node) {\n      // eslint-disable-line consistent-return\n      if (node instanceof nodes.FunCall && node.name.value === 'super') {\n        hasSuper = true;\n        return new nodes.Symbol(node.lineno, node.colno, symbol);\n      }\n    });\n\n    if (hasSuper) {\n      blockNode.body.children.unshift(new nodes.Super(0, 0, blockNode.name, new nodes.Symbol(0, 0, symbol)));\n    }\n  });\n}\n\nfunction convertStatements(ast) {\n  return depthWalk(ast, function (node) {\n    if (!(node instanceof nodes.If) && !(node instanceof nodes.For)) {\n      return undefined;\n    }\n\n    var async = false;\n    walk(node, function (child) {\n      if (child instanceof nodes.FilterAsync || child instanceof nodes.IfAsync || child instanceof nodes.AsyncEach || child instanceof nodes.AsyncAll || child instanceof nodes.CallExtensionAsync) {\n        async = true; // Stop iterating by returning the node\n\n        return child;\n      }\n\n      return undefined;\n    });\n\n    if (async) {\n      if (node instanceof nodes.If) {\n        return new nodes.IfAsync(node.lineno, node.colno, node.cond, node.body, node.else_);\n      } else if (node instanceof nodes.For && !(node instanceof nodes.AsyncAll)) {\n        return new nodes.AsyncEach(node.lineno, node.colno, node.arr, node.name, node.body, node.else_);\n      }\n    }\n\n    return undefined;\n  });\n}\n\nfunction cps(ast, asyncFilters) {\n  return convertStatements(liftSuper(liftFilters(ast, asyncFilters)));\n}\n\nfunction transform(ast, asyncFilters) {\n  return cps(ast, asyncFilters || []);\n} // var parser = require('./parser');\n// var src = 'hello {% foo %}{% endfoo %} end';\n// var ast = transform(parser.parse(src, [new FooExtension()]), ['bar']);\n// nodes.printNodes(ast);\n\n\nmodule.exports = {\n  transform: transform\n};","'use strict';\n\nvar lib = require('./lib');\n\nvar arrayFrom = Array.from;\nvar supportsIterators = typeof Symbol === 'function' && Symbol.iterator && typeof arrayFrom === 'function'; // Frames keep track of scoping both at compile-time and run-time so\n// we know how to access variables. Block tags can introduce special\n// variables, for example.\n\nvar Frame = /*#__PURE__*/function () {\n  function Frame(parent, isolateWrites) {\n    this.variables = Object.create(null);\n    this.parent = parent;\n    this.topLevel = false; // if this is true, writes (set) should never propagate upwards past\n    // this frame to its parent (though reads may).\n\n    this.isolateWrites = isolateWrites;\n  }\n\n  var _proto = Frame.prototype;\n\n  _proto.set = function set(name, val, resolveUp) {\n    // Allow variables with dots by automatically creating the\n    // nested structure\n    var parts = name.split('.');\n    var obj = this.variables;\n    var frame = this;\n\n    if (resolveUp) {\n      if (frame = this.resolve(parts[0], true)) {\n        frame.set(name, val);\n        return;\n      }\n    }\n\n    for (var i = 0; i < parts.length - 1; i++) {\n      var id = parts[i];\n\n      if (!obj[id]) {\n        obj[id] = {};\n      }\n\n      obj = obj[id];\n    }\n\n    obj[parts[parts.length - 1]] = val;\n  };\n\n  _proto.get = function get(name) {\n    var val = this.variables[name];\n\n    if (val !== undefined) {\n      return val;\n    }\n\n    return null;\n  };\n\n  _proto.lookup = function lookup(name) {\n    var p = this.parent;\n    var val = this.variables[name];\n\n    if (val !== undefined) {\n      return val;\n    }\n\n    return p && p.lookup(name);\n  };\n\n  _proto.resolve = function resolve(name, forWrite) {\n    var p = forWrite && this.isolateWrites ? undefined : this.parent;\n    var val = this.variables[name];\n\n    if (val !== undefined) {\n      return this;\n    }\n\n    return p && p.resolve(name);\n  };\n\n  _proto.push = function push(isolateWrites) {\n    return new Frame(this, isolateWrites);\n  };\n\n  _proto.pop = function pop() {\n    return this.parent;\n  };\n\n  return Frame;\n}();\n\nfunction makeMacro(argNames, kwargNames, func) {\n  return function macro() {\n    for (var _len = arguments.length, macroArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      macroArgs[_key] = arguments[_key];\n    }\n\n    var argCount = numArgs(macroArgs);\n    var args;\n    var kwargs = getKeywordArgs(macroArgs);\n\n    if (argCount > argNames.length) {\n      args = macroArgs.slice(0, argNames.length); // Positional arguments that should be passed in as\n      // keyword arguments (essentially default values)\n\n      macroArgs.slice(args.length, argCount).forEach(function (val, i) {\n        if (i < kwargNames.length) {\n          kwargs[kwargNames[i]] = val;\n        }\n      });\n      args.push(kwargs);\n    } else if (argCount < argNames.length) {\n      args = macroArgs.slice(0, argCount);\n\n      for (var i = argCount; i < argNames.length; i++) {\n        var arg = argNames[i]; // Keyword arguments that should be passed as\n        // positional arguments, i.e. the caller explicitly\n        // used the name of a positional arg\n\n        args.push(kwargs[arg]);\n        delete kwargs[arg];\n      }\n\n      args.push(kwargs);\n    } else {\n      args = macroArgs;\n    }\n\n    return func.apply(this, args);\n  };\n}\n\nfunction makeKeywordArgs(obj) {\n  obj.__keywords = true;\n  return obj;\n}\n\nfunction isKeywordArgs(obj) {\n  return obj && Object.prototype.hasOwnProperty.call(obj, '__keywords');\n}\n\nfunction getKeywordArgs(args) {\n  var len = args.length;\n\n  if (len) {\n    var lastArg = args[len - 1];\n\n    if (isKeywordArgs(lastArg)) {\n      return lastArg;\n    }\n  }\n\n  return {};\n}\n\nfunction numArgs(args) {\n  var len = args.length;\n\n  if (len === 0) {\n    return 0;\n  }\n\n  var lastArg = args[len - 1];\n\n  if (isKeywordArgs(lastArg)) {\n    return len - 1;\n  } else {\n    return len;\n  }\n} // A SafeString object indicates that the string should not be\n// autoescaped. This happens magically because autoescaping only\n// occurs on primitive string objects.\n\n\nfunction SafeString(val) {\n  if (typeof val !== 'string') {\n    return val;\n  }\n\n  this.val = val;\n  this.length = val.length;\n}\n\nSafeString.prototype = Object.create(String.prototype, {\n  length: {\n    writable: true,\n    configurable: true,\n    value: 0\n  }\n});\n\nSafeString.prototype.valueOf = function valueOf() {\n  return this.val;\n};\n\nSafeString.prototype.toString = function toString() {\n  return this.val;\n};\n\nfunction copySafeness(dest, target) {\n  if (dest instanceof SafeString) {\n    return new SafeString(target);\n  }\n\n  return target.toString();\n}\n\nfunction markSafe(val) {\n  var type = typeof val;\n\n  if (type === 'string') {\n    return new SafeString(val);\n  } else if (type !== 'function') {\n    return val;\n  } else {\n    return function wrapSafe(args) {\n      var ret = val.apply(this, arguments);\n\n      if (typeof ret === 'string') {\n        return new SafeString(ret);\n      }\n\n      return ret;\n    };\n  }\n}\n\nfunction suppressValue(val, autoescape) {\n  val = val !== undefined && val !== null ? val : '';\n\n  if (autoescape && !(val instanceof SafeString)) {\n    val = lib.escape(val.toString());\n  }\n\n  return val;\n}\n\nfunction ensureDefined(val, lineno, colno) {\n  if (val === null || val === undefined) {\n    throw new lib.TemplateError('attempted to output null or undefined value', lineno + 1, colno + 1);\n  }\n\n  return val;\n}\n\nfunction memberLookup(obj, val) {\n  if (obj === undefined || obj === null) {\n    return undefined;\n  }\n\n  if (typeof obj[val] === 'function') {\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return obj[val].apply(obj, args);\n    };\n  }\n\n  return obj[val];\n}\n\nfunction callWrap(obj, name, context, args) {\n  if (!obj) {\n    throw new Error('Unable to call `' + name + '`, which is undefined or falsey');\n  } else if (typeof obj !== 'function') {\n    throw new Error('Unable to call `' + name + '`, which is not a function');\n  }\n\n  return obj.apply(context, args);\n}\n\nfunction contextOrFrameLookup(context, frame, name) {\n  var val = frame.lookup(name);\n  return val !== undefined ? val : context.lookup(name);\n}\n\nfunction handleError(error, lineno, colno) {\n  if (error.lineno) {\n    return error;\n  } else {\n    return new lib.TemplateError(error, lineno, colno);\n  }\n}\n\nfunction asyncEach(arr, dimen, iter, cb) {\n  if (lib.isArray(arr)) {\n    var len = arr.length;\n    lib.asyncIter(arr, function iterCallback(item, i, next) {\n      switch (dimen) {\n        case 1:\n          iter(item, i, len, next);\n          break;\n\n        case 2:\n          iter(item[0], item[1], i, len, next);\n          break;\n\n        case 3:\n          iter(item[0], item[1], item[2], i, len, next);\n          break;\n\n        default:\n          item.push(i, len, next);\n          iter.apply(this, item);\n      }\n    }, cb);\n  } else {\n    lib.asyncFor(arr, function iterCallback(key, val, i, len, next) {\n      iter(key, val, i, len, next);\n    }, cb);\n  }\n}\n\nfunction asyncAll(arr, dimen, func, cb) {\n  var finished = 0;\n  var len;\n  var outputArr;\n\n  function done(i, output) {\n    finished++;\n    outputArr[i] = output;\n\n    if (finished === len) {\n      cb(null, outputArr.join(''));\n    }\n  }\n\n  if (lib.isArray(arr)) {\n    len = arr.length;\n    outputArr = new Array(len);\n\n    if (len === 0) {\n      cb(null, '');\n    } else {\n      for (var i = 0; i < arr.length; i++) {\n        var item = arr[i];\n\n        switch (dimen) {\n          case 1:\n            func(item, i, len, done);\n            break;\n\n          case 2:\n            func(item[0], item[1], i, len, done);\n            break;\n\n          case 3:\n            func(item[0], item[1], item[2], i, len, done);\n            break;\n\n          default:\n            item.push(i, len, done);\n            func.apply(this, item);\n        }\n      }\n    }\n  } else {\n    var keys = lib.keys(arr || {});\n    len = keys.length;\n    outputArr = new Array(len);\n\n    if (len === 0) {\n      cb(null, '');\n    } else {\n      for (var _i = 0; _i < keys.length; _i++) {\n        var k = keys[_i];\n        func(k, arr[k], _i, len, done);\n      }\n    }\n  }\n}\n\nfunction fromIterator(arr) {\n  if (typeof arr !== 'object' || arr === null || lib.isArray(arr)) {\n    return arr;\n  } else if (supportsIterators && Symbol.iterator in arr) {\n    return arrayFrom(arr);\n  } else {\n    return arr;\n  }\n}\n\nmodule.exports = {\n  Frame: Frame,\n  makeMacro: makeMacro,\n  makeKeywordArgs: makeKeywordArgs,\n  numArgs: numArgs,\n  suppressValue: suppressValue,\n  ensureDefined: ensureDefined,\n  memberLookup: memberLookup,\n  contextOrFrameLookup: contextOrFrameLookup,\n  callWrap: callWrap,\n  handleError: handleError,\n  isArray: lib.isArray,\n  keys: lib.keys,\n  SafeString: SafeString,\n  copySafeness: copySafeness,\n  markSafe: markSafe,\n  asyncEach: asyncEach,\n  asyncAll: asyncAll,\n  inOperator: lib.inOperator,\n  fromIterator: fromIterator\n};","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar parser = require('./parser');\n\nvar transformer = require('./transformer');\n\nvar nodes = require('./nodes');\n\nvar _require = require('./lib'),\n    TemplateError = _require.TemplateError;\n\nvar _require2 = require('./runtime'),\n    Frame = _require2.Frame;\n\nvar _require3 = require('./object'),\n    Obj = _require3.Obj; // These are all the same for now, but shouldn't be passed straight\n// through\n\n\nvar compareOps = {\n  '==': '==',\n  '===': '===',\n  '!=': '!=',\n  '!==': '!==',\n  '<': '<',\n  '>': '>',\n  '<=': '<=',\n  '>=': '>='\n};\n\nvar Compiler = /*#__PURE__*/function (_Obj) {\n  _inheritsLoose(Compiler, _Obj);\n\n  function Compiler() {\n    return _Obj.apply(this, arguments) || this;\n  }\n\n  var _proto = Compiler.prototype;\n\n  _proto.init = function init(templateName, throwOnUndefined) {\n    this.templateName = templateName;\n    this.codebuf = [];\n    this.lastId = 0;\n    this.buffer = null;\n    this.bufferStack = [];\n    this._scopeClosers = '';\n    this.inBlock = false;\n    this.throwOnUndefined = throwOnUndefined;\n  };\n\n  _proto.fail = function fail(msg, lineno, colno) {\n    if (lineno !== undefined) {\n      lineno += 1;\n    }\n\n    if (colno !== undefined) {\n      colno += 1;\n    }\n\n    throw new TemplateError(msg, lineno, colno);\n  };\n\n  _proto._pushBuffer = function _pushBuffer() {\n    var id = this._tmpid();\n\n    this.bufferStack.push(this.buffer);\n    this.buffer = id;\n\n    this._emit(\"var \" + this.buffer + \" = \\\"\\\";\");\n\n    return id;\n  };\n\n  _proto._popBuffer = function _popBuffer() {\n    this.buffer = this.bufferStack.pop();\n  };\n\n  _proto._emit = function _emit(code) {\n    this.codebuf.push(code);\n  };\n\n  _proto._emitLine = function _emitLine(code) {\n    this._emit(code + '\\n');\n  };\n\n  _proto._emitLines = function _emitLines() {\n    var _this = this;\n\n    for (var _len = arguments.length, lines = new Array(_len), _key = 0; _key < _len; _key++) {\n      lines[_key] = arguments[_key];\n    }\n\n    lines.forEach(function (line) {\n      return _this._emitLine(line);\n    });\n  };\n\n  _proto._emitFuncBegin = function _emitFuncBegin(node, name) {\n    this.buffer = 'output';\n    this._scopeClosers = '';\n\n    this._emitLine(\"function \" + name + \"(env, context, frame, runtime, cb) {\");\n\n    this._emitLine(\"var lineno = \" + node.lineno + \";\");\n\n    this._emitLine(\"var colno = \" + node.colno + \";\");\n\n    this._emitLine(\"var \" + this.buffer + \" = \\\"\\\";\");\n\n    this._emitLine('try {');\n  };\n\n  _proto._emitFuncEnd = function _emitFuncEnd(noReturn) {\n    if (!noReturn) {\n      this._emitLine('cb(null, ' + this.buffer + ');');\n    }\n\n    this._closeScopeLevels();\n\n    this._emitLine('} catch (e) {');\n\n    this._emitLine('  cb(runtime.handleError(e, lineno, colno));');\n\n    this._emitLine('}');\n\n    this._emitLine('}');\n\n    this.buffer = null;\n  };\n\n  _proto._addScopeLevel = function _addScopeLevel() {\n    this._scopeClosers += '})';\n  };\n\n  _proto._closeScopeLevels = function _closeScopeLevels() {\n    this._emitLine(this._scopeClosers + ';');\n\n    this._scopeClosers = '';\n  };\n\n  _proto._withScopedSyntax = function _withScopedSyntax(func) {\n    var _scopeClosers = this._scopeClosers;\n    this._scopeClosers = '';\n    func.call(this);\n\n    this._closeScopeLevels();\n\n    this._scopeClosers = _scopeClosers;\n  };\n\n  _proto._makeCallback = function _makeCallback(res) {\n    var err = this._tmpid();\n\n    return 'function(' + err + (res ? ',' + res : '') + ') {\\n' + 'if(' + err + ') { cb(' + err + '); return; }';\n  };\n\n  _proto._tmpid = function _tmpid() {\n    this.lastId++;\n    return 't_' + this.lastId;\n  };\n\n  _proto._templateName = function _templateName() {\n    return this.templateName == null ? 'undefined' : JSON.stringify(this.templateName);\n  };\n\n  _proto._compileChildren = function _compileChildren(node, frame) {\n    var _this2 = this;\n\n    node.children.forEach(function (child) {\n      _this2.compile(child, frame);\n    });\n  };\n\n  _proto._compileAggregate = function _compileAggregate(node, frame, startChar, endChar) {\n    var _this3 = this;\n\n    if (startChar) {\n      this._emit(startChar);\n    }\n\n    node.children.forEach(function (child, i) {\n      if (i > 0) {\n        _this3._emit(',');\n      }\n\n      _this3.compile(child, frame);\n    });\n\n    if (endChar) {\n      this._emit(endChar);\n    }\n  };\n\n  _proto._compileExpression = function _compileExpression(node, frame) {\n    // TODO: I'm not really sure if this type check is worth it or\n    // not.\n    this.assertType(node, nodes.Literal, nodes.Symbol, nodes.Group, nodes.Array, nodes.Dict, nodes.FunCall, nodes.Caller, nodes.Filter, nodes.LookupVal, nodes.Compare, nodes.InlineIf, nodes.In, nodes.Is, nodes.And, nodes.Or, nodes.Not, nodes.Add, nodes.Concat, nodes.Sub, nodes.Mul, nodes.Div, nodes.FloorDiv, nodes.Mod, nodes.Pow, nodes.Neg, nodes.Pos, nodes.Compare, nodes.NodeList);\n    this.compile(node, frame);\n  };\n\n  _proto.assertType = function assertType(node) {\n    for (var _len2 = arguments.length, types = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      types[_key2 - 1] = arguments[_key2];\n    }\n\n    if (!types.some(function (t) {\n      return node instanceof t;\n    })) {\n      this.fail(\"assertType: invalid type: \" + node.typename, node.lineno, node.colno);\n    }\n  };\n\n  _proto.compileCallExtension = function compileCallExtension(node, frame, async) {\n    var _this4 = this;\n\n    var args = node.args;\n    var contentArgs = node.contentArgs;\n    var autoescape = typeof node.autoescape === 'boolean' ? node.autoescape : true;\n\n    if (!async) {\n      this._emit(this.buffer + \" += runtime.suppressValue(\");\n    }\n\n    this._emit(\"env.getExtension(\\\"\" + node.extName + \"\\\")[\\\"\" + node.prop + \"\\\"](\");\n\n    this._emit('context');\n\n    if (args || contentArgs) {\n      this._emit(',');\n    }\n\n    if (args) {\n      if (!(args instanceof nodes.NodeList)) {\n        this.fail('compileCallExtension: arguments must be a NodeList, ' + 'use `parser.parseSignature`');\n      }\n\n      args.children.forEach(function (arg, i) {\n        // Tag arguments are passed normally to the call. Note\n        // that keyword arguments are turned into a single js\n        // object as the last argument, if they exist.\n        _this4._compileExpression(arg, frame);\n\n        if (i !== args.children.length - 1 || contentArgs.length) {\n          _this4._emit(',');\n        }\n      });\n    }\n\n    if (contentArgs.length) {\n      contentArgs.forEach(function (arg, i) {\n        if (i > 0) {\n          _this4._emit(',');\n        }\n\n        if (arg) {\n          _this4._emitLine('function(cb) {');\n\n          _this4._emitLine('if(!cb) { cb = function(err) { if(err) { throw err; }}}');\n\n          var id = _this4._pushBuffer();\n\n          _this4._withScopedSyntax(function () {\n            _this4.compile(arg, frame);\n\n            _this4._emitLine(\"cb(null, \" + id + \");\");\n          });\n\n          _this4._popBuffer();\n\n          _this4._emitLine(\"return \" + id + \";\");\n\n          _this4._emitLine('}');\n        } else {\n          _this4._emit('null');\n        }\n      });\n    }\n\n    if (async) {\n      var res = this._tmpid();\n\n      this._emitLine(', ' + this._makeCallback(res));\n\n      this._emitLine(this.buffer + \" += runtime.suppressValue(\" + res + \", \" + autoescape + \" && env.opts.autoescape);\");\n\n      this._addScopeLevel();\n    } else {\n      this._emit(')');\n\n      this._emit(\", \" + autoescape + \" && env.opts.autoescape);\\n\");\n    }\n  };\n\n  _proto.compileCallExtensionAsync = function compileCallExtensionAsync(node, frame) {\n    this.compileCallExtension(node, frame, true);\n  };\n\n  _proto.compileNodeList = function compileNodeList(node, frame) {\n    this._compileChildren(node, frame);\n  };\n\n  _proto.compileLiteral = function compileLiteral(node) {\n    if (typeof node.value === 'string') {\n      var val = node.value.replace(/\\\\/g, '\\\\\\\\');\n      val = val.replace(/\"/g, '\\\\\"');\n      val = val.replace(/\\n/g, '\\\\n');\n      val = val.replace(/\\r/g, '\\\\r');\n      val = val.replace(/\\t/g, '\\\\t');\n      val = val.replace(/\\u2028/g, \"\\\\u2028\");\n\n      this._emit(\"\\\"\" + val + \"\\\"\");\n    } else if (node.value === null) {\n      this._emit('null');\n    } else {\n      this._emit(node.value.toString());\n    }\n  };\n\n  _proto.compileSymbol = function compileSymbol(node, frame) {\n    var name = node.value;\n    var v = frame.lookup(name);\n\n    if (v) {\n      this._emit(v);\n    } else {\n      this._emit('runtime.contextOrFrameLookup(' + 'context, frame, \"' + name + '\")');\n    }\n  };\n\n  _proto.compileGroup = function compileGroup(node, frame) {\n    this._compileAggregate(node, frame, '(', ')');\n  };\n\n  _proto.compileArray = function compileArray(node, frame) {\n    this._compileAggregate(node, frame, '[', ']');\n  };\n\n  _proto.compileDict = function compileDict(node, frame) {\n    this._compileAggregate(node, frame, '{', '}');\n  };\n\n  _proto.compilePair = function compilePair(node, frame) {\n    var key = node.key;\n    var val = node.value;\n\n    if (key instanceof nodes.Symbol) {\n      key = new nodes.Literal(key.lineno, key.colno, key.value);\n    } else if (!(key instanceof nodes.Literal && typeof key.value === 'string')) {\n      this.fail('compilePair: Dict keys must be strings or names', key.lineno, key.colno);\n    }\n\n    this.compile(key, frame);\n\n    this._emit(': ');\n\n    this._compileExpression(val, frame);\n  };\n\n  _proto.compileInlineIf = function compileInlineIf(node, frame) {\n    this._emit('(');\n\n    this.compile(node.cond, frame);\n\n    this._emit('?');\n\n    this.compile(node.body, frame);\n\n    this._emit(':');\n\n    if (node.else_ !== null) {\n      this.compile(node.else_, frame);\n    } else {\n      this._emit('\"\"');\n    }\n\n    this._emit(')');\n  };\n\n  _proto.compileIn = function compileIn(node, frame) {\n    this._emit('runtime.inOperator(');\n\n    this.compile(node.left, frame);\n\n    this._emit(',');\n\n    this.compile(node.right, frame);\n\n    this._emit(')');\n  };\n\n  _proto.compileIs = function compileIs(node, frame) {\n    // first, we need to try to get the name of the test function, if it's a\n    // callable (i.e., has args) and not a symbol.\n    var right = node.right.name ? node.right.name.value // otherwise go with the symbol value\n    : node.right.value;\n\n    this._emit('env.getTest(\"' + right + '\").call(context, ');\n\n    this.compile(node.left, frame); // compile the arguments for the callable if they exist\n\n    if (node.right.args) {\n      this._emit(',');\n\n      this.compile(node.right.args, frame);\n    }\n\n    this._emit(') === true');\n  };\n\n  _proto._binOpEmitter = function _binOpEmitter(node, frame, str) {\n    this.compile(node.left, frame);\n\n    this._emit(str);\n\n    this.compile(node.right, frame);\n  } // ensure concatenation instead of addition\n  // by adding empty string in between\n  ;\n\n  _proto.compileOr = function compileOr(node, frame) {\n    return this._binOpEmitter(node, frame, ' || ');\n  };\n\n  _proto.compileAnd = function compileAnd(node, frame) {\n    return this._binOpEmitter(node, frame, ' && ');\n  };\n\n  _proto.compileAdd = function compileAdd(node, frame) {\n    return this._binOpEmitter(node, frame, ' + ');\n  };\n\n  _proto.compileConcat = function compileConcat(node, frame) {\n    return this._binOpEmitter(node, frame, ' + \"\" + ');\n  };\n\n  _proto.compileSub = function compileSub(node, frame) {\n    return this._binOpEmitter(node, frame, ' - ');\n  };\n\n  _proto.compileMul = function compileMul(node, frame) {\n    return this._binOpEmitter(node, frame, ' * ');\n  };\n\n  _proto.compileDiv = function compileDiv(node, frame) {\n    return this._binOpEmitter(node, frame, ' / ');\n  };\n\n  _proto.compileMod = function compileMod(node, frame) {\n    return this._binOpEmitter(node, frame, ' % ');\n  };\n\n  _proto.compileNot = function compileNot(node, frame) {\n    this._emit('!');\n\n    this.compile(node.target, frame);\n  };\n\n  _proto.compileFloorDiv = function compileFloorDiv(node, frame) {\n    this._emit('Math.floor(');\n\n    this.compile(node.left, frame);\n\n    this._emit(' / ');\n\n    this.compile(node.right, frame);\n\n    this._emit(')');\n  };\n\n  _proto.compilePow = function compilePow(node, frame) {\n    this._emit('Math.pow(');\n\n    this.compile(node.left, frame);\n\n    this._emit(', ');\n\n    this.compile(node.right, frame);\n\n    this._emit(')');\n  };\n\n  _proto.compileNeg = function compileNeg(node, frame) {\n    this._emit('-');\n\n    this.compile(node.target, frame);\n  };\n\n  _proto.compilePos = function compilePos(node, frame) {\n    this._emit('+');\n\n    this.compile(node.target, frame);\n  };\n\n  _proto.compileCompare = function compileCompare(node, frame) {\n    var _this5 = this;\n\n    this.compile(node.expr, frame);\n    node.ops.forEach(function (op) {\n      _this5._emit(\" \" + compareOps[op.type] + \" \");\n\n      _this5.compile(op.expr, frame);\n    });\n  };\n\n  _proto.compileLookupVal = function compileLookupVal(node, frame) {\n    this._emit('runtime.memberLookup((');\n\n    this._compileExpression(node.target, frame);\n\n    this._emit('),');\n\n    this._compileExpression(node.val, frame);\n\n    this._emit(')');\n  };\n\n  _proto._getNodeName = function _getNodeName(node) {\n    switch (node.typename) {\n      case 'Symbol':\n        return node.value;\n\n      case 'FunCall':\n        return 'the return value of (' + this._getNodeName(node.name) + ')';\n\n      case 'LookupVal':\n        return this._getNodeName(node.target) + '[\"' + this._getNodeName(node.val) + '\"]';\n\n      case 'Literal':\n        return node.value.toString();\n\n      default:\n        return '--expression--';\n    }\n  };\n\n  _proto.compileFunCall = function compileFunCall(node, frame) {\n    // Keep track of line/col info at runtime by settings\n    // variables within an expression. An expression in javascript\n    // like (x, y, z) returns the last value, and x and y can be\n    // anything\n    this._emit('(lineno = ' + node.lineno + ', colno = ' + node.colno + ', ');\n\n    this._emit('runtime.callWrap('); // Compile it as normal.\n\n\n    this._compileExpression(node.name, frame); // Output the name of what we're calling so we can get friendly errors\n    // if the lookup fails.\n\n\n    this._emit(', \"' + this._getNodeName(node.name).replace(/\"/g, '\\\\\"') + '\", context, ');\n\n    this._compileAggregate(node.args, frame, '[', '])');\n\n    this._emit(')');\n  };\n\n  _proto.compileFilter = function compileFilter(node, frame) {\n    var name = node.name;\n    this.assertType(name, nodes.Symbol);\n\n    this._emit('env.getFilter(\"' + name.value + '\").call(context, ');\n\n    this._compileAggregate(node.args, frame);\n\n    this._emit(')');\n  };\n\n  _proto.compileFilterAsync = function compileFilterAsync(node, frame) {\n    var name = node.name;\n    var symbol = node.symbol.value;\n    this.assertType(name, nodes.Symbol);\n    frame.set(symbol, symbol);\n\n    this._emit('env.getFilter(\"' + name.value + '\").call(context, ');\n\n    this._compileAggregate(node.args, frame);\n\n    this._emitLine(', ' + this._makeCallback(symbol));\n\n    this._addScopeLevel();\n  };\n\n  _proto.compileKeywordArgs = function compileKeywordArgs(node, frame) {\n    this._emit('runtime.makeKeywordArgs(');\n\n    this.compileDict(node, frame);\n\n    this._emit(')');\n  };\n\n  _proto.compileSet = function compileSet(node, frame) {\n    var _this6 = this;\n\n    var ids = []; // Lookup the variable names for each identifier and create\n    // new ones if necessary\n\n    node.targets.forEach(function (target) {\n      var name = target.value;\n      var id = frame.lookup(name);\n\n      if (id === null || id === undefined) {\n        id = _this6._tmpid(); // Note: This relies on js allowing scope across\n        // blocks, in case this is created inside an `if`\n\n        _this6._emitLine('var ' + id + ';');\n      }\n\n      ids.push(id);\n    });\n\n    if (node.value) {\n      this._emit(ids.join(' = ') + ' = ');\n\n      this._compileExpression(node.value, frame);\n\n      this._emitLine(';');\n    } else {\n      this._emit(ids.join(' = ') + ' = ');\n\n      this.compile(node.body, frame);\n\n      this._emitLine(';');\n    }\n\n    node.targets.forEach(function (target, i) {\n      var id = ids[i];\n      var name = target.value; // We are running this for every var, but it's very\n      // uncommon to assign to multiple vars anyway\n\n      _this6._emitLine(\"frame.set(\\\"\" + name + \"\\\", \" + id + \", true);\");\n\n      _this6._emitLine('if(frame.topLevel) {');\n\n      _this6._emitLine(\"context.setVariable(\\\"\" + name + \"\\\", \" + id + \");\");\n\n      _this6._emitLine('}');\n\n      if (name.charAt(0) !== '_') {\n        _this6._emitLine('if(frame.topLevel) {');\n\n        _this6._emitLine(\"context.addExport(\\\"\" + name + \"\\\", \" + id + \");\");\n\n        _this6._emitLine('}');\n      }\n    });\n  };\n\n  _proto.compileSwitch = function compileSwitch(node, frame) {\n    var _this7 = this;\n\n    this._emit('switch (');\n\n    this.compile(node.expr, frame);\n\n    this._emit(') {');\n\n    node.cases.forEach(function (c, i) {\n      _this7._emit('case ');\n\n      _this7.compile(c.cond, frame);\n\n      _this7._emit(': ');\n\n      _this7.compile(c.body, frame); // preserve fall-throughs\n\n\n      if (c.body.children.length) {\n        _this7._emitLine('break;');\n      }\n    });\n\n    if (node.default) {\n      this._emit('default:');\n\n      this.compile(node.default, frame);\n    }\n\n    this._emit('}');\n  };\n\n  _proto.compileIf = function compileIf(node, frame, async) {\n    var _this8 = this;\n\n    this._emit('if(');\n\n    this._compileExpression(node.cond, frame);\n\n    this._emitLine(') {');\n\n    this._withScopedSyntax(function () {\n      _this8.compile(node.body, frame);\n\n      if (async) {\n        _this8._emit('cb()');\n      }\n    });\n\n    if (node.else_) {\n      this._emitLine('}\\nelse {');\n\n      this._withScopedSyntax(function () {\n        _this8.compile(node.else_, frame);\n\n        if (async) {\n          _this8._emit('cb()');\n        }\n      });\n    } else if (async) {\n      this._emitLine('}\\nelse {');\n\n      this._emit('cb()');\n    }\n\n    this._emitLine('}');\n  };\n\n  _proto.compileIfAsync = function compileIfAsync(node, frame) {\n    this._emit('(function(cb) {');\n\n    this.compileIf(node, frame, true);\n\n    this._emit('})(' + this._makeCallback());\n\n    this._addScopeLevel();\n  };\n\n  _proto._emitLoopBindings = function _emitLoopBindings(node, arr, i, len) {\n    var _this9 = this;\n\n    var bindings = [{\n      name: 'index',\n      val: i + \" + 1\"\n    }, {\n      name: 'index0',\n      val: i\n    }, {\n      name: 'revindex',\n      val: len + \" - \" + i\n    }, {\n      name: 'revindex0',\n      val: len + \" - \" + i + \" - 1\"\n    }, {\n      name: 'first',\n      val: i + \" === 0\"\n    }, {\n      name: 'last',\n      val: i + \" === \" + len + \" - 1\"\n    }, {\n      name: 'length',\n      val: len\n    }];\n    bindings.forEach(function (b) {\n      _this9._emitLine(\"frame.set(\\\"loop.\" + b.name + \"\\\", \" + b.val + \");\");\n    });\n  };\n\n  _proto.compileFor = function compileFor(node, frame) {\n    var _this10 = this;\n\n    // Some of this code is ugly, but it keeps the generated code\n    // as fast as possible. ForAsync also shares some of this, but\n    // not much.\n    var i = this._tmpid();\n\n    var len = this._tmpid();\n\n    var arr = this._tmpid();\n\n    frame = frame.push();\n\n    this._emitLine('frame = frame.push();');\n\n    this._emit(\"var \" + arr + \" = \");\n\n    this._compileExpression(node.arr, frame);\n\n    this._emitLine(';');\n\n    this._emit(\"if(\" + arr + \") {\");\n\n    this._emitLine(arr + ' = runtime.fromIterator(' + arr + ');'); // If multiple names are passed, we need to bind them\n    // appropriately\n\n\n    if (node.name instanceof nodes.Array) {\n      this._emitLine(\"var \" + i + \";\"); // The object could be an arroy or object. Note that the\n      // body of the loop is duplicated for each condition, but\n      // we are optimizing for speed over size.\n\n\n      this._emitLine(\"if(runtime.isArray(\" + arr + \")) {\");\n\n      this._emitLine(\"var \" + len + \" = \" + arr + \".length;\");\n\n      this._emitLine(\"for(\" + i + \"=0; \" + i + \" < \" + arr + \".length; \" + i + \"++) {\"); // Bind each declared var\n\n\n      node.name.children.forEach(function (child, u) {\n        var tid = _this10._tmpid();\n\n        _this10._emitLine(\"var \" + tid + \" = \" + arr + \"[\" + i + \"][\" + u + \"];\");\n\n        _this10._emitLine(\"frame.set(\\\"\" + child + \"\\\", \" + arr + \"[\" + i + \"][\" + u + \"]);\");\n\n        frame.set(node.name.children[u].value, tid);\n      });\n\n      this._emitLoopBindings(node, arr, i, len);\n\n      this._withScopedSyntax(function () {\n        _this10.compile(node.body, frame);\n      });\n\n      this._emitLine('}');\n\n      this._emitLine('} else {'); // Iterate over the key/values of an object\n\n\n      var _node$name$children = node.name.children,\n          key = _node$name$children[0],\n          val = _node$name$children[1];\n\n      var k = this._tmpid();\n\n      var v = this._tmpid();\n\n      frame.set(key.value, k);\n      frame.set(val.value, v);\n\n      this._emitLine(i + \" = -1;\");\n\n      this._emitLine(\"var \" + len + \" = runtime.keys(\" + arr + \").length;\");\n\n      this._emitLine(\"for(var \" + k + \" in \" + arr + \") {\");\n\n      this._emitLine(i + \"++;\");\n\n      this._emitLine(\"var \" + v + \" = \" + arr + \"[\" + k + \"];\");\n\n      this._emitLine(\"frame.set(\\\"\" + key.value + \"\\\", \" + k + \");\");\n\n      this._emitLine(\"frame.set(\\\"\" + val.value + \"\\\", \" + v + \");\");\n\n      this._emitLoopBindings(node, arr, i, len);\n\n      this._withScopedSyntax(function () {\n        _this10.compile(node.body, frame);\n      });\n\n      this._emitLine('}');\n\n      this._emitLine('}');\n    } else {\n      // Generate a typical array iteration\n      var _v = this._tmpid();\n\n      frame.set(node.name.value, _v);\n\n      this._emitLine(\"var \" + len + \" = \" + arr + \".length;\");\n\n      this._emitLine(\"for(var \" + i + \"=0; \" + i + \" < \" + arr + \".length; \" + i + \"++) {\");\n\n      this._emitLine(\"var \" + _v + \" = \" + arr + \"[\" + i + \"];\");\n\n      this._emitLine(\"frame.set(\\\"\" + node.name.value + \"\\\", \" + _v + \");\");\n\n      this._emitLoopBindings(node, arr, i, len);\n\n      this._withScopedSyntax(function () {\n        _this10.compile(node.body, frame);\n      });\n\n      this._emitLine('}');\n    }\n\n    this._emitLine('}');\n\n    if (node.else_) {\n      this._emitLine('if (!' + len + ') {');\n\n      this.compile(node.else_, frame);\n\n      this._emitLine('}');\n    }\n\n    this._emitLine('frame = frame.pop();');\n  };\n\n  _proto._compileAsyncLoop = function _compileAsyncLoop(node, frame, parallel) {\n    var _this11 = this;\n\n    // This shares some code with the For tag, but not enough to\n    // worry about. This iterates across an object asynchronously,\n    // but not in parallel.\n    var i = this._tmpid();\n\n    var len = this._tmpid();\n\n    var arr = this._tmpid();\n\n    var asyncMethod = parallel ? 'asyncAll' : 'asyncEach';\n    frame = frame.push();\n\n    this._emitLine('frame = frame.push();');\n\n    this._emit('var ' + arr + ' = runtime.fromIterator(');\n\n    this._compileExpression(node.arr, frame);\n\n    this._emitLine(');');\n\n    if (node.name instanceof nodes.Array) {\n      var arrayLen = node.name.children.length;\n\n      this._emit(\"runtime.\" + asyncMethod + \"(\" + arr + \", \" + arrayLen + \", function(\");\n\n      node.name.children.forEach(function (name) {\n        _this11._emit(name.value + \",\");\n      });\n\n      this._emit(i + ',' + len + ',next) {');\n\n      node.name.children.forEach(function (name) {\n        var id = name.value;\n        frame.set(id, id);\n\n        _this11._emitLine(\"frame.set(\\\"\" + id + \"\\\", \" + id + \");\");\n      });\n    } else {\n      var id = node.name.value;\n\n      this._emitLine(\"runtime.\" + asyncMethod + \"(\" + arr + \", 1, function(\" + id + \", \" + i + \", \" + len + \",next) {\");\n\n      this._emitLine('frame.set(\"' + id + '\", ' + id + ');');\n\n      frame.set(id, id);\n    }\n\n    this._emitLoopBindings(node, arr, i, len);\n\n    this._withScopedSyntax(function () {\n      var buf;\n\n      if (parallel) {\n        buf = _this11._pushBuffer();\n      }\n\n      _this11.compile(node.body, frame);\n\n      _this11._emitLine('next(' + i + (buf ? ',' + buf : '') + ');');\n\n      if (parallel) {\n        _this11._popBuffer();\n      }\n    });\n\n    var output = this._tmpid();\n\n    this._emitLine('}, ' + this._makeCallback(output));\n\n    this._addScopeLevel();\n\n    if (parallel) {\n      this._emitLine(this.buffer + ' += ' + output + ';');\n    }\n\n    if (node.else_) {\n      this._emitLine('if (!' + arr + '.length) {');\n\n      this.compile(node.else_, frame);\n\n      this._emitLine('}');\n    }\n\n    this._emitLine('frame = frame.pop();');\n  };\n\n  _proto.compileAsyncEach = function compileAsyncEach(node, frame) {\n    this._compileAsyncLoop(node, frame);\n  };\n\n  _proto.compileAsyncAll = function compileAsyncAll(node, frame) {\n    this._compileAsyncLoop(node, frame, true);\n  };\n\n  _proto._compileMacro = function _compileMacro(node, frame) {\n    var _this12 = this;\n\n    var args = [];\n    var kwargs = null;\n\n    var funcId = 'macro_' + this._tmpid();\n\n    var keepFrame = frame !== undefined; // Type check the definition of the args\n\n    node.args.children.forEach(function (arg, i) {\n      if (i === node.args.children.length - 1 && arg instanceof nodes.Dict) {\n        kwargs = arg;\n      } else {\n        _this12.assertType(arg, nodes.Symbol);\n\n        args.push(arg);\n      }\n    });\n    var realNames = [].concat(args.map(function (n) {\n      return \"l_\" + n.value;\n    }), ['kwargs']); // Quoted argument names\n\n    var argNames = args.map(function (n) {\n      return \"\\\"\" + n.value + \"\\\"\";\n    });\n    var kwargNames = (kwargs && kwargs.children || []).map(function (n) {\n      return \"\\\"\" + n.key.value + \"\\\"\";\n    }); // We pass a function to makeMacro which destructures the\n    // arguments so support setting positional args with keywords\n    // args and passing keyword args as positional args\n    // (essentially default values). See runtime.js.\n\n    var currFrame;\n\n    if (keepFrame) {\n      currFrame = frame.push(true);\n    } else {\n      currFrame = new Frame();\n    }\n\n    this._emitLines(\"var \" + funcId + \" = runtime.makeMacro(\", \"[\" + argNames.join(', ') + \"], \", \"[\" + kwargNames.join(', ') + \"], \", \"function (\" + realNames.join(', ') + \") {\", 'var callerFrame = frame;', 'frame = ' + (keepFrame ? 'frame.push(true);' : 'new runtime.Frame();'), 'kwargs = kwargs || {};', 'if (Object.prototype.hasOwnProperty.call(kwargs, \"caller\")) {', 'frame.set(\"caller\", kwargs.caller); }'); // Expose the arguments to the template. Don't need to use\n    // random names because the function\n    // will create a new run-time scope for us\n\n\n    args.forEach(function (arg) {\n      _this12._emitLine(\"frame.set(\\\"\" + arg.value + \"\\\", l_\" + arg.value + \");\");\n\n      currFrame.set(arg.value, \"l_\" + arg.value);\n    }); // Expose the keyword arguments\n\n    if (kwargs) {\n      kwargs.children.forEach(function (pair) {\n        var name = pair.key.value;\n\n        _this12._emit(\"frame.set(\\\"\" + name + \"\\\", \");\n\n        _this12._emit(\"Object.prototype.hasOwnProperty.call(kwargs, \\\"\" + name + \"\\\")\");\n\n        _this12._emit(\" ? kwargs[\\\"\" + name + \"\\\"] : \");\n\n        _this12._compileExpression(pair.value, currFrame);\n\n        _this12._emit(');');\n      });\n    }\n\n    var bufferId = this._pushBuffer();\n\n    this._withScopedSyntax(function () {\n      _this12.compile(node.body, currFrame);\n    });\n\n    this._emitLine('frame = ' + (keepFrame ? 'frame.pop();' : 'callerFrame;'));\n\n    this._emitLine(\"return new runtime.SafeString(\" + bufferId + \");\");\n\n    this._emitLine('});');\n\n    this._popBuffer();\n\n    return funcId;\n  };\n\n  _proto.compileMacro = function compileMacro(node, frame) {\n    var funcId = this._compileMacro(node); // Expose the macro to the templates\n\n\n    var name = node.name.value;\n    frame.set(name, funcId);\n\n    if (frame.parent) {\n      this._emitLine(\"frame.set(\\\"\" + name + \"\\\", \" + funcId + \");\");\n    } else {\n      if (node.name.value.charAt(0) !== '_') {\n        this._emitLine(\"context.addExport(\\\"\" + name + \"\\\");\");\n      }\n\n      this._emitLine(\"context.setVariable(\\\"\" + name + \"\\\", \" + funcId + \");\");\n    }\n  };\n\n  _proto.compileCaller = function compileCaller(node, frame) {\n    // basically an anonymous \"macro expression\"\n    this._emit('(function (){');\n\n    var funcId = this._compileMacro(node, frame);\n\n    this._emit(\"return \" + funcId + \";})()\");\n  };\n\n  _proto._compileGetTemplate = function _compileGetTemplate(node, frame, eagerCompile, ignoreMissing) {\n    var parentTemplateId = this._tmpid();\n\n    var parentName = this._templateName();\n\n    var cb = this._makeCallback(parentTemplateId);\n\n    var eagerCompileArg = eagerCompile ? 'true' : 'false';\n    var ignoreMissingArg = ignoreMissing ? 'true' : 'false';\n\n    this._emit('env.getTemplate(');\n\n    this._compileExpression(node.template, frame);\n\n    this._emitLine(\", \" + eagerCompileArg + \", \" + parentName + \", \" + ignoreMissingArg + \", \" + cb);\n\n    return parentTemplateId;\n  };\n\n  _proto.compileImport = function compileImport(node, frame) {\n    var target = node.target.value;\n\n    var id = this._compileGetTemplate(node, frame, false, false);\n\n    this._addScopeLevel();\n\n    this._emitLine(id + '.getExported(' + (node.withContext ? 'context.getVariables(), frame, ' : '') + this._makeCallback(id));\n\n    this._addScopeLevel();\n\n    frame.set(target, id);\n\n    if (frame.parent) {\n      this._emitLine(\"frame.set(\\\"\" + target + \"\\\", \" + id + \");\");\n    } else {\n      this._emitLine(\"context.setVariable(\\\"\" + target + \"\\\", \" + id + \");\");\n    }\n  };\n\n  _proto.compileFromImport = function compileFromImport(node, frame) {\n    var _this13 = this;\n\n    var importedId = this._compileGetTemplate(node, frame, false, false);\n\n    this._addScopeLevel();\n\n    this._emitLine(importedId + '.getExported(' + (node.withContext ? 'context.getVariables(), frame, ' : '') + this._makeCallback(importedId));\n\n    this._addScopeLevel();\n\n    node.names.children.forEach(function (nameNode) {\n      var name;\n      var alias;\n\n      var id = _this13._tmpid();\n\n      if (nameNode instanceof nodes.Pair) {\n        name = nameNode.key.value;\n        alias = nameNode.value.value;\n      } else {\n        name = nameNode.value;\n        alias = name;\n      }\n\n      _this13._emitLine(\"if(Object.prototype.hasOwnProperty.call(\" + importedId + \", \\\"\" + name + \"\\\")) {\");\n\n      _this13._emitLine(\"var \" + id + \" = \" + importedId + \".\" + name + \";\");\n\n      _this13._emitLine('} else {');\n\n      _this13._emitLine(\"cb(new Error(\\\"cannot import '\" + name + \"'\\\")); return;\");\n\n      _this13._emitLine('}');\n\n      frame.set(alias, id);\n\n      if (frame.parent) {\n        _this13._emitLine(\"frame.set(\\\"\" + alias + \"\\\", \" + id + \");\");\n      } else {\n        _this13._emitLine(\"context.setVariable(\\\"\" + alias + \"\\\", \" + id + \");\");\n      }\n    });\n  };\n\n  _proto.compileBlock = function compileBlock(node) {\n    var id = this._tmpid(); // If we are executing outside a block (creating a top-level\n    // block), we really don't want to execute its code because it\n    // will execute twice: once when the child template runs and\n    // again when the parent template runs. Note that blocks\n    // within blocks will *always* execute immediately *and*\n    // wherever else they are invoked (like used in a parent\n    // template). This may have behavioral differences from jinja\n    // because blocks can have side effects, but it seems like a\n    // waste of performance to always execute huge top-level\n    // blocks twice\n\n\n    if (!this.inBlock) {\n      this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(\"\"); } : ');\n    }\n\n    this._emit(\"context.getBlock(\\\"\" + node.name.value + \"\\\")\");\n\n    if (!this.inBlock) {\n      this._emit(')');\n    }\n\n    this._emitLine('(env, context, frame, runtime, ' + this._makeCallback(id));\n\n    this._emitLine(this.buffer + \" += \" + id + \";\");\n\n    this._addScopeLevel();\n  };\n\n  _proto.compileSuper = function compileSuper(node, frame) {\n    var name = node.blockName.value;\n    var id = node.symbol.value;\n\n    var cb = this._makeCallback(id);\n\n    this._emitLine(\"context.getSuper(env, \\\"\" + name + \"\\\", b_\" + name + \", frame, runtime, \" + cb);\n\n    this._emitLine(id + \" = runtime.markSafe(\" + id + \");\");\n\n    this._addScopeLevel();\n\n    frame.set(id, id);\n  };\n\n  _proto.compileExtends = function compileExtends(node, frame) {\n    var k = this._tmpid();\n\n    var parentTemplateId = this._compileGetTemplate(node, frame, true, false); // extends is a dynamic tag and can occur within a block like\n    // `if`, so if this happens we need to capture the parent\n    // template in the top-level scope\n\n\n    this._emitLine(\"parentTemplate = \" + parentTemplateId);\n\n    this._emitLine(\"for(var \" + k + \" in parentTemplate.blocks) {\");\n\n    this._emitLine(\"context.addBlock(\" + k + \", parentTemplate.blocks[\" + k + \"]);\");\n\n    this._emitLine('}');\n\n    this._addScopeLevel();\n  };\n\n  _proto.compileInclude = function compileInclude(node, frame) {\n    this._emitLine('var tasks = [];');\n\n    this._emitLine('tasks.push(');\n\n    this._emitLine('function(callback) {');\n\n    var id = this._compileGetTemplate(node, frame, false, node.ignoreMissing);\n\n    this._emitLine(\"callback(null,\" + id + \");});\");\n\n    this._emitLine('});');\n\n    var id2 = this._tmpid();\n\n    this._emitLine('tasks.push(');\n\n    this._emitLine('function(template, callback){');\n\n    this._emitLine('template.render(context.getVariables(), frame, ' + this._makeCallback(id2));\n\n    this._emitLine('callback(null,' + id2 + ');});');\n\n    this._emitLine('});');\n\n    this._emitLine('tasks.push(');\n\n    this._emitLine('function(result, callback){');\n\n    this._emitLine(this.buffer + \" += result;\");\n\n    this._emitLine('callback(null);');\n\n    this._emitLine('});');\n\n    this._emitLine('env.waterfall(tasks, function(){');\n\n    this._addScopeLevel();\n  };\n\n  _proto.compileTemplateData = function compileTemplateData(node, frame) {\n    this.compileLiteral(node, frame);\n  };\n\n  _proto.compileCapture = function compileCapture(node, frame) {\n    var _this14 = this;\n\n    // we need to temporarily override the current buffer id as 'output'\n    // so the set block writes to the capture output instead of the buffer\n    var buffer = this.buffer;\n    this.buffer = 'output';\n\n    this._emitLine('(function() {');\n\n    this._emitLine('var output = \"\";');\n\n    this._withScopedSyntax(function () {\n      _this14.compile(node.body, frame);\n    });\n\n    this._emitLine('return output;');\n\n    this._emitLine('})()'); // and of course, revert back to the old buffer id\n\n\n    this.buffer = buffer;\n  };\n\n  _proto.compileOutput = function compileOutput(node, frame) {\n    var _this15 = this;\n\n    var children = node.children;\n    children.forEach(function (child) {\n      // TemplateData is a special case because it is never\n      // autoescaped, so simply output it for optimization\n      if (child instanceof nodes.TemplateData) {\n        if (child.value) {\n          _this15._emit(_this15.buffer + \" += \");\n\n          _this15.compileLiteral(child, frame);\n\n          _this15._emitLine(';');\n        }\n      } else {\n        _this15._emit(_this15.buffer + \" += runtime.suppressValue(\");\n\n        if (_this15.throwOnUndefined) {\n          _this15._emit('runtime.ensureDefined(');\n        }\n\n        _this15.compile(child, frame);\n\n        if (_this15.throwOnUndefined) {\n          _this15._emit(\",\" + node.lineno + \",\" + node.colno + \")\");\n        }\n\n        _this15._emit(', env.opts.autoescape);\\n');\n      }\n    });\n  };\n\n  _proto.compileRoot = function compileRoot(node, frame) {\n    var _this16 = this;\n\n    if (frame) {\n      this.fail('compileRoot: root node can\\'t have frame');\n    }\n\n    frame = new Frame();\n\n    this._emitFuncBegin(node, 'root');\n\n    this._emitLine('var parentTemplate = null;');\n\n    this._compileChildren(node, frame);\n\n    this._emitLine('if(parentTemplate) {');\n\n    this._emitLine('parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);');\n\n    this._emitLine('} else {');\n\n    this._emitLine(\"cb(null, \" + this.buffer + \");\");\n\n    this._emitLine('}');\n\n    this._emitFuncEnd(true);\n\n    this.inBlock = true;\n    var blockNames = [];\n    var blocks = node.findAll(nodes.Block);\n    blocks.forEach(function (block, i) {\n      var name = block.name.value;\n\n      if (blockNames.indexOf(name) !== -1) {\n        throw new Error(\"Block \\\"\" + name + \"\\\" defined more than once.\");\n      }\n\n      blockNames.push(name);\n\n      _this16._emitFuncBegin(block, \"b_\" + name);\n\n      var tmpFrame = new Frame();\n\n      _this16._emitLine('var frame = frame.push(true);');\n\n      _this16.compile(block.body, tmpFrame);\n\n      _this16._emitFuncEnd();\n    });\n\n    this._emitLine('return {');\n\n    blocks.forEach(function (block, i) {\n      var blockName = \"b_\" + block.name.value;\n\n      _this16._emitLine(blockName + \": \" + blockName + \",\");\n    });\n\n    this._emitLine('root: root\\n};');\n  };\n\n  _proto.compile = function compile(node, frame) {\n    var _compile = this['compile' + node.typename];\n\n    if (_compile) {\n      _compile.call(this, node, frame);\n    } else {\n      this.fail(\"compile: Cannot compile node: \" + node.typename, node.lineno, node.colno);\n    }\n  };\n\n  _proto.getCode = function getCode() {\n    return this.codebuf.join('');\n  };\n\n  return Compiler;\n}(Obj);\n\nmodule.exports = {\n  compile: function compile(src, asyncFilters, extensions, name, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var c = new Compiler(name, opts.throwOnUndefined); // Run the extension preprocessors against the source.\n\n    var preprocessors = (extensions || []).map(function (ext) {\n      return ext.preprocess;\n    }).filter(function (f) {\n      return !!f;\n    });\n    var processedSrc = preprocessors.reduce(function (s, processor) {\n      return processor(s);\n    }, src);\n    c.compile(transformer.transform(parser.parse(processedSrc, extensions, opts), asyncFilters, name));\n    return c.getCode();\n  },\n  Compiler: Compiler\n};","'use strict';\n\nvar lib = require('./lib');\n\nvar r = require('./runtime');\n\nvar _exports = module.exports = {};\n\nfunction normalize(value, defaultValue) {\n  if (value === null || value === undefined || value === false) {\n    return defaultValue;\n  }\n\n  return value;\n}\n\n_exports.abs = Math.abs;\n\nfunction isNaN(num) {\n  return num !== num; // eslint-disable-line no-self-compare\n}\n\nfunction batch(arr, linecount, fillWith) {\n  var i;\n  var res = [];\n  var tmp = [];\n\n  for (i = 0; i < arr.length; i++) {\n    if (i % linecount === 0 && tmp.length) {\n      res.push(tmp);\n      tmp = [];\n    }\n\n    tmp.push(arr[i]);\n  }\n\n  if (tmp.length) {\n    if (fillWith) {\n      for (i = tmp.length; i < linecount; i++) {\n        tmp.push(fillWith);\n      }\n    }\n\n    res.push(tmp);\n  }\n\n  return res;\n}\n\n_exports.batch = batch;\n\nfunction capitalize(str) {\n  str = normalize(str, '');\n  var ret = str.toLowerCase();\n  return r.copySafeness(str, ret.charAt(0).toUpperCase() + ret.slice(1));\n}\n\n_exports.capitalize = capitalize;\n\nfunction center(str, width) {\n  str = normalize(str, '');\n  width = width || 80;\n\n  if (str.length >= width) {\n    return str;\n  }\n\n  var spaces = width - str.length;\n  var pre = lib.repeat(' ', spaces / 2 - spaces % 2);\n  var post = lib.repeat(' ', spaces / 2);\n  return r.copySafeness(str, pre + str + post);\n}\n\n_exports.center = center;\n\nfunction default_(val, def, bool) {\n  if (bool) {\n    return val || def;\n  } else {\n    return val !== undefined ? val : def;\n  }\n} // TODO: it is confusing to export something called 'default'\n\n\n_exports['default'] = default_; // eslint-disable-line dot-notation\n\nfunction dictsort(val, caseSensitive, by) {\n  if (!lib.isObject(val)) {\n    throw new lib.TemplateError('dictsort filter: val must be an object');\n  }\n\n  var array = []; // deliberately include properties from the object's prototype\n\n  for (var k in val) {\n    // eslint-disable-line guard-for-in, no-restricted-syntax\n    array.push([k, val[k]]);\n  }\n\n  var si;\n\n  if (by === undefined || by === 'key') {\n    si = 0;\n  } else if (by === 'value') {\n    si = 1;\n  } else {\n    throw new lib.TemplateError('dictsort filter: You can only sort by either key or value');\n  }\n\n  array.sort(function (t1, t2) {\n    var a = t1[si];\n    var b = t2[si];\n\n    if (!caseSensitive) {\n      if (lib.isString(a)) {\n        a = a.toUpperCase();\n      }\n\n      if (lib.isString(b)) {\n        b = b.toUpperCase();\n      }\n    }\n\n    return a > b ? 1 : a === b ? 0 : -1; // eslint-disable-line no-nested-ternary\n  });\n  return array;\n}\n\n_exports.dictsort = dictsort;\n\nfunction dump(obj, spaces) {\n  return JSON.stringify(obj, null, spaces);\n}\n\n_exports.dump = dump;\n\nfunction escape(str) {\n  if (str instanceof r.SafeString) {\n    return str;\n  }\n\n  str = str === null || str === undefined ? '' : str;\n  return r.markSafe(lib.escape(str.toString()));\n}\n\n_exports.escape = escape;\n\nfunction safe(str) {\n  if (str instanceof r.SafeString) {\n    return str;\n  }\n\n  str = str === null || str === undefined ? '' : str;\n  return r.markSafe(str.toString());\n}\n\n_exports.safe = safe;\n\nfunction first(arr) {\n  return arr[0];\n}\n\n_exports.first = first;\n\nfunction forceescape(str) {\n  str = str === null || str === undefined ? '' : str;\n  return r.markSafe(lib.escape(str.toString()));\n}\n\n_exports.forceescape = forceescape;\n\nfunction groupby(arr, attr) {\n  return lib.groupBy(arr, attr, this.env.opts.throwOnUndefined);\n}\n\n_exports.groupby = groupby;\n\nfunction indent(str, width, indentfirst) {\n  str = normalize(str, '');\n\n  if (str === '') {\n    return '';\n  }\n\n  width = width || 4; // let res = '';\n\n  var lines = str.split('\\n');\n  var sp = lib.repeat(' ', width);\n  var res = lines.map(function (l, i) {\n    return i === 0 && !indentfirst ? l : \"\" + sp + l;\n  }).join('\\n');\n  return r.copySafeness(str, res);\n}\n\n_exports.indent = indent;\n\nfunction join(arr, del, attr) {\n  del = del || '';\n\n  if (attr) {\n    arr = lib.map(arr, function (v) {\n      return v[attr];\n    });\n  }\n\n  return arr.join(del);\n}\n\n_exports.join = join;\n\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\n\n_exports.last = last;\n\nfunction lengthFilter(val) {\n  var value = normalize(val, '');\n\n  if (value !== undefined) {\n    if (typeof Map === 'function' && value instanceof Map || typeof Set === 'function' && value instanceof Set) {\n      // ECMAScript 2015 Maps and Sets\n      return value.size;\n    }\n\n    if (lib.isObject(value) && !(value instanceof r.SafeString)) {\n      // Objects (besides SafeStrings), non-primative Arrays\n      return lib.keys(value).length;\n    }\n\n    return value.length;\n  }\n\n  return 0;\n}\n\n_exports.length = lengthFilter;\n\nfunction list(val) {\n  if (lib.isString(val)) {\n    return val.split('');\n  } else if (lib.isObject(val)) {\n    return lib._entries(val || {}).map(function (_ref) {\n      var key = _ref[0],\n          value = _ref[1];\n      return {\n        key: key,\n        value: value\n      };\n    });\n  } else if (lib.isArray(val)) {\n    return val;\n  } else {\n    throw new lib.TemplateError('list filter: type not iterable');\n  }\n}\n\n_exports.list = list;\n\nfunction lower(str) {\n  str = normalize(str, '');\n  return str.toLowerCase();\n}\n\n_exports.lower = lower;\n\nfunction nl2br(str) {\n  if (str === null || str === undefined) {\n    return '';\n  }\n\n  return r.copySafeness(str, str.replace(/\\r\\n|\\n/g, '<br />\\n'));\n}\n\n_exports.nl2br = nl2br;\n\nfunction random(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\n_exports.random = random;\n/**\n * Construct select or reject filter\n *\n * @param {boolean} expectedTestResult\n * @returns {function(array, string, *): array}\n */\n\nfunction getSelectOrReject(expectedTestResult) {\n  function filter(arr, testName, secondArg) {\n    if (testName === void 0) {\n      testName = 'truthy';\n    }\n\n    var context = this;\n    var test = context.env.getTest(testName);\n    return lib.toArray(arr).filter(function examineTestResult(item) {\n      return test.call(context, item, secondArg) === expectedTestResult;\n    });\n  }\n\n  return filter;\n}\n\n_exports.reject = getSelectOrReject(false);\n\nfunction rejectattr(arr, attr) {\n  return arr.filter(function (item) {\n    return !item[attr];\n  });\n}\n\n_exports.rejectattr = rejectattr;\n_exports.select = getSelectOrReject(true);\n\nfunction selectattr(arr, attr) {\n  return arr.filter(function (item) {\n    return !!item[attr];\n  });\n}\n\n_exports.selectattr = selectattr;\n\nfunction replace(str, old, new_, maxCount) {\n  var originalStr = str;\n\n  if (old instanceof RegExp) {\n    return str.replace(old, new_);\n  }\n\n  if (typeof maxCount === 'undefined') {\n    maxCount = -1;\n  }\n\n  var res = ''; // Output\n  // Cast Numbers in the search term to string\n\n  if (typeof old === 'number') {\n    old = '' + old;\n  } else if (typeof old !== 'string') {\n    // If it is something other than number or string,\n    // return the original string\n    return str;\n  } // Cast numbers in the replacement to string\n\n\n  if (typeof str === 'number') {\n    str = '' + str;\n  } // If by now, we don't have a string, throw it back\n\n\n  if (typeof str !== 'string' && !(str instanceof r.SafeString)) {\n    return str;\n  } // ShortCircuits\n\n\n  if (old === '') {\n    // Mimic the python behaviour: empty string is replaced\n    // by replacement e.g. \"abc\"|replace(\"\", \".\") -> .a.b.c.\n    res = new_ + str.split('').join(new_) + new_;\n    return r.copySafeness(str, res);\n  }\n\n  var nextIndex = str.indexOf(old); // if # of replacements to perform is 0, or the string to does\n  // not contain the old value, return the string\n\n  if (maxCount === 0 || nextIndex === -1) {\n    return str;\n  }\n\n  var pos = 0;\n  var count = 0; // # of replacements made\n\n  while (nextIndex > -1 && (maxCount === -1 || count < maxCount)) {\n    // Grab the next chunk of src string and add it with the\n    // replacement, to the result\n    res += str.substring(pos, nextIndex) + new_; // Increment our pointer in the src string\n\n    pos = nextIndex + old.length;\n    count++; // See if there are any more replacements to be made\n\n    nextIndex = str.indexOf(old, pos);\n  } // We've either reached the end, or done the max # of\n  // replacements, tack on any remaining string\n\n\n  if (pos < str.length) {\n    res += str.substring(pos);\n  }\n\n  return r.copySafeness(originalStr, res);\n}\n\n_exports.replace = replace;\n\nfunction reverse(val) {\n  var arr;\n\n  if (lib.isString(val)) {\n    arr = list(val);\n  } else {\n    // Copy it\n    arr = lib.map(val, function (v) {\n      return v;\n    });\n  }\n\n  arr.reverse();\n\n  if (lib.isString(val)) {\n    return r.copySafeness(val, arr.join(''));\n  }\n\n  return arr;\n}\n\n_exports.reverse = reverse;\n\nfunction round(val, precision, method) {\n  precision = precision || 0;\n  var factor = Math.pow(10, precision);\n  var rounder;\n\n  if (method === 'ceil') {\n    rounder = Math.ceil;\n  } else if (method === 'floor') {\n    rounder = Math.floor;\n  } else {\n    rounder = Math.round;\n  }\n\n  return rounder(val * factor) / factor;\n}\n\n_exports.round = round;\n\nfunction slice(arr, slices, fillWith) {\n  var sliceLength = Math.floor(arr.length / slices);\n  var extra = arr.length % slices;\n  var res = [];\n  var offset = 0;\n\n  for (var i = 0; i < slices; i++) {\n    var start = offset + i * sliceLength;\n\n    if (i < extra) {\n      offset++;\n    }\n\n    var end = offset + (i + 1) * sliceLength;\n    var currSlice = arr.slice(start, end);\n\n    if (fillWith && i >= extra) {\n      currSlice.push(fillWith);\n    }\n\n    res.push(currSlice);\n  }\n\n  return res;\n}\n\n_exports.slice = slice;\n\nfunction sum(arr, attr, start) {\n  if (start === void 0) {\n    start = 0;\n  }\n\n  if (attr) {\n    arr = lib.map(arr, function (v) {\n      return v[attr];\n    });\n  }\n\n  return start + arr.reduce(function (a, b) {\n    return a + b;\n  }, 0);\n}\n\n_exports.sum = sum;\n_exports.sort = r.makeMacro(['value', 'reverse', 'case_sensitive', 'attribute'], [], function sortFilter(arr, reversed, caseSens, attr) {\n  var _this = this;\n\n  // Copy it\n  var array = lib.map(arr, function (v) {\n    return v;\n  });\n  var getAttribute = lib.getAttrGetter(attr);\n  array.sort(function (a, b) {\n    var x = attr ? getAttribute(a) : a;\n    var y = attr ? getAttribute(b) : b;\n\n    if (_this.env.opts.throwOnUndefined && attr && (x === undefined || y === undefined)) {\n      throw new TypeError(\"sort: attribute \\\"\" + attr + \"\\\" resolved to undefined\");\n    }\n\n    if (!caseSens && lib.isString(x) && lib.isString(y)) {\n      x = x.toLowerCase();\n      y = y.toLowerCase();\n    }\n\n    if (x < y) {\n      return reversed ? 1 : -1;\n    } else if (x > y) {\n      return reversed ? -1 : 1;\n    } else {\n      return 0;\n    }\n  });\n  return array;\n});\n\nfunction string(obj) {\n  return r.copySafeness(obj, obj);\n}\n\n_exports.string = string;\n\nfunction striptags(input, preserveLinebreaks) {\n  input = normalize(input, '');\n  var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>|<!--[\\s\\S]*?-->/gi;\n  var trimmedInput = trim(input.replace(tags, ''));\n  var res = '';\n\n  if (preserveLinebreaks) {\n    res = trimmedInput.replace(/^ +| +$/gm, '') // remove leading and trailing spaces\n    .replace(/ +/g, ' ') // squash adjacent spaces\n    .replace(/(\\r\\n)/g, '\\n') // normalize linebreaks (CRLF -> LF)\n    .replace(/\\n\\n\\n+/g, '\\n\\n'); // squash abnormal adjacent linebreaks\n  } else {\n    res = trimmedInput.replace(/\\s+/gi, ' ');\n  }\n\n  return r.copySafeness(input, res);\n}\n\n_exports.striptags = striptags;\n\nfunction title(str) {\n  str = normalize(str, '');\n  var words = str.split(' ').map(function (word) {\n    return capitalize(word);\n  });\n  return r.copySafeness(str, words.join(' '));\n}\n\n_exports.title = title;\n\nfunction trim(str) {\n  return r.copySafeness(str, str.replace(/^\\s*|\\s*$/g, ''));\n}\n\n_exports.trim = trim;\n\nfunction truncate(input, length, killwords, end) {\n  var orig = input;\n  input = normalize(input, '');\n  length = length || 255;\n\n  if (input.length <= length) {\n    return input;\n  }\n\n  if (killwords) {\n    input = input.substring(0, length);\n  } else {\n    var idx = input.lastIndexOf(' ', length);\n\n    if (idx === -1) {\n      idx = length;\n    }\n\n    input = input.substring(0, idx);\n  }\n\n  input += end !== undefined && end !== null ? end : '...';\n  return r.copySafeness(orig, input);\n}\n\n_exports.truncate = truncate;\n\nfunction upper(str) {\n  str = normalize(str, '');\n  return str.toUpperCase();\n}\n\n_exports.upper = upper;\n\nfunction urlencode(obj) {\n  var enc = encodeURIComponent;\n\n  if (lib.isString(obj)) {\n    return enc(obj);\n  } else {\n    var keyvals = lib.isArray(obj) ? obj : lib._entries(obj);\n    return keyvals.map(function (_ref2) {\n      var k = _ref2[0],\n          v = _ref2[1];\n      return enc(k) + \"=\" + enc(v);\n    }).join('&');\n  }\n}\n\n_exports.urlencode = urlencode; // For the jinja regexp, see\n// https://github.com/mitsuhiko/jinja2/blob/f15b814dcba6aa12bc74d1f7d0c881d55f7126be/jinja2/utils.py#L20-L23\n\nvar puncRe = /^(?:\\(|<|&lt;)?(.*?)(?:\\.|,|\\)|\\n|&gt;)?$/; // from http://blog.gerv.net/2011/05/html5_email_address_regexp/\n\nvar emailRe = /^[\\w.!#$%&'*+\\-\\/=?\\^`{|}~]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)+$/i;\nvar httpHttpsRe = /^https?:\\/\\/.*$/;\nvar wwwRe = /^www\\./;\nvar tldRe = /\\.(?:org|net|com)(?:\\:|\\/|$)/;\n\nfunction urlize(str, length, nofollow) {\n  if (isNaN(length)) {\n    length = Infinity;\n  }\n\n  var noFollowAttr = nofollow === true ? ' rel=\"nofollow\"' : '';\n  var words = str.split(/(\\s+)/).filter(function (word) {\n    // If the word has no length, bail. This can happen for str with\n    // trailing whitespace.\n    return word && word.length;\n  }).map(function (word) {\n    var matches = word.match(puncRe);\n    var possibleUrl = matches ? matches[1] : word;\n    var shortUrl = possibleUrl.substr(0, length); // url that starts with http or https\n\n    if (httpHttpsRe.test(possibleUrl)) {\n      return \"<a href=\\\"\" + possibleUrl + \"\\\"\" + noFollowAttr + \">\" + shortUrl + \"</a>\";\n    } // url that starts with www.\n\n\n    if (wwwRe.test(possibleUrl)) {\n      return \"<a href=\\\"http://\" + possibleUrl + \"\\\"\" + noFollowAttr + \">\" + shortUrl + \"</a>\";\n    } // an email address of the form username@domain.tld\n\n\n    if (emailRe.test(possibleUrl)) {\n      return \"<a href=\\\"mailto:\" + possibleUrl + \"\\\">\" + possibleUrl + \"</a>\";\n    } // url that ends in .com, .org or .net that is not an email address\n\n\n    if (tldRe.test(possibleUrl)) {\n      return \"<a href=\\\"http://\" + possibleUrl + \"\\\"\" + noFollowAttr + \">\" + shortUrl + \"</a>\";\n    }\n\n    return word;\n  });\n  return words.join('');\n}\n\n_exports.urlize = urlize;\n\nfunction wordcount(str) {\n  str = normalize(str, '');\n  var words = str ? str.match(/\\w+/g) : null;\n  return words ? words.length : null;\n}\n\n_exports.wordcount = wordcount;\n\nfunction float(val, def) {\n  var res = parseFloat(val);\n  return isNaN(res) ? def : res;\n}\n\n_exports.float = float;\nvar intFilter = r.makeMacro(['value', 'default', 'base'], [], function doInt(value, defaultValue, base) {\n  if (base === void 0) {\n    base = 10;\n  }\n\n  var res = parseInt(value, base);\n  return isNaN(res) ? defaultValue : res;\n});\n_exports.int = intFilter; // Aliases\n\n_exports.d = _exports.default;\n_exports.e = _exports.escape;","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar path = require('path');\n\nvar _require = require('./object'),\n    EmitterObj = _require.EmitterObj;\n\nmodule.exports = /*#__PURE__*/function (_EmitterObj) {\n  _inheritsLoose(Loader, _EmitterObj);\n\n  function Loader() {\n    return _EmitterObj.apply(this, arguments) || this;\n  }\n\n  var _proto = Loader.prototype;\n\n  _proto.resolve = function resolve(from, to) {\n    return path.resolve(path.dirname(from), to);\n  };\n\n  _proto.isRelative = function isRelative(filename) {\n    return filename.indexOf('./') === 0 || filename.indexOf('../') === 0;\n  };\n\n  return Loader;\n}(EmitterObj);","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar Loader = require('./loader');\n\nvar PrecompiledLoader = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(PrecompiledLoader, _Loader);\n\n  function PrecompiledLoader(compiledTemplates) {\n    var _this;\n\n    _this = _Loader.call(this) || this;\n    _this.precompiled = compiledTemplates || {};\n    return _this;\n  }\n\n  var _proto = PrecompiledLoader.prototype;\n\n  _proto.getSource = function getSource(name) {\n    if (this.precompiled[name]) {\n      return {\n        src: {\n          type: 'code',\n          obj: this.precompiled[name]\n        },\n        path: name\n      };\n    }\n\n    return null;\n  };\n\n  return PrecompiledLoader;\n}(Loader);\n\nmodule.exports = {\n  PrecompiledLoader: PrecompiledLoader\n};","/* eslint-disable no-console */\n'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar fs = require('fs');\n\nvar path = require('path');\n\nvar Loader = require('./loader');\n\nvar _require = require('./precompiled-loader.js'),\n    PrecompiledLoader = _require.PrecompiledLoader;\n\nvar chokidar;\n\nvar FileSystemLoader = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(FileSystemLoader, _Loader);\n\n  function FileSystemLoader(searchPaths, opts) {\n    var _this;\n\n    _this = _Loader.call(this) || this;\n\n    if (typeof opts === 'boolean') {\n      console.log('[nunjucks] Warning: you passed a boolean as the second ' + 'argument to FileSystemLoader, but it now takes an options ' + 'object. See http://mozilla.github.io/nunjucks/api.html#filesystemloader');\n    }\n\n    opts = opts || {};\n    _this.pathsToNames = {};\n    _this.noCache = !!opts.noCache;\n\n    if (searchPaths) {\n      searchPaths = Array.isArray(searchPaths) ? searchPaths : [searchPaths]; // For windows, convert to forward slashes\n\n      _this.searchPaths = searchPaths.map(path.normalize);\n    } else {\n      _this.searchPaths = ['.'];\n    }\n\n    if (opts.watch) {\n      // Watch all the templates in the paths and fire an event when\n      // they change\n      try {\n        chokidar = require('chokidar'); // eslint-disable-line global-require\n      } catch (e) {\n        throw new Error('watch requires chokidar to be installed');\n      }\n\n      var paths = _this.searchPaths.filter(fs.existsSync);\n\n      var watcher = chokidar.watch(paths);\n      watcher.on('all', function (event, fullname) {\n        fullname = path.resolve(fullname);\n\n        if (event === 'change' && fullname in _this.pathsToNames) {\n          _this.emit('update', _this.pathsToNames[fullname], fullname);\n        }\n      });\n      watcher.on('error', function (error) {\n        console.log('Watcher error: ' + error);\n      });\n    }\n\n    return _this;\n  }\n\n  var _proto = FileSystemLoader.prototype;\n\n  _proto.getSource = function getSource(name) {\n    var fullpath = null;\n    var paths = this.searchPaths;\n\n    for (var i = 0; i < paths.length; i++) {\n      var basePath = path.resolve(paths[i]);\n      var p = path.resolve(paths[i], name); // Only allow the current directory and anything\n      // underneath it to be searched\n\n      if (p.indexOf(basePath) === 0 && fs.existsSync(p)) {\n        fullpath = p;\n        break;\n      }\n    }\n\n    if (!fullpath) {\n      return null;\n    }\n\n    this.pathsToNames[fullpath] = name;\n    var source = {\n      src: fs.readFileSync(fullpath, 'utf-8'),\n      path: fullpath,\n      noCache: this.noCache\n    };\n    this.emit('load', name, source);\n    return source;\n  };\n\n  return FileSystemLoader;\n}(Loader);\n\nvar NodeResolveLoader = /*#__PURE__*/function (_Loader2) {\n  _inheritsLoose(NodeResolveLoader, _Loader2);\n\n  function NodeResolveLoader(opts) {\n    var _this2;\n\n    _this2 = _Loader2.call(this) || this;\n    opts = opts || {};\n    _this2.pathsToNames = {};\n    _this2.noCache = !!opts.noCache;\n\n    if (opts.watch) {\n      try {\n        chokidar = require('chokidar'); // eslint-disable-line global-require\n      } catch (e) {\n        throw new Error('watch requires chokidar to be installed');\n      }\n\n      _this2.watcher = chokidar.watch();\n\n      _this2.watcher.on('change', function (fullname) {\n        _this2.emit('update', _this2.pathsToNames[fullname], fullname);\n      });\n\n      _this2.watcher.on('error', function (error) {\n        console.log('Watcher error: ' + error);\n      });\n\n      _this2.on('load', function (name, source) {\n        _this2.watcher.add(source.path);\n      });\n    }\n\n    return _this2;\n  }\n\n  var _proto2 = NodeResolveLoader.prototype;\n\n  _proto2.getSource = function getSource(name) {\n    // Don't allow file-system traversal\n    if (/^\\.?\\.?(\\/|\\\\)/.test(name)) {\n      return null;\n    }\n\n    if (/^[A-Z]:/.test(name)) {\n      return null;\n    }\n\n    var fullpath;\n\n    try {\n      fullpath = require.resolve(name);\n    } catch (e) {\n      return null;\n    }\n\n    this.pathsToNames[fullpath] = name;\n    var source = {\n      src: fs.readFileSync(fullpath, 'utf-8'),\n      path: fullpath,\n      noCache: this.noCache\n    };\n    this.emit('load', name, source);\n    return source;\n  };\n\n  return NodeResolveLoader;\n}(Loader);\n\nmodule.exports = {\n  FileSystemLoader: FileSystemLoader,\n  PrecompiledLoader: PrecompiledLoader,\n  NodeResolveLoader: NodeResolveLoader\n};","\"use strict\";\n\n// This file will automatically be rewired to web-loader.js when\n// building for the browser\nmodule.exports = require('./node-loaders');","'use strict';\n\nfunction _cycler(items) {\n  var index = -1;\n  return {\n    current: null,\n    reset: function reset() {\n      index = -1;\n      this.current = null;\n    },\n    next: function next() {\n      index++;\n\n      if (index >= items.length) {\n        index = 0;\n      }\n\n      this.current = items[index];\n      return this.current;\n    }\n  };\n}\n\nfunction _joiner(sep) {\n  sep = sep || ',';\n  var first = true;\n  return function () {\n    var val = first ? '' : sep;\n    first = false;\n    return val;\n  };\n} // Making this a function instead so it returns a new object\n// each time it's called. That way, if something like an environment\n// uses it, they will each have their own copy.\n\n\nfunction globals() {\n  return {\n    range: function range(start, stop, step) {\n      if (typeof stop === 'undefined') {\n        stop = start;\n        start = 0;\n        step = 1;\n      } else if (!step) {\n        step = 1;\n      }\n\n      var arr = [];\n\n      if (step > 0) {\n        for (var i = start; i < stop; i += step) {\n          arr.push(i);\n        }\n      } else {\n        for (var _i = start; _i > stop; _i += step) {\n          // eslint-disable-line for-direction\n          arr.push(_i);\n        }\n      }\n\n      return arr;\n    },\n    cycler: function cycler() {\n      return _cycler(Array.prototype.slice.call(arguments));\n    },\n    joiner: function joiner(sep) {\n      return _joiner(sep);\n    }\n  };\n}\n\nmodule.exports = globals;","'use strict';\n\nvar SafeString = require('./runtime').SafeString;\n/**\n * Returns `true` if the object is a function, otherwise `false`.\n * @param { any } value\n * @returns { boolean }\n */\n\n\nfunction callable(value) {\n  return typeof value === 'function';\n}\n\nexports.callable = callable;\n/**\n * Returns `true` if the object is strictly not `undefined`.\n * @param { any } value\n * @returns { boolean }\n */\n\nfunction defined(value) {\n  return value !== undefined;\n}\n\nexports.defined = defined;\n/**\n * Returns `true` if the operand (one) is divisble by the test's argument\n * (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\n\nfunction divisibleby(one, two) {\n  return one % two === 0;\n}\n\nexports.divisibleby = divisibleby;\n/**\n * Returns true if the string has been escaped (i.e., is a SafeString).\n * @param { any } value\n * @returns { boolean }\n */\n\nfunction escaped(value) {\n  return value instanceof SafeString;\n}\n\nexports.escaped = escaped;\n/**\n * Returns `true` if the arguments are strictly equal.\n * @param { any } one\n * @param { any } two\n */\n\nfunction equalto(one, two) {\n  return one === two;\n}\n\nexports.equalto = equalto; // Aliases\n\nexports.eq = exports.equalto;\nexports.sameas = exports.equalto;\n/**\n * Returns `true` if the value is evenly divisible by 2.\n * @param { number } value\n * @returns { boolean }\n */\n\nfunction even(value) {\n  return value % 2 === 0;\n}\n\nexports.even = even;\n/**\n * Returns `true` if the value is falsy - if I recall correctly, '', 0, false,\n * undefined, NaN or null. I don't know if we should stick to the default JS\n * behavior or attempt to replicate what Python believes should be falsy (i.e.,\n * empty arrays, empty dicts, not 0...).\n * @param { any } value\n * @returns { boolean }\n */\n\nfunction falsy(value) {\n  return !value;\n}\n\nexports.falsy = falsy;\n/**\n * Returns `true` if the operand (one) is greater or equal to the test's\n * argument (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\n\nfunction ge(one, two) {\n  return one >= two;\n}\n\nexports.ge = ge;\n/**\n * Returns `true` if the operand (one) is greater than the test's argument\n * (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\n\nfunction greaterthan(one, two) {\n  return one > two;\n}\n\nexports.greaterthan = greaterthan; // alias\n\nexports.gt = exports.greaterthan;\n/**\n * Returns `true` if the operand (one) is less than or equal to the test's\n * argument (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\n\nfunction le(one, two) {\n  return one <= two;\n}\n\nexports.le = le;\n/**\n * Returns `true` if the operand (one) is less than the test's passed argument\n * (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\n\nfunction lessthan(one, two) {\n  return one < two;\n}\n\nexports.lessthan = lessthan; // alias\n\nexports.lt = exports.lessthan;\n/**\n * Returns `true` if the string is lowercased.\n * @param { string } value\n * @returns { boolean }\n */\n\nfunction lower(value) {\n  return value.toLowerCase() === value;\n}\n\nexports.lower = lower;\n/**\n * Returns `true` if the operand (one) is less than or equal to the test's\n * argument (two).\n * @param { number } one\n * @param { number } two\n * @returns { boolean }\n */\n\nfunction ne(one, two) {\n  return one !== two;\n}\n\nexports.ne = ne;\n/**\n * Returns true if the value is strictly equal to `null`.\n * @param { any }\n * @returns { boolean }\n */\n\nfunction nullTest(value) {\n  return value === null;\n}\n\nexports.null = nullTest;\n/**\n * Returns true if value is a number.\n * @param { any }\n * @returns { boolean }\n */\n\nfunction number(value) {\n  return typeof value === 'number';\n}\n\nexports.number = number;\n/**\n * Returns `true` if the value is *not* evenly divisible by 2.\n * @param { number } value\n * @returns { boolean }\n */\n\nfunction odd(value) {\n  return value % 2 === 1;\n}\n\nexports.odd = odd;\n/**\n * Returns `true` if the value is a string, `false` if not.\n * @param { any } value\n * @returns { boolean }\n */\n\nfunction string(value) {\n  return typeof value === 'string';\n}\n\nexports.string = string;\n/**\n * Returns `true` if the value is not in the list of things considered falsy:\n * '', null, undefined, 0, NaN and false.\n * @param { any } value\n * @returns { boolean }\n */\n\nfunction truthy(value) {\n  return !!value;\n}\n\nexports.truthy = truthy;\n/**\n * Returns `true` if the value is undefined.\n * @param { any } value\n * @returns { boolean }\n */\n\nfunction undefinedTest(value) {\n  return value === undefined;\n}\n\nexports.undefined = undefinedTest;\n/**\n * Returns `true` if the string is uppercased.\n * @param { string } value\n * @returns { boolean }\n */\n\nfunction upper(value) {\n  return value.toUpperCase() === value;\n}\n\nexports.upper = upper;\n/**\n * If ES6 features are available, returns `true` if the value implements the\n * `Symbol.iterator` method. If not, it's a string or Array.\n *\n * Could potentially cause issues if a browser exists that has Set and Map but\n * not Symbol.\n *\n * @param { any } value\n * @returns { boolean }\n */\n\nfunction iterable(value) {\n  if (typeof Symbol !== 'undefined') {\n    return !!value[Symbol.iterator];\n  } else {\n    return Array.isArray(value) || typeof value === 'string';\n  }\n}\n\nexports.iterable = iterable;\n/**\n * If ES6 features are available, returns `true` if the value is an object hash\n * or an ES6 Map. Otherwise just return if it's an object hash.\n * @param { any } value\n * @returns { boolean }\n */\n\nfunction mapping(value) {\n  // only maps and object hashes\n  var bool = value !== null && value !== undefined && typeof value === 'object' && !Array.isArray(value);\n\n  if (Set) {\n    return bool && !(value instanceof Set);\n  } else {\n    return bool;\n  }\n}\n\nexports.mapping = mapping;","\"use strict\";\n\nvar path = require('path');\n\nmodule.exports = function express(env, app) {\n  function NunjucksView(name, opts) {\n    this.name = name;\n    this.path = name;\n    this.defaultEngine = opts.defaultEngine;\n    this.ext = path.extname(name);\n\n    if (!this.ext && !this.defaultEngine) {\n      throw new Error('No default engine was specified and no extension was provided.');\n    }\n\n    if (!this.ext) {\n      this.name += this.ext = (this.defaultEngine[0] !== '.' ? '.' : '') + this.defaultEngine;\n    }\n  }\n\n  NunjucksView.prototype.render = function render(opts, cb) {\n    env.render(this.name, opts, cb);\n  };\n\n  app.set('view', NunjucksView);\n  app.set('nunjucksEnv', env);\n  return env;\n};","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar asap = require('asap');\n\nvar _waterfall = require('a-sync-waterfall');\n\nvar lib = require('./lib');\n\nvar compiler = require('./compiler');\n\nvar filters = require('./filters');\n\nvar _require = require('./loaders'),\n    FileSystemLoader = _require.FileSystemLoader,\n    WebLoader = _require.WebLoader,\n    PrecompiledLoader = _require.PrecompiledLoader;\n\nvar tests = require('./tests');\n\nvar globals = require('./globals');\n\nvar _require2 = require('./object'),\n    Obj = _require2.Obj,\n    EmitterObj = _require2.EmitterObj;\n\nvar globalRuntime = require('./runtime');\n\nvar handleError = globalRuntime.handleError,\n    Frame = globalRuntime.Frame;\n\nvar expressApp = require('./express-app'); // If the user is using the async API, *always* call it\n// asynchronously even if the template was synchronous.\n\n\nfunction callbackAsap(cb, err, res) {\n  asap(function () {\n    cb(err, res);\n  });\n}\n/**\n * A no-op template, for use with {% include ignore missing %}\n */\n\n\nvar noopTmplSrc = {\n  type: 'code',\n  obj: {\n    root: function root(env, context, frame, runtime, cb) {\n      try {\n        cb(null, '');\n      } catch (e) {\n        cb(handleError(e, null, null));\n      }\n    }\n  }\n};\n\nvar Environment = /*#__PURE__*/function (_EmitterObj) {\n  _inheritsLoose(Environment, _EmitterObj);\n\n  function Environment() {\n    return _EmitterObj.apply(this, arguments) || this;\n  }\n\n  var _proto = Environment.prototype;\n\n  _proto.init = function init(loaders, opts) {\n    var _this = this;\n\n    // The dev flag determines the trace that'll be shown on errors.\n    // If set to true, returns the full trace from the error point,\n    // otherwise will return trace starting from Template.render\n    // (the full trace from within nunjucks may confuse developers using\n    //  the library)\n    // defaults to false\n    opts = this.opts = opts || {};\n    this.opts.dev = !!opts.dev; // The autoescape flag sets global autoescaping. If true,\n    // every string variable will be escaped by default.\n    // If false, strings can be manually escaped using the `escape` filter.\n    // defaults to true\n\n    this.opts.autoescape = opts.autoescape != null ? opts.autoescape : true; // If true, this will make the system throw errors if trying\n    // to output a null or undefined value\n\n    this.opts.throwOnUndefined = !!opts.throwOnUndefined;\n    this.opts.trimBlocks = !!opts.trimBlocks;\n    this.opts.lstripBlocks = !!opts.lstripBlocks;\n    this.loaders = [];\n\n    if (!loaders) {\n      // The filesystem loader is only available server-side\n      if (FileSystemLoader) {\n        this.loaders = [new FileSystemLoader('views')];\n      } else if (WebLoader) {\n        this.loaders = [new WebLoader('/views')];\n      }\n    } else {\n      this.loaders = lib.isArray(loaders) ? loaders : [loaders];\n    } // It's easy to use precompiled templates: just include them\n    // before you configure nunjucks and this will automatically\n    // pick it up and use it\n\n\n    if (typeof window !== 'undefined' && window.nunjucksPrecompiled) {\n      this.loaders.unshift(new PrecompiledLoader(window.nunjucksPrecompiled));\n    }\n\n    this._initLoaders();\n\n    this.globals = globals();\n    this.filters = {};\n    this.tests = {};\n    this.asyncFilters = [];\n    this.extensions = {};\n    this.extensionsList = [];\n\n    lib._entries(filters).forEach(function (_ref) {\n      var name = _ref[0],\n          filter = _ref[1];\n      return _this.addFilter(name, filter);\n    });\n\n    lib._entries(tests).forEach(function (_ref2) {\n      var name = _ref2[0],\n          test = _ref2[1];\n      return _this.addTest(name, test);\n    });\n  };\n\n  _proto._initLoaders = function _initLoaders() {\n    var _this2 = this;\n\n    this.loaders.forEach(function (loader) {\n      // Caching and cache busting\n      loader.cache = {};\n\n      if (typeof loader.on === 'function') {\n        loader.on('update', function (name, fullname) {\n          loader.cache[name] = null;\n\n          _this2.emit('update', name, fullname, loader);\n        });\n        loader.on('load', function (name, source) {\n          _this2.emit('load', name, source, loader);\n        });\n      }\n    });\n  };\n\n  _proto.invalidateCache = function invalidateCache() {\n    this.loaders.forEach(function (loader) {\n      loader.cache = {};\n    });\n  };\n\n  _proto.addExtension = function addExtension(name, extension) {\n    extension.__name = name;\n    this.extensions[name] = extension;\n    this.extensionsList.push(extension);\n    return this;\n  };\n\n  _proto.removeExtension = function removeExtension(name) {\n    var extension = this.getExtension(name);\n\n    if (!extension) {\n      return;\n    }\n\n    this.extensionsList = lib.without(this.extensionsList, extension);\n    delete this.extensions[name];\n  };\n\n  _proto.getExtension = function getExtension(name) {\n    return this.extensions[name];\n  };\n\n  _proto.hasExtension = function hasExtension(name) {\n    return !!this.extensions[name];\n  };\n\n  _proto.addGlobal = function addGlobal(name, value) {\n    this.globals[name] = value;\n    return this;\n  };\n\n  _proto.getGlobal = function getGlobal(name) {\n    if (typeof this.globals[name] === 'undefined') {\n      throw new Error('global not found: ' + name);\n    }\n\n    return this.globals[name];\n  };\n\n  _proto.addFilter = function addFilter(name, func, async) {\n    var wrapped = func;\n\n    if (async) {\n      this.asyncFilters.push(name);\n    }\n\n    this.filters[name] = wrapped;\n    return this;\n  };\n\n  _proto.getFilter = function getFilter(name) {\n    if (!this.filters[name]) {\n      throw new Error('filter not found: ' + name);\n    }\n\n    return this.filters[name];\n  };\n\n  _proto.addTest = function addTest(name, func) {\n    this.tests[name] = func;\n    return this;\n  };\n\n  _proto.getTest = function getTest(name) {\n    if (!this.tests[name]) {\n      throw new Error('test not found: ' + name);\n    }\n\n    return this.tests[name];\n  };\n\n  _proto.resolveTemplate = function resolveTemplate(loader, parentName, filename) {\n    var isRelative = loader.isRelative && parentName ? loader.isRelative(filename) : false;\n    return isRelative && loader.resolve ? loader.resolve(parentName, filename) : filename;\n  };\n\n  _proto.getTemplate = function getTemplate(name, eagerCompile, parentName, ignoreMissing, cb) {\n    var _this3 = this;\n\n    var that = this;\n    var tmpl = null;\n\n    if (name && name.raw) {\n      // this fixes autoescape for templates referenced in symbols\n      name = name.raw;\n    }\n\n    if (lib.isFunction(parentName)) {\n      cb = parentName;\n      parentName = null;\n      eagerCompile = eagerCompile || false;\n    }\n\n    if (lib.isFunction(eagerCompile)) {\n      cb = eagerCompile;\n      eagerCompile = false;\n    }\n\n    if (name instanceof Template) {\n      tmpl = name;\n    } else if (typeof name !== 'string') {\n      throw new Error('template names must be a string: ' + name);\n    } else {\n      for (var i = 0; i < this.loaders.length; i++) {\n        var loader = this.loaders[i];\n        tmpl = loader.cache[this.resolveTemplate(loader, parentName, name)];\n\n        if (tmpl) {\n          break;\n        }\n      }\n    }\n\n    if (tmpl) {\n      if (eagerCompile) {\n        tmpl.compile();\n      }\n\n      if (cb) {\n        cb(null, tmpl);\n        return undefined;\n      } else {\n        return tmpl;\n      }\n    }\n\n    var syncResult;\n\n    var createTemplate = function createTemplate(err, info) {\n      if (!info && !err && !ignoreMissing) {\n        err = new Error('template not found: ' + name);\n      }\n\n      if (err) {\n        if (cb) {\n          cb(err);\n          return;\n        } else {\n          throw err;\n        }\n      }\n\n      var newTmpl;\n\n      if (!info) {\n        newTmpl = new Template(noopTmplSrc, _this3, '', eagerCompile);\n      } else {\n        newTmpl = new Template(info.src, _this3, info.path, eagerCompile);\n\n        if (!info.noCache) {\n          info.loader.cache[name] = newTmpl;\n        }\n      }\n\n      if (cb) {\n        cb(null, newTmpl);\n      } else {\n        syncResult = newTmpl;\n      }\n    };\n\n    lib.asyncIter(this.loaders, function (loader, i, next, done) {\n      function handle(err, src) {\n        if (err) {\n          done(err);\n        } else if (src) {\n          src.loader = loader;\n          done(null, src);\n        } else {\n          next();\n        }\n      } // Resolve name relative to parentName\n\n\n      name = that.resolveTemplate(loader, parentName, name);\n\n      if (loader.async) {\n        loader.getSource(name, handle);\n      } else {\n        handle(null, loader.getSource(name));\n      }\n    }, createTemplate);\n    return syncResult;\n  };\n\n  _proto.express = function express(app) {\n    return expressApp(this, app);\n  };\n\n  _proto.render = function render(name, ctx, cb) {\n    if (lib.isFunction(ctx)) {\n      cb = ctx;\n      ctx = null;\n    } // We support a synchronous API to make it easier to migrate\n    // existing code to async. This works because if you don't do\n    // anything async work, the whole thing is actually run\n    // synchronously.\n\n\n    var syncResult = null;\n    this.getTemplate(name, function (err, tmpl) {\n      if (err && cb) {\n        callbackAsap(cb, err);\n      } else if (err) {\n        throw err;\n      } else {\n        syncResult = tmpl.render(ctx, cb);\n      }\n    });\n    return syncResult;\n  };\n\n  _proto.renderString = function renderString(src, ctx, opts, cb) {\n    if (lib.isFunction(opts)) {\n      cb = opts;\n      opts = {};\n    }\n\n    opts = opts || {};\n    var tmpl = new Template(src, this, opts.path);\n    return tmpl.render(ctx, cb);\n  };\n\n  _proto.waterfall = function waterfall(tasks, callback, forceAsync) {\n    return _waterfall(tasks, callback, forceAsync);\n  };\n\n  return Environment;\n}(EmitterObj);\n\nvar Context = /*#__PURE__*/function (_Obj) {\n  _inheritsLoose(Context, _Obj);\n\n  function Context() {\n    return _Obj.apply(this, arguments) || this;\n  }\n\n  var _proto2 = Context.prototype;\n\n  _proto2.init = function init(ctx, blocks, env) {\n    var _this4 = this;\n\n    // Has to be tied to an environment so we can tap into its globals.\n    this.env = env || new Environment(); // Make a duplicate of ctx\n\n    this.ctx = lib.extend({}, ctx);\n    this.blocks = {};\n    this.exported = [];\n    lib.keys(blocks).forEach(function (name) {\n      _this4.addBlock(name, blocks[name]);\n    });\n  };\n\n  _proto2.lookup = function lookup(name) {\n    // This is one of the most called functions, so optimize for\n    // the typical case where the name isn't in the globals\n    if (name in this.env.globals && !(name in this.ctx)) {\n      return this.env.globals[name];\n    } else {\n      return this.ctx[name];\n    }\n  };\n\n  _proto2.setVariable = function setVariable(name, val) {\n    this.ctx[name] = val;\n  };\n\n  _proto2.getVariables = function getVariables() {\n    return this.ctx;\n  };\n\n  _proto2.addBlock = function addBlock(name, block) {\n    this.blocks[name] = this.blocks[name] || [];\n    this.blocks[name].push(block);\n    return this;\n  };\n\n  _proto2.getBlock = function getBlock(name) {\n    if (!this.blocks[name]) {\n      throw new Error('unknown block \"' + name + '\"');\n    }\n\n    return this.blocks[name][0];\n  };\n\n  _proto2.getSuper = function getSuper(env, name, block, frame, runtime, cb) {\n    var idx = lib.indexOf(this.blocks[name] || [], block);\n    var blk = this.blocks[name][idx + 1];\n    var context = this;\n\n    if (idx === -1 || !blk) {\n      throw new Error('no super block available for \"' + name + '\"');\n    }\n\n    blk(env, context, frame, runtime, cb);\n  };\n\n  _proto2.addExport = function addExport(name) {\n    this.exported.push(name);\n  };\n\n  _proto2.getExported = function getExported() {\n    var _this5 = this;\n\n    var exported = {};\n    this.exported.forEach(function (name) {\n      exported[name] = _this5.ctx[name];\n    });\n    return exported;\n  };\n\n  return Context;\n}(Obj);\n\nvar Template = /*#__PURE__*/function (_Obj2) {\n  _inheritsLoose(Template, _Obj2);\n\n  function Template() {\n    return _Obj2.apply(this, arguments) || this;\n  }\n\n  var _proto3 = Template.prototype;\n\n  _proto3.init = function init(src, env, path, eagerCompile) {\n    this.env = env || new Environment();\n\n    if (lib.isObject(src)) {\n      switch (src.type) {\n        case 'code':\n          this.tmplProps = src.obj;\n          break;\n\n        case 'string':\n          this.tmplStr = src.obj;\n          break;\n\n        default:\n          throw new Error(\"Unexpected template object type \" + src.type + \"; expected 'code', or 'string'\");\n      }\n    } else if (lib.isString(src)) {\n      this.tmplStr = src;\n    } else {\n      throw new Error('src must be a string or an object describing the source');\n    }\n\n    this.path = path;\n\n    if (eagerCompile) {\n      try {\n        this._compile();\n      } catch (err) {\n        throw lib._prettifyError(this.path, this.env.opts.dev, err);\n      }\n    } else {\n      this.compiled = false;\n    }\n  };\n\n  _proto3.render = function render(ctx, parentFrame, cb) {\n    var _this6 = this;\n\n    if (typeof ctx === 'function') {\n      cb = ctx;\n      ctx = {};\n    } else if (typeof parentFrame === 'function') {\n      cb = parentFrame;\n      parentFrame = null;\n    } // If there is a parent frame, we are being called from internal\n    // code of another template, and the internal system\n    // depends on the sync/async nature of the parent template\n    // to be inherited, so force an async callback\n\n\n    var forceAsync = !parentFrame; // Catch compile errors for async rendering\n\n    try {\n      this.compile();\n    } catch (e) {\n      var err = lib._prettifyError(this.path, this.env.opts.dev, e);\n\n      if (cb) {\n        return callbackAsap(cb, err);\n      } else {\n        throw err;\n      }\n    }\n\n    var context = new Context(ctx || {}, this.blocks, this.env);\n    var frame = parentFrame ? parentFrame.push(true) : new Frame();\n    frame.topLevel = true;\n    var syncResult = null;\n    var didError = false;\n    this.rootRenderFunc(this.env, context, frame, globalRuntime, function (err, res) {\n      // TODO: this is actually a bug in the compiled template (because waterfall\n      // tasks are both not passing errors up the chain of callbacks AND are not\n      // causing a return from the top-most render function). But fixing that\n      // will require a more substantial change to the compiler.\n      if (didError && cb && typeof res !== 'undefined') {\n        // prevent multiple calls to cb\n        return;\n      }\n\n      if (err) {\n        err = lib._prettifyError(_this6.path, _this6.env.opts.dev, err);\n        didError = true;\n      }\n\n      if (cb) {\n        if (forceAsync) {\n          callbackAsap(cb, err, res);\n        } else {\n          cb(err, res);\n        }\n      } else {\n        if (err) {\n          throw err;\n        }\n\n        syncResult = res;\n      }\n    });\n    return syncResult;\n  };\n\n  _proto3.getExported = function getExported(ctx, parentFrame, cb) {\n    // eslint-disable-line consistent-return\n    if (typeof ctx === 'function') {\n      cb = ctx;\n      ctx = {};\n    }\n\n    if (typeof parentFrame === 'function') {\n      cb = parentFrame;\n      parentFrame = null;\n    } // Catch compile errors for async rendering\n\n\n    try {\n      this.compile();\n    } catch (e) {\n      if (cb) {\n        return cb(e);\n      } else {\n        throw e;\n      }\n    }\n\n    var frame = parentFrame ? parentFrame.push() : new Frame();\n    frame.topLevel = true; // Run the rootRenderFunc to populate the context with exported vars\n\n    var context = new Context(ctx || {}, this.blocks, this.env);\n    this.rootRenderFunc(this.env, context, frame, globalRuntime, function (err) {\n      if (err) {\n        cb(err, null);\n      } else {\n        cb(null, context.getExported());\n      }\n    });\n  };\n\n  _proto3.compile = function compile() {\n    if (!this.compiled) {\n      this._compile();\n    }\n  };\n\n  _proto3._compile = function _compile() {\n    var props;\n\n    if (this.tmplProps) {\n      props = this.tmplProps;\n    } else {\n      var source = compiler.compile(this.tmplStr, this.env.asyncFilters, this.env.extensionsList, this.path, this.env.opts);\n      var func = new Function(source); // eslint-disable-line no-new-func\n\n      props = func();\n    }\n\n    this.blocks = this._getBlocks(props);\n    this.rootRenderFunc = props.root;\n    this.compiled = true;\n  };\n\n  _proto3._getBlocks = function _getBlocks(props) {\n    var blocks = {};\n    lib.keys(props).forEach(function (k) {\n      if (k.slice(0, 2) === 'b_') {\n        blocks[k.slice(2)] = props[k];\n      }\n    });\n    return blocks;\n  };\n\n  return Template;\n}(Obj);\n\nmodule.exports = {\n  Environment: Environment,\n  Template: Template\n};","'use strict';\n\nvar fs = require('fs');\n\nvar path = require('path');\n\nvar _require = require('./lib'),\n    _prettifyError = _require._prettifyError;\n\nvar compiler = require('./compiler');\n\nvar _require2 = require('./environment'),\n    Environment = _require2.Environment;\n\nvar precompileGlobal = require('./precompile-global');\n\nfunction match(filename, patterns) {\n  if (!Array.isArray(patterns)) {\n    return false;\n  }\n\n  return patterns.some(function (pattern) {\n    return filename.match(pattern);\n  });\n}\n\nfunction precompileString(str, opts) {\n  opts = opts || {};\n  opts.isString = true;\n  var env = opts.env || new Environment([]);\n  var wrapper = opts.wrapper || precompileGlobal;\n\n  if (!opts.name) {\n    throw new Error('the \"name\" option is required when compiling a string');\n  }\n\n  return wrapper([_precompile(str, opts.name, env)], opts);\n}\n\nfunction precompile(input, opts) {\n  // The following options are available:\n  //\n  // * name: name of the template (auto-generated when compiling a directory)\n  // * isString: input is a string, not a file path\n  // * asFunction: generate a callable function\n  // * force: keep compiling on error\n  // * env: the Environment to use (gets extensions and async filters from it)\n  // * include: which file/folders to include (folders are auto-included, files are auto-excluded)\n  // * exclude: which file/folders to exclude (folders are auto-included, files are auto-excluded)\n  // * wrapper: function(templates, opts) {...}\n  //       Customize the output format to store the compiled template.\n  //       By default, templates are stored in a global variable used by the runtime.\n  //       A custom loader will be necessary to load your custom wrapper.\n  opts = opts || {};\n  var env = opts.env || new Environment([]);\n  var wrapper = opts.wrapper || precompileGlobal;\n\n  if (opts.isString) {\n    return precompileString(input, opts);\n  }\n\n  var pathStats = fs.existsSync(input) && fs.statSync(input);\n  var precompiled = [];\n  var templates = [];\n\n  function addTemplates(dir) {\n    fs.readdirSync(dir).forEach(function (file) {\n      var filepath = path.join(dir, file);\n      var subpath = filepath.substr(path.join(input, '/').length);\n      var stat = fs.statSync(filepath);\n\n      if (stat && stat.isDirectory()) {\n        subpath += '/';\n\n        if (!match(subpath, opts.exclude)) {\n          addTemplates(filepath);\n        }\n      } else if (match(subpath, opts.include)) {\n        templates.push(filepath);\n      }\n    });\n  }\n\n  if (pathStats.isFile()) {\n    precompiled.push(_precompile(fs.readFileSync(input, 'utf-8'), opts.name || input, env));\n  } else if (pathStats.isDirectory()) {\n    addTemplates(input);\n\n    for (var i = 0; i < templates.length; i++) {\n      var name = templates[i].replace(path.join(input, '/'), '');\n\n      try {\n        precompiled.push(_precompile(fs.readFileSync(templates[i], 'utf-8'), name, env));\n      } catch (e) {\n        if (opts.force) {\n          // Don't stop generating the output if we're\n          // forcing compilation.\n          console.error(e); // eslint-disable-line no-console\n        } else {\n          throw e;\n        }\n      }\n    }\n  }\n\n  return wrapper(precompiled, opts);\n}\n\nfunction _precompile(str, name, env) {\n  env = env || new Environment([]);\n  var asyncFilters = env.asyncFilters;\n  var extensions = env.extensionsList;\n  var template;\n  name = name.replace(/\\\\/g, '/');\n\n  try {\n    template = compiler.compile(str, asyncFilters, extensions, name, env.opts);\n  } catch (err) {\n    throw _prettifyError(name, false, err);\n  }\n\n  return {\n    name: name,\n    template: template\n  };\n}\n\nmodule.exports = {\n  precompile: precompile,\n  precompileString: precompileString\n};","\"use strict\";\n\nfunction installCompat() {\n  'use strict';\n  /* eslint-disable camelcase */\n  // This must be called like `nunjucks.installCompat` so that `this`\n  // references the nunjucks instance\n\n  var runtime = this.runtime;\n  var lib = this.lib; // Handle slim case where these 'modules' are excluded from the built source\n\n  var Compiler = this.compiler.Compiler;\n  var Parser = this.parser.Parser;\n  var nodes = this.nodes;\n  var lexer = this.lexer;\n  var orig_contextOrFrameLookup = runtime.contextOrFrameLookup;\n  var orig_memberLookup = runtime.memberLookup;\n  var orig_Compiler_assertType;\n  var orig_Parser_parseAggregate;\n\n  if (Compiler) {\n    orig_Compiler_assertType = Compiler.prototype.assertType;\n  }\n\n  if (Parser) {\n    orig_Parser_parseAggregate = Parser.prototype.parseAggregate;\n  }\n\n  function uninstall() {\n    runtime.contextOrFrameLookup = orig_contextOrFrameLookup;\n    runtime.memberLookup = orig_memberLookup;\n\n    if (Compiler) {\n      Compiler.prototype.assertType = orig_Compiler_assertType;\n    }\n\n    if (Parser) {\n      Parser.prototype.parseAggregate = orig_Parser_parseAggregate;\n    }\n  }\n\n  runtime.contextOrFrameLookup = function contextOrFrameLookup(context, frame, key) {\n    var val = orig_contextOrFrameLookup.apply(this, arguments);\n\n    if (val !== undefined) {\n      return val;\n    }\n\n    switch (key) {\n      case 'True':\n        return true;\n\n      case 'False':\n        return false;\n\n      case 'None':\n        return null;\n\n      default:\n        return undefined;\n    }\n  };\n\n  function getTokensState(tokens) {\n    return {\n      index: tokens.index,\n      lineno: tokens.lineno,\n      colno: tokens.colno\n    };\n  }\n\n  if (process.env.BUILD_TYPE !== 'SLIM' && nodes && Compiler && Parser) {\n    // i.e., not slim mode\n    var Slice = nodes.Node.extend('Slice', {\n      fields: ['start', 'stop', 'step'],\n      init: function init(lineno, colno, start, stop, step) {\n        start = start || new nodes.Literal(lineno, colno, null);\n        stop = stop || new nodes.Literal(lineno, colno, null);\n        step = step || new nodes.Literal(lineno, colno, 1);\n        this.parent(lineno, colno, start, stop, step);\n      }\n    });\n\n    Compiler.prototype.assertType = function assertType(node) {\n      if (node instanceof Slice) {\n        return;\n      }\n\n      orig_Compiler_assertType.apply(this, arguments);\n    };\n\n    Compiler.prototype.compileSlice = function compileSlice(node, frame) {\n      this._emit('(');\n\n      this._compileExpression(node.start, frame);\n\n      this._emit('),(');\n\n      this._compileExpression(node.stop, frame);\n\n      this._emit('),(');\n\n      this._compileExpression(node.step, frame);\n\n      this._emit(')');\n    };\n\n    Parser.prototype.parseAggregate = function parseAggregate() {\n      var _this = this;\n\n      var origState = getTokensState(this.tokens); // Set back one accounting for opening bracket/parens\n\n      origState.colno--;\n      origState.index--;\n\n      try {\n        return orig_Parser_parseAggregate.apply(this);\n      } catch (e) {\n        var errState = getTokensState(this.tokens);\n\n        var rethrow = function rethrow() {\n          lib._assign(_this.tokens, errState);\n\n          return e;\n        }; // Reset to state before original parseAggregate called\n\n\n        lib._assign(this.tokens, origState);\n\n        this.peeked = false;\n        var tok = this.peekToken();\n\n        if (tok.type !== lexer.TOKEN_LEFT_BRACKET) {\n          throw rethrow();\n        } else {\n          this.nextToken();\n        }\n\n        var node = new Slice(tok.lineno, tok.colno); // If we don't encounter a colon while parsing, this is not a slice,\n        // so re-raise the original exception.\n\n        var isSlice = false;\n\n        for (var i = 0; i <= node.fields.length; i++) {\n          if (this.skip(lexer.TOKEN_RIGHT_BRACKET)) {\n            break;\n          }\n\n          if (i === node.fields.length) {\n            if (isSlice) {\n              this.fail('parseSlice: too many slice components', tok.lineno, tok.colno);\n            } else {\n              break;\n            }\n          }\n\n          if (this.skip(lexer.TOKEN_COLON)) {\n            isSlice = true;\n          } else {\n            var field = node.fields[i];\n            node[field] = this.parseExpression();\n            isSlice = this.skip(lexer.TOKEN_COLON) || isSlice;\n          }\n        }\n\n        if (!isSlice) {\n          throw rethrow();\n        }\n\n        return new nodes.Array(tok.lineno, tok.colno, [node]);\n      }\n    };\n  }\n\n  function sliceLookup(obj, start, stop, step) {\n    obj = obj || [];\n\n    if (start === null) {\n      start = step < 0 ? obj.length - 1 : 0;\n    }\n\n    if (stop === null) {\n      stop = step < 0 ? -1 : obj.length;\n    } else if (stop < 0) {\n      stop += obj.length;\n    }\n\n    if (start < 0) {\n      start += obj.length;\n    }\n\n    var results = [];\n\n    for (var i = start;; i += step) {\n      if (i < 0 || i > obj.length) {\n        break;\n      }\n\n      if (step > 0 && i >= stop) {\n        break;\n      }\n\n      if (step < 0 && i <= stop) {\n        break;\n      }\n\n      results.push(runtime.memberLookup(obj, i));\n    }\n\n    return results;\n  }\n\n  function hasOwnProp(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n  }\n\n  var ARRAY_MEMBERS = {\n    pop: function pop(index) {\n      if (index === undefined) {\n        return this.pop();\n      }\n\n      if (index >= this.length || index < 0) {\n        throw new Error('KeyError');\n      }\n\n      return this.splice(index, 1);\n    },\n    append: function append(element) {\n      return this.push(element);\n    },\n    remove: function remove(element) {\n      for (var i = 0; i < this.length; i++) {\n        if (this[i] === element) {\n          return this.splice(i, 1);\n        }\n      }\n\n      throw new Error('ValueError');\n    },\n    count: function count(element) {\n      var count = 0;\n\n      for (var i = 0; i < this.length; i++) {\n        if (this[i] === element) {\n          count++;\n        }\n      }\n\n      return count;\n    },\n    index: function index(element) {\n      var i;\n\n      if ((i = this.indexOf(element)) === -1) {\n        throw new Error('ValueError');\n      }\n\n      return i;\n    },\n    find: function find(element) {\n      return this.indexOf(element);\n    },\n    insert: function insert(index, elem) {\n      return this.splice(index, 0, elem);\n    }\n  };\n  var OBJECT_MEMBERS = {\n    items: function items() {\n      return lib._entries(this);\n    },\n    values: function values() {\n      return lib._values(this);\n    },\n    keys: function keys() {\n      return lib.keys(this);\n    },\n    get: function get(key, def) {\n      var output = this[key];\n\n      if (output === undefined) {\n        output = def;\n      }\n\n      return output;\n    },\n    has_key: function has_key(key) {\n      return hasOwnProp(this, key);\n    },\n    pop: function pop(key, def) {\n      var output = this[key];\n\n      if (output === undefined && def !== undefined) {\n        output = def;\n      } else if (output === undefined) {\n        throw new Error('KeyError');\n      } else {\n        delete this[key];\n      }\n\n      return output;\n    },\n    popitem: function popitem() {\n      var keys = lib.keys(this);\n\n      if (!keys.length) {\n        throw new Error('KeyError');\n      }\n\n      var k = keys[0];\n      var val = this[k];\n      delete this[k];\n      return [k, val];\n    },\n    setdefault: function setdefault(key, def) {\n      if (def === void 0) {\n        def = null;\n      }\n\n      if (!(key in this)) {\n        this[key] = def;\n      }\n\n      return this[key];\n    },\n    update: function update(kwargs) {\n      lib._assign(this, kwargs);\n\n      return null; // Always returns None\n    }\n  };\n  OBJECT_MEMBERS.iteritems = OBJECT_MEMBERS.items;\n  OBJECT_MEMBERS.itervalues = OBJECT_MEMBERS.values;\n  OBJECT_MEMBERS.iterkeys = OBJECT_MEMBERS.keys;\n\n  runtime.memberLookup = function memberLookup(obj, val, autoescape) {\n    if (arguments.length === 4) {\n      return sliceLookup.apply(this, arguments);\n    }\n\n    obj = obj || {}; // If the object is an object, return any of the methods that Python would\n    // otherwise provide.\n\n    if (lib.isArray(obj) && hasOwnProp(ARRAY_MEMBERS, val)) {\n      return ARRAY_MEMBERS[val].bind(obj);\n    }\n\n    if (lib.isObject(obj) && hasOwnProp(OBJECT_MEMBERS, val)) {\n      return OBJECT_MEMBERS[val].bind(obj);\n    }\n\n    return orig_memberLookup.apply(this, arguments);\n  };\n\n  return uninstall;\n}\n\nmodule.exports = installCompat;","'use strict';\n\nvar lib = require('./src/lib');\n\nvar _require = require('./src/environment'),\n    Environment = _require.Environment,\n    Template = _require.Template;\n\nvar Loader = require('./src/loader');\n\nvar loaders = require('./src/loaders');\n\nvar precompile = require('./src/precompile');\n\nvar compiler = require('./src/compiler');\n\nvar parser = require('./src/parser');\n\nvar lexer = require('./src/lexer');\n\nvar runtime = require('./src/runtime');\n\nvar nodes = require('./src/nodes');\n\nvar installJinjaCompat = require('./src/jinja-compat'); // A single instance of an environment, since this is so commonly used\n\n\nvar e;\n\nfunction configure(templatesPath, opts) {\n  opts = opts || {};\n\n  if (lib.isObject(templatesPath)) {\n    opts = templatesPath;\n    templatesPath = null;\n  }\n\n  var TemplateLoader;\n\n  if (loaders.FileSystemLoader) {\n    TemplateLoader = new loaders.FileSystemLoader(templatesPath, {\n      watch: opts.watch,\n      noCache: opts.noCache\n    });\n  } else if (loaders.WebLoader) {\n    TemplateLoader = new loaders.WebLoader(templatesPath, {\n      useCache: opts.web && opts.web.useCache,\n      async: opts.web && opts.web.async\n    });\n  }\n\n  e = new Environment(TemplateLoader, opts);\n\n  if (opts && opts.express) {\n    e.express(opts.express);\n  }\n\n  return e;\n}\n\nmodule.exports = {\n  Environment: Environment,\n  Template: Template,\n  Loader: Loader,\n  FileSystemLoader: loaders.FileSystemLoader,\n  NodeResolveLoader: loaders.NodeResolveLoader,\n  PrecompiledLoader: loaders.PrecompiledLoader,\n  WebLoader: loaders.WebLoader,\n  compiler: compiler,\n  parser: parser,\n  lexer: lexer,\n  runtime: runtime,\n  lib: lib,\n  nodes: nodes,\n  installJinjaCompat: installJinjaCompat,\n  configure: configure,\n  reset: function reset() {\n    e = undefined;\n  },\n  compile: function compile(src, env, path, eagerCompile) {\n    if (!e) {\n      configure();\n    }\n\n    return new Template(src, env, path, eagerCompile);\n  },\n  render: function render(name, ctx, cb) {\n    if (!e) {\n      configure();\n    }\n\n    return e.render(name, ctx, cb);\n  },\n  renderString: function renderString(src, ctx, cb) {\n    if (!e) {\n      configure();\n    }\n\n    return e.renderString(src, ctx, cb);\n  },\n  precompile: precompile ? precompile.precompile : undefined,\n  precompileString: precompile ? precompile.precompileString : undefined\n};","import { TaprootTemplateParser } from \"@taprootio/rollup-plugin-taproot/dist/models/TaprootTemplateParser\"\nimport nunjucks from \"nunjucks\"\n\nconst NunjucksTemplateParser: TaprootTemplateParser = {\n  FileMatcher: new RegExp(\"([a-zA-Z0-9s_\\\\.-:])+(.njk)$\"),\n  CompileTemplate: (template) => {\n    const compiled = nunjucks.compile(template)\n\n    return {\n      Render: (data) => {\n        return compiled.render(data)\n      },\n    }\n  },\n}\n\nexport { NunjucksTemplateParser }\n"],"names":["domain","ArrayProto","Array","prototype","ObjProto","Object","escapeMap","escapeRegex","_exports","libModule","exports","hasOwnProp","obj","k","hasOwnProperty","call","lookupEscape","ch","TemplateError","message","lineno","colno","err","cause","getStack","Error","name","setPrototypeOf","this","defineProperty","enumerable","writable","value","captureStackTrace","constructor","stackDescriptor","getOwnPropertyDescriptor","get","stack","firstUpdate","Update","path","msg","isFunction","toString","isArray","isString","isObject","getAttrGetter","attribute","attr","parts","split","item","_item","i","length","part","toArray","slice","indexOf","arr","searchElement","fromIndex","keys_","push","_prettifyError","withInternals","old","create","escape","val","replace","groupBy","throwOnUndefined","result","iterator","key","undefined","TypeError","without","array","contains","arguments","index","repeat","char_","n","str","each","func","context","forEach","l","map","results","asyncIter","iter","cb","next","asyncFor","keys","len","_entries","_values","_assign","extend","obj1","obj2","inOperator","hasSetImmediate","setImmediate","raw","rawAsap","task","queue","requestFlush","flushing","flush","currentIndex","scan","newLength","parentDomain","process","require$$0","active","nextTick","freeTasks","asap_1","rawTask","pop","RawTask","enter","threw","exit","globals","executeSync","args","apply","splice","executeAsync","fn","setTimeout","_isArray","maybeArray","waterfall","tasks","callback","forceAsync","wrapIterator","makeCallback","makeIterator","module","lib","token","type","Tokenizer","opts","in_code","tags","BLOCK_START","blockStart","BLOCK_END","blockEnd","VARIABLE_START","variableStart","VARIABLE_END","variableEnd","COMMENT_START","commentStart","COMMENT_END","commentEnd","trimBlocks","lstripBlocks","_proto","nextToken","tok","cur","current","isFinished","_parseString","_extract","_extractString","forward","back","charAt","forwardN","regexBody","previous","POSSIBLE_FLAGS","regexFlags","body","flags","complexOps","curComplex","_extractUntil","whitespaceChars","match","data","beginChars","inComment","_matches","lastLine","test","delimiter","charString","_extractMatching","breakOnMatch","first","t","idx","_extractRegex","regex","matches","currentStr","backN","src","lastIndexOf","substr","lexer","lex","TOKEN_STRING","TOKEN_WHITESPACE","TOKEN_DATA","TOKEN_BLOCK_START","TOKEN_BLOCK_END","TOKEN_VARIABLE_START","TOKEN_VARIABLE_END","TOKEN_COMMENT","TOKEN_LEFT_PAREN","TOKEN_RIGHT_PAREN","TOKEN_LEFT_BRACKET","TOKEN_RIGHT_BRACKET","TOKEN_LEFT_CURLY","TOKEN_RIGHT_CURLY","TOKEN_OPERATOR","TOKEN_COMMA","TOKEN_COLON","TOKEN_TILDE","TOKEN_PIPE","TOKEN_INT","TOKEN_FLOAT","TOKEN_BOOLEAN","TOKEN_NONE","TOKEN_SYMBOL","TOKEN_SPECIAL","TOKEN_REGEX","_defineProperties","target","props","descriptor","configurable","_createClass","Constructor","protoProps","staticProps","_inheritsLoose","subClass","superClass","_setPrototypeOf","o","p","__proto__","EventEmitter","require$$1","extendClass","cls","parent","prop","tmp","res","subclass","_cls","Obj","init","EmitterObj","_EventEmitter","_this2","_this","object","traverseAndCheck","Node","findAll","_Obj","_arguments","_len","_key","fields","field","NodeList","children","child","iterFields","_this3","Value","_Node","_Node2","_proto2","nodes","addChild","node","Root","Literal","Symbol","Group","ArrayNode","Pair","Dict","LookupVal","If","IfAsync","InlineIf","For","AsyncEach","AsyncAll","Macro","Caller","Import","FromImport","_Node3","template","names","withContext","FunCall","Filter","FilterAsync","KeywordArgs","Block","Super","Extends","Include","Set","Switch","Case","Output","Capture","TemplateData","UnaryOp","BinOp","In","Is","Or","And","Not","Add","Concat","Sub","Mul","Div","FloorDiv","Mod","Pow","Neg","Pos","Compare","CompareOperand","CallExtension","ext","contentArgs","extName","__name","autoescape","CallExtensionAsync","print","indent","inline","lines","line","stdout","write","nl","printNodes","typename","fieldName","JSON","stringify","_ref","require$$2","require$$3","Parser","tokens","peeked","breakOnBlocks","dropLeadingWhitespace","extensions","withWhitespace","peekToken","pushToken","error","fail","skip","expect","skipValue","skipSymbol","advanceAfterBlockEnd","advanceAfterVariableEnd","parseFor","endBlock","forTok","parsePrimary","prim","parseExpression","parseUntilBlocks","else_","parseMacro","macroTok","parseSignature","parseCall","callTok","callerArgs","macroCall","callerName","callerNode","parseWithContext","parseImport","importTok","parseFrom","fromTok","nextTok","alias","parseBlock","tag","parseExtends","tagName","parseInclude","ignoreMissing","parseIf","cond","parseSet","targets","parseSwitch","switchStart","switchEnd","caseStart","caseDefault","expr","defaultCase","cases","col","parseStatement","parseRaw","parseFilterStatement","parse","endTagName","rawBlockRegex","RegExp","rawLevel","begun","all","pre","blockName","parsePostfix","lookup","parseAggregate","parseInlineIf","parseOr","condNode","bodyNode","parseAnd","node2","parseNot","parseIn","parseIs","invert","parseCompare","not","compareOps","parseConcat","ops","parseAdd","parseSub","parseMul","parseDiv","parseFloorDiv","parseMod","parsePow","parseUnary","noFilters","parseFilter","noPostfix","parseInt","parseFloat","parseFilterName","parseFilterArgs","concat","filterTok","tolerant","noParens","kwargs","checkComma","arg","prev","blockNames","ret","parseNodes","buf","nextVal","e","parseAsRoot","parser","sym","gensym","mapCOW","walk","ast","depthFirst","astT","propsT","depthWalk","_liftFilters","asyncFilters","walked","descNode","symbol","cps","async","convertStatements","blockNode","hasSuper","unshift","liftSuper","liftFilters","transformer","transform","arrayFrom","from","supportsIterators","Frame","isolateWrites","variables","topLevel","set","resolveUp","frame","resolve","id","forWrite","isKeywordArgs","getKeywordArgs","lastArg","numArgs","SafeString","String","valueOf","runtime","makeMacro","argNames","kwargNames","macroArgs","argCount","makeKeywordArgs","__keywords","suppressValue","ensureDefined","memberLookup","_len2","_key2","contextOrFrameLookup","callWrap","handleError","copySafeness","dest","markSafe","asyncEach","dimen","asyncAll","outputArr","finished","done","output","join","_i","fromIterator","require$$4","Compiler","templateName","codebuf","lastId","buffer","bufferStack","_scopeClosers","inBlock","_pushBuffer","_tmpid","_emit","_popBuffer","code","_emitLine","_emitLines","_emitFuncBegin","_emitFuncEnd","noReturn","_closeScopeLevels","_addScopeLevel","_withScopedSyntax","_makeCallback","_templateName","_compileChildren","compile","_compileAggregate","startChar","endChar","_compileExpression","assertType","types","some","compileCallExtension","_this4","compileCallExtensionAsync","compileNodeList","compileLiteral","compileSymbol","v","compileGroup","compileArray","compileDict","compilePair","compileInlineIf","compileIn","left","right","compileIs","_binOpEmitter","compileOr","compileAnd","compileAdd","compileConcat","compileSub","compileMul","compileDiv","compileMod","compileNot","compileFloorDiv","compilePow","compileNeg","compilePos","compileCompare","_this5","op","compileLookupVal","_getNodeName","compileFunCall","compileFilter","compileFilterAsync","compileKeywordArgs","compileSet","_this6","ids","compileSwitch","_this7","c","default","compileIf","_this8","compileIfAsync","_emitLoopBindings","_this9","b","compileFor","_this10","u","tid","_node$name$children","_v","_compileAsyncLoop","parallel","_this11","asyncMethod","arrayLen","compileAsyncEach","compileAsyncAll","_compileMacro","_this12","funcId","keepFrame","currFrame","realNames","pair","bufferId","compileMacro","compileCaller","_compileGetTemplate","eagerCompile","parentTemplateId","parentName","eagerCompileArg","ignoreMissingArg","compileImport","compileFromImport","_this13","importedId","nameNode","compileBlock","compileSuper","compileExtends","compileInclude","id2","compileTemplateData","compileCapture","_this14","compileOutput","_this15","compileRoot","_this16","blocks","block","tmpFrame","_compile","getCode","require$$5","compiler","processedSrc","preprocess","filter","f","reduce","s","processor","r","filtersModule","normalize","defaultValue","isNaN","num","capitalize","toLowerCase","toUpperCase","list","getSelectOrReject","expectedTestResult","testName","secondArg","env","getTest","trim","abs","Math","batch","linecount","fillWith","center","width","spaces","post","def","bool","dictsort","caseSensitive","by","si","sort","t1","t2","a","dump","safe","forceescape","groupby","indentfirst","sp","del","last","Map","size","lower","nl2br","random","floor","reject","rejectattr","select","selectattr","new_","maxCount","originalStr","nextIndex","pos","count","substring","reverse","round","precision","method","factor","pow","ceil","slices","sliceLength","extra","offset","start","end","currSlice","sum","reversed","caseSens","getAttribute","x","y","string","striptags","input","preserveLinebreaks","trimmedInput","title","words","word","truncate","killwords","orig","upper","urlencode","enc","encodeURIComponent","_ref2","puncRe","emailRe","httpHttpsRe","wwwRe","tldRe","urlize","nofollow","Infinity","noFollowAttr","possibleUrl","shortUrl","wordcount","float","intFilter","base","int","d","loader","_EmitterObj","Loader","to","dirname","isRelative","filename","PrecompiledLoader","_Loader","compiledTemplates","precompiled","getSource","chokidar","fs","FileSystemLoader","searchPaths","console","log","pathsToNames","noCache","watch","require","paths","existsSync","watcher","on","event","fullname","emit","fullpath","basePath","source","readFileSync","NodeResolveLoader","_Loader2","add","_cycler","items","reset","callable","defined","divisibleby","one","two","escaped","equalto","eq","sameas","even","falsy","ge","greaterthan","gt","le","lessthan","lt","ne","null","number","odd","truthy","iterable","mapping","globals_1","range","stop","step","cycler","joiner","sep","_joiner","asap","_waterfall","filters","_require","WebLoader","tests","require$$6","require$$7","require$$8","globalRuntime","require$$9","expressApp","app","NunjucksView","defaultEngine","extname","render","callbackAsap","noopTmplSrc","root","Environment","loaders","dev","window","nunjucksPrecompiled","_initLoaders","extensionsList","addFilter","addTest","cache","invalidateCache","addExtension","extension","removeExtension","getExtension","hasExtension","addGlobal","getGlobal","wrapped","getFilter","resolveTemplate","getTemplate","syncResult","that","tmpl","Template","handle","info","newTmpl","express","ctx","renderString","Context","exported","addBlock","setVariable","getVariables","getBlock","getSuper","blk","addExport","getExported","_Obj2","_proto3","tmplProps","tmplStr","compiled","parentFrame","didError","rootRenderFunc","Function","_getBlocks","environment","configure","templatesPath","TemplateLoader","useCache","web","nunjucks","NunjucksTemplateParser","FileMatcher","CompileTemplate","Render"],"mappings":"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"}